import { __values } from 'tslib';
import { Component, Input, NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * @param {?} favoriteObject
 * @param {?} visualizationLayout
 * @param {?} type
 * @return {?}
 */
function getTableConfiguration(favoriteObject, visualizationLayout, type) {
    return {
        title: favoriteObject.hasOwnProperty('displayName')
            ? favoriteObject.displayName
            : favoriteObject.hasOwnProperty('name')
                ? favoriteObject.name
                : '',
        subtitle: favoriteObject.hasOwnProperty('subtitle')
            ? favoriteObject.subtitle
            : '',
        showColumnTotal: favoriteObject.hasOwnProperty('colTotal')
            ? favoriteObject.colTotal
            : true,
        showColumnSubtotal: favoriteObject.hasOwnProperty('colSubtotal')
            ? favoriteObject.colSubtotal
            : true,
        showRowTotal: favoriteObject.hasOwnProperty('rowTotal')
            ? favoriteObject.rowTotal
            : true,
        showRowSubtotal: favoriteObject.hasOwnProperty('rowSubtotal')
            ? favoriteObject.rowSubtotal
            : true,
        showDimensionLabels: favoriteObject.hasOwnProperty('showDimensionLabels')
            ? favoriteObject.showDimensionLabels
            : true,
        hideEmptyRows: favoriteObject.hasOwnProperty('hideEmptyRows')
            ? favoriteObject.hideEmptyRows
            : true,
        showHierarchy: favoriteObject.hasOwnProperty('showHierarchy')
            ? favoriteObject.showHierarchy
            : true,
        displayList: checkForEventDataType(favoriteObject, type),
        rows: visualizationLayout.rows ? visualizationLayout.rows : ['pe'],
        columns: visualizationLayout.columns ? visualizationLayout.columns : ['dx'],
        legendSet: favoriteObject.legendSet || null,
        styles: null
    };
}
/**
 * @param {?} favoriteObject
 * @param {?} favoriteType
 * @return {?}
 */
function checkForEventDataType(favoriteObject, favoriteType) {
    var /** @type {?} */ displayList = false;
    if (favoriteType === 'EVENT_REPORT') {
        if (favoriteObject.hasOwnProperty('dataType') &&
            favoriteObject.dataType === 'EVENTS') {
            displayList = true;
        }
    }
    return displayList;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * @param {?} analyticsObject
 * @param {?} tableConfiguration
 * @return {?}
 */
function drawTable(analyticsObject, tableConfiguration) {
    var /** @type {?} */ legendClasses = tableConfiguration.legendSet
        ? tableConfiguration.legendSet.legends
        : null;
    var /** @type {?} */ table = {
        headers: [],
        columns: [],
        rows: [],
        titles: {
            rows: [],
            column: []
        },
        titlesAvailable: false,
        hasParentOu: false
    };
    if (tableConfiguration.hasOwnProperty('title')) {
        table['title'] = tableConfiguration.title;
    }
    if (tableConfiguration.hasOwnProperty('subtitle')) {
        table['subtitle'] = tableConfiguration.subtitle;
    }
    if (tableConfiguration.displayList) {
        table.headers[0] = {
            items: [],
            style: ''
        };
        tableConfiguration.columns[tableConfiguration.columns.indexOf('pe')] =
            'eventdate';
        tableConfiguration.columns[tableConfiguration.columns.indexOf('ou')] =
            'ouname';
        try {
            for (var _a = __values(tableConfiguration.columns), _b = _a.next(); !_b.done; _b = _a.next()) {
                var item = _b.value;
                table.headers[0].items.push({
                    name: analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                        .column,
                    span: 1
                });
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
            }
            finally { if (e_1) throw e_1.error; }
        }
        try {
            for (var _d = __values(analyticsObject.rows), _e = _d.next(); !_e.done; _e = _d.next()) {
                var item = _e.value;
                var /** @type {?} */ column_items = [];
                try {
                    for (var _f = __values(tableConfiguration.columns), _g = _f.next(); !_g.done; _g = _f.next()) {
                        var col = _g.value;
                        var /** @type {?} */ index = getTitleIndex(analyticsObject.headers, col);
                        column_items.push({
                            name: '',
                            display: true,
                            row_span: '1',
                            // color:getColor(item[index],)
                            val: item[index]
                        });
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_g && !_g.done && (_h = _f.return)) _h.call(_f);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                table.rows.push({
                    headers: [],
                    items: column_items
                });
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_e && !_e.done && (_j = _d.return)) _j.call(_d);
            }
            finally { if (e_3) throw e_3.error; }
        }
    }
    else {
        // add names to titles array
        if (tableConfiguration.showDimensionLabels) {
            table.titlesAvailable = true;
            try {
                for (var _k = __values(tableConfiguration.columns), _l = _k.next(); !_l.done; _l = _k.next()) {
                    var item = _l.value;
                    table.titles.column.push(analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                        .column);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_l && !_l.done && (_m = _k.return)) _m.call(_k);
                }
                finally { if (e_4) throw e_4.error; }
            }
            try {
                for (var _o = __values(tableConfiguration.rows), _p = _o.next(); !_p.done; _p = _o.next()) {
                    var item = _p.value;
                    table.titles.rows.push(analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                        .column);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_p && !_p.done && (_q = _o.return)) _q.call(_o);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        try {
            for (var _r = __values(tableConfiguration.columns), _s = _r.next(); !_s.done; _s = _r.next()) {
                var columnItem = _s.value;
                var /** @type {?} */ dimension = calculateColSpan(analyticsObject, tableConfiguration.columns, columnItem);
                var /** @type {?} */ currentColumnItems = prepareSingleCategories(analyticsObject, columnItem);
                var /** @type {?} */ headerItem = [];
                for (var /** @type {?} */ i = 0; i < dimension.duplication; i++) {
                    try {
                        for (var currentColumnItems_1 = __values(currentColumnItems), currentColumnItems_1_1 = currentColumnItems_1.next(); !currentColumnItems_1_1.done; currentColumnItems_1_1 = currentColumnItems_1.next()) {
                            var currentItem = currentColumnItems_1_1.value;
                            headerItem.push({
                                name: currentItem.name,
                                span: dimension.col_span,
                                type: currentItem.type,
                                id: currentItem.uid
                            });
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (currentColumnItems_1_1 && !currentColumnItems_1_1.done && (_t = currentColumnItems_1.return)) _t.call(currentColumnItems_1);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                }
                var /** @type {?} */ styles = '';
                if (tableConfiguration.hasOwnProperty('style')) {
                    if (tableConfiguration.styles.hasOwnProperty(columnItem)) {
                        styles = tableConfiguration.styles[columnItem];
                    }
                }
                table.headers.push({ items: headerItem, style: styles });
            }
        }
        catch (e_7_1) { e_7 = { error: e_7_1 }; }
        finally {
            try {
                if (_s && !_s.done && (_u = _r.return)) _u.call(_r);
            }
            finally { if (e_7) throw e_7.error; }
        }
        try {
            for (var _v = __values(tableConfiguration.rows), _w = _v.next(); !_w.done; _w = _v.next()) {
                var rowItem = _w.value;
                table.columns.push(rowItem);
            }
        }
        catch (e_8_1) { e_8 = { error: e_8_1 }; }
        finally {
            try {
                if (_w && !_w.done && (_x = _v.return)) _x.call(_v);
            }
            finally { if (e_8) throw e_8.error; }
        }
        // Preparing table columns
        var /** @type {?} */ column_length = tableConfiguration.columns.length;
        var /** @type {?} */ column_items_array = [];
        for (var /** @type {?} */ i = 0; i < column_length; i++) {
            var /** @type {?} */ currentRowItems = prepareSingleCategories(analyticsObject, tableConfiguration.columns[i]);
            column_items_array.push(currentRowItems);
        }
        var /** @type {?} */ table_columns_array = [];
        for (var /** @type {?} */ i = 0; i < column_items_array.length; i++) {
            if (table_columns_array.length === 0) {
                try {
                    for (var _y = __values(column_items_array[i]), _z = _y.next(); !_z.done; _z = _y.next()) {
                        var item = _z.value;
                        table_columns_array.push([item]);
                    }
                }
                catch (e_9_1) { e_9 = { error: e_9_1 }; }
                finally {
                    try {
                        if (_z && !_z.done && (_0 = _y.return)) _0.call(_y);
                    }
                    finally { if (e_9) throw e_9.error; }
                }
            }
            else {
                var /** @type {?} */ temp_arr = table_columns_array.concat();
                table_columns_array = [];
                try {
                    for (var temp_arr_1 = __values(temp_arr), temp_arr_1_1 = temp_arr_1.next(); !temp_arr_1_1.done; temp_arr_1_1 = temp_arr_1.next()) {
                        var item = temp_arr_1_1.value;
                        try {
                            for (var _1 = __values(column_items_array[i]), _2 = _1.next(); !_2.done; _2 = _1.next()) {
                                var val = _2.value;
                                if (item instanceof Array) {
                                    var /** @type {?} */ tempArr = Array.from(item);
                                    table_columns_array.push(tempArr.concat([val]));
                                }
                                else {
                                    table_columns_array.push([item, val]);
                                }
                            }
                        }
                        catch (e_10_1) { e_10 = { error: e_10_1 }; }
                        finally {
                            try {
                                if (_2 && !_2.done && (_3 = _1.return)) _3.call(_1);
                            }
                            finally { if (e_10) throw e_10.error; }
                        }
                    }
                }
                catch (e_11_1) { e_11 = { error: e_11_1 }; }
                finally {
                    try {
                        if (temp_arr_1_1 && !temp_arr_1_1.done && (_4 = temp_arr_1.return)) _4.call(temp_arr_1);
                    }
                    finally { if (e_11) throw e_11.error; }
                }
            }
        }
        // Preparing table rows
        var /** @type {?} */ rows_length = tableConfiguration.rows.length;
        var /** @type {?} */ row_items_array = [];
        for (var /** @type {?} */ i = 0; i < rows_length; i++) {
            var /** @type {?} */ dimension = calculateColSpan(analyticsObject, tableConfiguration.rows, tableConfiguration.rows[i]);
            var /** @type {?} */ currentRowItems = prepareSingleCategories(analyticsObject, tableConfiguration.rows[i]);
            row_items_array.push({ items: currentRowItems, dimensions: dimension });
        }
        var /** @type {?} */ table_rows_array = [];
        for (var /** @type {?} */ i = 0; i < row_items_array.length; i++) {
            if (table_rows_array.length === 0) {
                try {
                    for (var _5 = __values(row_items_array[i].items), _6 = _5.next(); !_6.done; _6 = _5.next()) {
                        var item = _6.value;
                        item.dimensions = row_items_array[i].dimensions;
                        table_rows_array.push([item]);
                    }
                }
                catch (e_12_1) { e_12 = { error: e_12_1 }; }
                finally {
                    try {
                        if (_6 && !_6.done && (_7 = _5.return)) _7.call(_5);
                    }
                    finally { if (e_12) throw e_12.error; }
                }
            }
            else {
                var /** @type {?} */ temp_arr = table_rows_array.concat();
                table_rows_array = [];
                try {
                    for (var temp_arr_2 = __values(temp_arr), temp_arr_2_1 = temp_arr_2.next(); !temp_arr_2_1.done; temp_arr_2_1 = temp_arr_2.next()) {
                        var item = temp_arr_2_1.value;
                        try {
                            for (var _8 = __values(row_items_array[i].items), _9 = _8.next(); !_9.done; _9 = _8.next()) {
                                var val = _9.value;
                                val.dimensions = row_items_array[i].dimensions;
                                if (item instanceof Array) {
                                    var /** @type {?} */ tempArr = Array.from(item);
                                    table_rows_array.push(tempArr.concat([val]));
                                }
                                else {
                                    table_rows_array.push([item, val]);
                                }
                            }
                        }
                        catch (e_13_1) { e_13 = { error: e_13_1 }; }
                        finally {
                            try {
                                if (_9 && !_9.done && (_10 = _8.return)) _10.call(_8);
                            }
                            finally { if (e_13) throw e_13.error; }
                        }
                    }
                }
                catch (e_14_1) { e_14 = { error: e_14_1 }; }
                finally {
                    try {
                        if (temp_arr_2_1 && !temp_arr_2_1.done && (_11 = temp_arr_2.return)) _11.call(temp_arr_2);
                    }
                    finally { if (e_14) throw e_14.error; }
                }
            }
        }
        var /** @type {?} */ counter = 0;
        if (table_rows_array.length !== 0) {
            try {
                for (var table_rows_array_1 = __values(table_rows_array), table_rows_array_1_1 = table_rows_array_1.next(); !table_rows_array_1_1.done; table_rows_array_1_1 = table_rows_array_1.next()) {
                    var rowItem = table_rows_array_1_1.value;
                    var /** @type {?} */ item = {
                        items: [],
                        headers: rowItem
                    };
                    try {
                        for (var rowItem_1 = __values(rowItem), rowItem_1_1 = rowItem_1.next(); !rowItem_1_1.done; rowItem_1_1 = rowItem_1.next()) {
                            var val = rowItem_1_1.value;
                            if (counter === 0 || counter % val.dimensions.col_span === 0) {
                                item.items.push({
                                    type: val.type,
                                    name: val.uid,
                                    val: val.name,
                                    row_span: val.dimensions.col_span,
                                    header: true
                                });
                            }
                        }
                    }
                    catch (e_15_1) { e_15 = { error: e_15_1 }; }
                    finally {
                        try {
                            if (rowItem_1_1 && !rowItem_1_1.done && (_12 = rowItem_1.return)) _12.call(rowItem_1);
                        }
                        finally { if (e_15) throw e_15.error; }
                    }
                    try {
                        for (var table_columns_array_1 = __values(table_columns_array), table_columns_array_1_1 = table_columns_array_1.next(); !table_columns_array_1_1.done; table_columns_array_1_1 = table_columns_array_1.next()) {
                            var colItem = table_columns_array_1_1.value;
                            var /** @type {?} */ dataItem = [];
                            try {
                                for (var rowItem_2 = __values(rowItem), rowItem_2_1 = rowItem_2.next(); !rowItem_2_1.done; rowItem_2_1 = rowItem_2.next()) {
                                    var val = rowItem_2_1.value;
                                    dataItem.push({ type: val.type, value: val.uid });
                                }
                            }
                            catch (e_16_1) { e_16 = { error: e_16_1 }; }
                            finally {
                                try {
                                    if (rowItem_2_1 && !rowItem_2_1.done && (_13 = rowItem_2.return)) _13.call(rowItem_2);
                                }
                                finally { if (e_16) throw e_16.error; }
                            }
                            try {
                                for (var colItem_1 = __values(colItem), colItem_1_1 = colItem_1.next(); !colItem_1_1.done; colItem_1_1 = colItem_1.next()) {
                                    var val = colItem_1_1.value;
                                    dataItem.push({ type: val.type, value: val.uid });
                                }
                            }
                            catch (e_17_1) { e_17 = { error: e_17_1 }; }
                            finally {
                                try {
                                    if (colItem_1_1 && !colItem_1_1.done && (_14 = colItem_1.return)) _14.call(colItem_1);
                                }
                                finally { if (e_17) throw e_17.error; }
                            }
                            item.items.push({
                                name: '',
                                val: getDataValue(analyticsObject, dataItem),
                                color: getDataValueColor(legendClasses, getDataValue(analyticsObject, dataItem)),
                                row_span: '1',
                                display: true
                            });
                        }
                    }
                    catch (e_18_1) { e_18 = { error: e_18_1 }; }
                    finally {
                        try {
                            if (table_columns_array_1_1 && !table_columns_array_1_1.done && (_15 = table_columns_array_1.return)) _15.call(table_columns_array_1);
                        }
                        finally { if (e_18) throw e_18.error; }
                    }
                    if (tableConfiguration.hasOwnProperty('hideEmptyRows') &&
                        tableConfiguration.hideEmptyRows) {
                        if (!checkZeros(tableConfiguration.rows.length, item.items)) {
                            table.rows.push(item);
                        }
                    }
                    else {
                        table.rows.push(item);
                    }
                    counter++;
                }
            }
            catch (e_19_1) { e_19 = { error: e_19_1 }; }
            finally {
                try {
                    if (table_rows_array_1_1 && !table_rows_array_1_1.done && (_16 = table_rows_array_1.return)) _16.call(table_rows_array_1);
                }
                finally { if (e_19) throw e_19.error; }
            }
        }
        else {
            var /** @type {?} */ item = {
                items: [],
                headers: []
            };
            try {
                for (var table_columns_array_2 = __values(table_columns_array), table_columns_array_2_1 = table_columns_array_2.next(); !table_columns_array_2_1.done; table_columns_array_2_1 = table_columns_array_2.next()) {
                    var colItem = table_columns_array_2_1.value;
                    var /** @type {?} */ dataItem = [];
                    try {
                        for (var colItem_2 = __values(colItem), colItem_2_1 = colItem_2.next(); !colItem_2_1.done; colItem_2_1 = colItem_2.next()) {
                            var val = colItem_2_1.value;
                            dataItem.push({ type: val.type, value: val.uid });
                        }
                    }
                    catch (e_20_1) { e_20 = { error: e_20_1 }; }
                    finally {
                        try {
                            if (colItem_2_1 && !colItem_2_1.done && (_17 = colItem_2.return)) _17.call(colItem_2);
                        }
                        finally { if (e_20) throw e_20.error; }
                    }
                    item.items.push({
                        name: '',
                        val: getDataValue(analyticsObject, dataItem),
                        row_span: '1',
                        display: true
                    });
                }
            }
            catch (e_21_1) { e_21 = { error: e_21_1 }; }
            finally {
                try {
                    if (table_columns_array_2_1 && !table_columns_array_2_1.done && (_18 = table_columns_array_2.return)) _18.call(table_columns_array_2);
                }
                finally { if (e_21) throw e_21.error; }
            }
            if (tableConfiguration.hasOwnProperty('hideEmptyRows') &&
                tableConfiguration.hideEmptyRows) {
                if (!checkZeros(tableConfiguration.rows.length, item.items)) {
                    table.rows.push(item);
                }
            }
            else {
                table.rows.push(item);
            }
        }
    }
    // todo improve total options to also work for event table
    // return _getSanitizedTableObject(table, tableConfiguration);
    return table;
    var e_1, _c, e_3, _j, e_2, _h, e_4, _m, e_5, _q, e_7, _u, e_6, _t, e_8, _x, e_9, _0, e_11, _4, e_10, _3, e_12, _7, e_14, _11, e_13, _10, e_19, _16, e_15, _12, e_18, _15, e_16, _13, e_17, _14, e_21, _18, e_20, _17;
}
/**
 * @param {?} analyticsObjectHeaders
 * @param {?} name
 * @return {?}
 */
function getTitleIndex(analyticsObjectHeaders, name) {
    var /** @type {?} */ index = 0;
    var /** @type {?} */ counter = 0;
    try {
        for (var analyticsObjectHeaders_1 = __values(analyticsObjectHeaders), analyticsObjectHeaders_1_1 = analyticsObjectHeaders_1.next(); !analyticsObjectHeaders_1_1.done; analyticsObjectHeaders_1_1 = analyticsObjectHeaders_1.next()) {
            var header = analyticsObjectHeaders_1_1.value;
            if (header.name === name) {
                index = counter;
            }
            counter++;
        }
    }
    catch (e_22_1) { e_22 = { error: e_22_1 }; }
    finally {
        try {
            if (analyticsObjectHeaders_1_1 && !analyticsObjectHeaders_1_1.done && (_a = analyticsObjectHeaders_1.return)) _a.call(analyticsObjectHeaders_1);
        }
        finally { if (e_22) throw e_22.error; }
    }
    return index;
    var e_22, _a;
}
/**
 * @param {?} analyticsObject
 * @param {?} array
 * @param {?} item
 * @return {?}
 */
function calculateColSpan(analyticsObject, array, item) {
    var /** @type {?} */ indexOfItem = array.indexOf(item);
    var /** @type {?} */ array_length = array.length;
    var /** @type {?} */ last_index = array_length - 1;
    var /** @type {?} */ dimensions = { col_span: 1, duplication: 1 };
    for (var /** @type {?} */ i = last_index; i > indexOfItem; i--) {
        var /** @type {?} */ arr = prepareSingleCategories(analyticsObject, array[i]);
        dimensions.col_span = dimensions.col_span * arr.length;
    }
    for (var /** @type {?} */ i = 0; i < indexOfItem; i++) {
        var /** @type {?} */ arr = prepareSingleCategories(analyticsObject, array[i]);
        dimensions.duplication = dimensions.duplication * arr.length;
    }
    return dimensions;
}
/**
 * @param {?} initialAnalytics
 * @param {?} itemIdentifier
 * @param {?=} preDefinedItems
 * @return {?}
 */
function prepareSingleCategories(initialAnalytics, itemIdentifier, preDefinedItems) {
    if (preDefinedItems === void 0) { preDefinedItems = []; }
    var /** @type {?} */ analyticsObject = sanitizeIncomingAnalytics(initialAnalytics);
    var /** @type {?} */ structure = [];
    if (preDefinedItems.length === 0) {
        try {
            for (var _a = __values(getMetadataArray(analyticsObject, itemIdentifier)), _b = _a.next(); !_b.done; _b = _a.next()) {
                var val = _b.value;
                structure.push({
                    name: analyticsObject.metaData.names[val],
                    uid: val,
                    type: itemIdentifier
                });
            }
        }
        catch (e_23_1) { e_23 = { error: e_23_1 }; }
        finally {
            try {
                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
            }
            finally { if (e_23) throw e_23.error; }
        }
    }
    if (preDefinedItems.length !== 0) {
        try {
            for (var preDefinedItems_1 = __values(preDefinedItems), preDefinedItems_1_1 = preDefinedItems_1.next(); !preDefinedItems_1_1.done; preDefinedItems_1_1 = preDefinedItems_1.next()) {
                var val = preDefinedItems_1_1.value;
                structure.push({
                    name: analyticsObject.metaData.names[val],
                    uid: val,
                    type: itemIdentifier
                });
            }
        }
        catch (e_24_1) { e_24 = { error: e_24_1 }; }
        finally {
            try {
                if (preDefinedItems_1_1 && !preDefinedItems_1_1.done && (_d = preDefinedItems_1.return)) _d.call(preDefinedItems_1);
            }
            finally { if (e_24) throw e_24.error; }
        }
    }
    return structure;
    var e_23, _c, e_24, _d;
}
/**
 * @param {?} analyticsObject
 * @return {?}
 */
function sanitizeIncomingAnalytics(analyticsObject) {
    return analyticsObject;
}
/**
 * @param {?} analyticsObject
 * @param {?} metadataType
 * @return {?}
 */
function getMetadataArray(analyticsObject, metadataType) {
    var /** @type {?} */ metadataArray = [];
    if (metadataType === 'dx') {
        metadataArray = analyticsObject.metaData.dx;
    }
    else if (metadataType === 'ou') {
        metadataArray = analyticsObject.metaData.ou;
    }
    else if (metadataType === 'co') {
        metadataArray = analyticsObject.metaData.co;
    }
    else if (metadataType === 'pe') {
        metadataArray = analyticsObject.metaData.pe;
    }
    else {
        metadataArray = analyticsObject.metaData[metadataType];
    }
    return metadataArray;
}
/**
 * @param {?} analyticsObject
 * @param {?=} dataItems
 * @return {?}
 */
function getDataValue(analyticsObject, dataItems) {
    if (dataItems === void 0) { dataItems = []; }
    var /** @type {?} */ num = null;
    try {
        for (var _a = __values(analyticsObject.rows), _b = _a.next(); !_b.done; _b = _a.next()) {
            var value = _b.value;
            var /** @type {?} */ counter = 0;
            try {
                for (var dataItems_1 = __values(dataItems), dataItems_1_1 = dataItems_1.next(); !dataItems_1_1.done; dataItems_1_1 = dataItems_1.next()) {
                    var item = dataItems_1_1.value;
                    if (value[getTitleIndex(analyticsObject.headers, item.type)] === item.value) {
                        counter++;
                    }
                }
            }
            catch (e_25_1) { e_25 = { error: e_25_1 }; }
            finally {
                try {
                    if (dataItems_1_1 && !dataItems_1_1.done && (_c = dataItems_1.return)) _c.call(dataItems_1);
                }
                finally { if (e_25) throw e_25.error; }
            }
            if (counter === dataItems.length) {
                if (isNaN(value[getTitleIndex(analyticsObject.headers, 'value')])) {
                    num = value[getTitleIndex(analyticsObject.headers, 'value')];
                }
                else {
                    num += parseFloat(value[getTitleIndex(analyticsObject.headers, 'value')]);
                }
            }
        }
    }
    catch (e_26_1) { e_26 = { error: e_26_1 }; }
    finally {
        try {
            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
        }
        finally { if (e_26) throw e_26.error; }
    }
    return num;
    var e_26, _d, e_25, _c;
}
/**
 * @param {?} legendClasses
 * @param {?} value
 * @return {?}
 */
function getDataValueColor(legendClasses, value) {
    var /** @type {?} */ color = '';
    if (!isNaN(value) && legendClasses) {
        legendClasses.forEach(function (legendClass) {
            if (legendClass.startValue <= value && legendClass.endValue > value) {
                color = legendClass.color;
            }
            // if (legendClass.startValue < value && legendClass.endValue >= value) {
            // }
        });
    }
    return color;
}
/**
 * @param {?} stating_length
 * @param {?} array
 * @return {?}
 */
function checkZeros(stating_length, array) {
    var /** @type {?} */ checker = true;
    for (var /** @type {?} */ i = stating_length; i < array.length; i++) {
        if (array[i].name === '' && array[i].val != null) {
            checker = false;
        }
    }
    return checker;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var TableListComponent = /** @class */ (function () {
    function TableListComponent() {
        this.tableLayers = [];
    }
    /**
     * @return {?}
     */
    TableListComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.visualizationLayers && this.visualizationLayers.length > 0) {
            this.tableLayers = this.visualizationLayers.map(function (layer) {
                return {
                    tableConfiguration: getTableConfiguration(layer.config || {}, layer.layout, _this.visualizationType),
                    analyticsObject: layer.analytics
                };
            });
        }
    };
    TableListComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'ngx-dhis2-table-list',
                    template: "<div class=\"row\">\n    <div class=\"col-12\" *ngFor=\"let tableLayer of tableLayers\">\n        <ngx-dhis2-table-item [analyticsObject]=\"tableLayer.analyticsObject\" [tableConfiguration]=\"tableLayer.tableConfiguration\">\n        </ngx-dhis2-table-item>\n    </div>\n</div>",
                    styles: [""]
                },] },
    ];
    /** @nocollapse */
    TableListComponent.ctorParameters = function () { return []; };
    TableListComponent.propDecorators = {
        visualizationLayers: [{ type: Input }],
        visualizationType: [{ type: Input }]
    };
    return TableListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var TableItemComponent = /** @class */ (function () {
    function TableItemComponent() {
        this.sort_direction = [];
        this.current_sorting = [];
        this.tableObject = null;
    }
    /**
     * @return {?}
     */
    TableItemComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.analyticsObject && this.tableConfiguration) {
            this.tableObject = drawTable(this.analyticsObject, this.tableConfiguration);
        }
    };
    /**
     * @param {?} tableObject
     * @param {?} n
     * @param {?} isLastItem
     * @return {?}
     */
    TableItemComponent.prototype.sortData = /**
     * @param {?} tableObject
     * @param {?} n
     * @param {?} isLastItem
     * @return {?}
     */
    function (tableObject, n, isLastItem) {
        if (tableObject.columns.length === 1 && isLastItem) {
            this.current_sorting = [];
            this.current_sorting[n] = true;
            var /** @type {?} */ table = void 0, /** @type {?} */
            rows = void 0, /** @type {?} */
            switching = void 0, /** @type {?} */
            i = void 0, /** @type {?} */
            x = void 0, /** @type {?} */
            y = void 0, /** @type {?} */
            shouldSwitch = void 0, /** @type {?} */
            dir = void 0, /** @type {?} */
            switchcount = 0;
            table = document.getElementById('myPivotTable');
            switching = true;
            //  Set the sorting direction to ascending:
            dir = 'asc';
            /*Make a loop that will continue until
                   no switching has been done:*/
            while (switching) {
                //  start by saying: no switching is done:
                switching = false;
                rows = table.getElementsByTagName('TR');
                /*Loop through all table rows (except the
                         first, which contains table headers):*/
                for (i = 0; i < rows.length - 1; i++) {
                    // start by saying there should be no switching:
                    shouldSwitch = false;
                    /*Get the two elements you want to compare,
                               one from current row and one from the next:*/
                    x = rows[i].getElementsByTagName('TD')[n];
                    y = rows[i + 1].getElementsByTagName('TD')[n];
                    /*check if the two rows should switch place,
                               based on the direction, asc or desc:*/
                    if (dir === 'asc') {
                        if (parseFloat(x.innerHTML)) {
                            if (parseFloat(x.innerHTML) > parseFloat(y.innerHTML)) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        else {
                            if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        this.sort_direction[n] = 'asc';
                    }
                    else if (dir === 'desc') {
                        if (parseFloat(x.innerHTML)) {
                            if (parseFloat(x.innerHTML) < parseFloat(y.innerHTML)) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        else {
                            if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        this.sort_direction[n] = 'desc';
                    }
                }
                if (shouldSwitch) {
                    /*If a switch has been marked, make the switch
                               and mark that a switch has been done:*/
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                    // Each time a switch is done, increase this count by 1:
                    switchcount++;
                }
                else {
                    /*If no switching has been done AND the direction is 'asc',
                               set the direction to 'desc' and run the while loop again.*/
                    if (switchcount === 0 && dir === 'asc') {
                        dir = 'desc';
                        this.sort_direction[n] = 'desc';
                        switching = true;
                    }
                }
            }
        }
    };
    TableItemComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'ngx-dhis2-table-item',
                    template: "<div class=\"row\">\n    <div class=\"col-md-12\" *ngIf=\"tableObject\">\n        <h5 style=\"margin-top: 80px\" class=\"text-center\" *ngIf=\"tableObject.rows.length == 0\"> No data to display</h5>\n\n        <div *ngIf=\"tableObject\" style=\"padding: 3px\">\n            <!--<h4 *ngIf=\"tableObject.rows.length != 0\" class=\"text-center\" style=\"margin-bottom: 0px\">{{tableObject?.title}}</h4>-->\n            <table class=\"table table-bordered table-responsive table-condensed custom-table\" *ngIf=\"tableObject.rows.length != 0\">\n                <thead>\n                    <!--title-->\n                    <tr class=\"table-title\">\n                        <th [attr.colspan]=\"tableObject.rows[0].items.length\">\n                            <h4 style=\"margin: 0px\" class=\"text-center\">{{tableObject.subtitle}} </h4>\n                        </th>\n                    </tr>\n                    <!--headers-->\n                    <tr *ngFor=\"let header of tableObject.headers; let j = index\" class=\"header-column\">\n                        <th *ngIf=\"tableObject.hasParentOu\"></th>\n                        <th *ngFor=\"let table_column of tableObject.columns; let i = index\" style=\"text-align: center\">\n                            <span *ngIf=\"i==tableObject.columns.length-1 && j==tableObject.headers.length-1 && tableObject.titlesAvailable\">{{ tableObject.titles.rows[i] }} / {{ tableObject.titles.column[j]}}</span>\n                            <span *ngIf=\"i != tableObject.columns.length-1\">{{ tableObject.titles.rows[i] }}</span>\n                            <span *ngIf=\"j != tableObject.headers.length-1\">{{ tableObject.titles.column[j] }}</span>\n                        </th>\n                        <th *ngFor=\"let header_column of header.items; let i=index\" [colSpan]=\"header_column.span\" style=\"text-align: center\" (click)=\"sortData(tableObject,i+tableObject.columns.length,j+1==tableObject.headers.length)\">\n                            {{ header_column.name }}\n                            <span *ngIf=\"j+1==tableObject.headers.length && current_sorting[i+tableObject.columns.length] && sort_direction[i+tableObject.columns.length] == 'asc'\" class=\"glyphicon glyphicon-triangle-top pull-right\"></span>\n                            <span *ngIf=\"j+1==tableObject.headers.length && current_sorting[i+tableObject.columns.length] && sort_direction[i+tableObject.columns.length] == 'desc'\" class=\"glyphicon glyphicon-triangle-bottom pull-right\"></span>\n                        </th>\n                    </tr>\n                </thead>\n                <tbody id=\"myPivotTable\">\n                    <tr *ngFor=\"let row of tableObject.rows\" [ngClass]=\"{'sub-total': row.sub_total}\">\n                        <td *ngFor=\"let header_column of row.items;let i = index\" [ngClass]=\"{'header-column': header_column.name != ''}\" style=\"text-align: center;vertical-align: middle\" [attr.rowspan]=\"header_column.row_span\" [style.background]=\"header_column.color\">\n                            {{ header_column.val }}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n\n        </div>\n    </div>\n</div>",
                    styles: [".table-item-container{overflow:hidden}.custom-table{display:table;border-style:none!important;width:100%}.custom-table td,.custom-table th{border:thin solid #f1f1f1}.custom-table>tbody>tr>td,.custom-table>thead>tr>th{font-size:13px!important}table tr th{background-color:rgba(238,238,238,.29);padding:4px;text-align:center}table tr td{padding:4px}table tr td:first-child{background-color:rgba(238,238,238,.29)}.table-title{font-size:13px;font-weight:600;text-align:center}"]
                },] },
    ];
    /** @nocollapse */
    TableItemComponent.ctorParameters = function () { return []; };
    TableItemComponent.propDecorators = {
        tableConfiguration: [{ type: Input }],
        analyticsObject: [{ type: Input }]
    };
    return TableItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var NgxDhis2TableModule = /** @class */ (function () {
    function NgxDhis2TableModule() {
    }
    NgxDhis2TableModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule],
                    declarations: [TableListComponent, TableItemComponent],
                    exports: [TableListComponent, TableItemComponent]
                },] },
    ];
    return NgxDhis2TableModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { NgxDhis2TableModule, TableItemComponent as ɵb, TableListComponent as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzcHR6LW5neC1kaGlzMi10YWJsZS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2hlbHBlcnMvZ2V0LXRhYmxlLWNvbmZpZ3VyYXRpb24uaGVscGVyLnRzIiwibmc6Ly9AaGlzcHR6L25neC1kaGlzMi10YWJsZS9saWIvaGVscGVycy9kcmF3LXRhYmxlLmhlbHBlci50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2NvbXBvbmVudHMvdGFibGUtbGlzdC90YWJsZS1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2NvbXBvbmVudHMvdGFibGUtaXRlbS90YWJsZS1pdGVtLmNvbXBvbmVudC50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL25neC1kaGlzMi10YWJsZS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhYmxlQ29uZmlndXJhdGlvbihcbiAgZmF2b3JpdGVPYmplY3Q6IGFueSxcbiAgdmlzdWFsaXphdGlvbkxheW91dDogYW55LFxuICB0eXBlOiBzdHJpbmdcbik6IFRhYmxlQ29uZmlndXJhdGlvbiB7XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdkaXNwbGF5TmFtZScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmRpc3BsYXlOYW1lXG4gICAgICA6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCduYW1lJylcbiAgICAgICAgPyBmYXZvcml0ZU9iamVjdC5uYW1lXG4gICAgICAgIDogJycsXG4gICAgc3VidGl0bGU6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdzdWJ0aXRsZScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnN1YnRpdGxlXG4gICAgICA6ICcnLFxuICAgIHNob3dDb2x1bW5Ub3RhbDogZmF2b3JpdGVPYmplY3QuaGFzT3duUHJvcGVydHkoJ2NvbFRvdGFsJylcbiAgICAgID8gZmF2b3JpdGVPYmplY3QuY29sVG90YWxcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93Q29sdW1uU3VidG90YWw6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdjb2xTdWJ0b3RhbCcpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmNvbFN1YnRvdGFsXG4gICAgICA6IHRydWUsXG4gICAgc2hvd1Jvd1RvdGFsOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgncm93VG90YWwnKVxuICAgICAgPyBmYXZvcml0ZU9iamVjdC5yb3dUb3RhbFxuICAgICAgOiB0cnVlLFxuICAgIHNob3dSb3dTdWJ0b3RhbDogZmF2b3JpdGVPYmplY3QuaGFzT3duUHJvcGVydHkoJ3Jvd1N1YnRvdGFsJylcbiAgICAgID8gZmF2b3JpdGVPYmplY3Qucm93U3VidG90YWxcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93RGltZW5zaW9uTGFiZWxzOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnc2hvd0RpbWVuc2lvbkxhYmVscycpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnNob3dEaW1lbnNpb25MYWJlbHNcbiAgICAgIDogdHJ1ZSxcbiAgICBoaWRlRW1wdHlSb3dzOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmhpZGVFbXB0eVJvd3NcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93SGllcmFyY2h5OiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnc2hvd0hpZXJhcmNoeScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnNob3dIaWVyYXJjaHlcbiAgICAgIDogdHJ1ZSxcbiAgICBkaXNwbGF5TGlzdDogY2hlY2tGb3JFdmVudERhdGFUeXBlKGZhdm9yaXRlT2JqZWN0LCB0eXBlKSxcbiAgICByb3dzOiB2aXN1YWxpemF0aW9uTGF5b3V0LnJvd3MgPyB2aXN1YWxpemF0aW9uTGF5b3V0LnJvd3MgOiBbJ3BlJ10sXG4gICAgY29sdW1uczogdmlzdWFsaXphdGlvbkxheW91dC5jb2x1bW5zID8gdmlzdWFsaXphdGlvbkxheW91dC5jb2x1bW5zIDogWydkeCddLFxuICAgIGxlZ2VuZFNldDogZmF2b3JpdGVPYmplY3QubGVnZW5kU2V0IHx8IG51bGwsXG4gICAgc3R5bGVzOiBudWxsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yRXZlbnREYXRhVHlwZShmYXZvcml0ZU9iamVjdCwgZmF2b3JpdGVUeXBlKTogYm9vbGVhbiB7XG4gIGxldCBkaXNwbGF5TGlzdCA9IGZhbHNlO1xuICBpZiAoZmF2b3JpdGVUeXBlID09PSAnRVZFTlRfUkVQT1JUJykge1xuICAgIGlmIChcbiAgICAgIGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpICYmXG4gICAgICBmYXZvcml0ZU9iamVjdC5kYXRhVHlwZSA9PT0gJ0VWRU5UUydcbiAgICApIHtcbiAgICAgIGRpc3BsYXlMaXN0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpc3BsYXlMaXN0O1xufVxuIiwiaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdUYWJsZShcbiAgYW5hbHl0aWNzT2JqZWN0LFxuICB0YWJsZUNvbmZpZ3VyYXRpb246IFRhYmxlQ29uZmlndXJhdGlvblxuKSB7XG4gIGNvbnN0IGxlZ2VuZENsYXNzZXMgPSB0YWJsZUNvbmZpZ3VyYXRpb24ubGVnZW5kU2V0XG4gICAgPyB0YWJsZUNvbmZpZ3VyYXRpb24ubGVnZW5kU2V0LmxlZ2VuZHNcbiAgICA6IG51bGw7XG5cbiAgY29uc3QgdGFibGUgPSB7XG4gICAgaGVhZGVyczogW10sXG4gICAgY29sdW1uczogW10sXG4gICAgcm93czogW10sXG4gICAgdGl0bGVzOiB7XG4gICAgICByb3dzOiBbXSxcbiAgICAgIGNvbHVtbjogW11cbiAgICB9LFxuICAgIHRpdGxlc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgaGFzUGFyZW50T3U6IGZhbHNlXG4gIH07XG4gIGlmICh0YWJsZUNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkoJ3RpdGxlJykpIHtcbiAgICB0YWJsZVsndGl0bGUnXSA9IHRhYmxlQ29uZmlndXJhdGlvbi50aXRsZTtcbiAgfVxuICBpZiAodGFibGVDb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KCdzdWJ0aXRsZScpKSB7XG4gICAgdGFibGVbJ3N1YnRpdGxlJ10gPSB0YWJsZUNvbmZpZ3VyYXRpb24uc3VidGl0bGU7XG4gIH1cbiAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5kaXNwbGF5TGlzdCkge1xuICAgIHRhYmxlLmhlYWRlcnNbMF0gPSB7XG4gICAgICBpdGVtczogW10sXG4gICAgICBzdHlsZTogJydcbiAgICB9O1xuICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW3RhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zLmluZGV4T2YoJ3BlJyldID1cbiAgICAgICdldmVudGRhdGUnO1xuICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW3RhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zLmluZGV4T2YoJ291JyldID1cbiAgICAgICdvdW5hbWUnO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0YWJsZUNvbmZpZ3VyYXRpb24uY29sdW1ucykge1xuICAgICAgdGFibGUuaGVhZGVyc1swXS5pdGVtcy5wdXNoKHtcbiAgICAgICAgbmFtZTpcbiAgICAgICAgICBhbmFseXRpY3NPYmplY3QuaGVhZGVyc1tnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtKV1cbiAgICAgICAgICAgIC5jb2x1bW4sXG4gICAgICAgIHNwYW46IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYW5hbHl0aWNzT2JqZWN0LnJvd3MpIHtcbiAgICAgIGNvbnN0IGNvbHVtbl9pdGVtcyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBjb2wgb2YgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBjb2wpO1xuICAgICAgICBjb2x1bW5faXRlbXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICByb3dfc3BhbjogJzEnLFxuICAgICAgICAgIC8vIGNvbG9yOmdldENvbG9yKGl0ZW1baW5kZXhdLClcbiAgICAgICAgICB2YWw6IGl0ZW1baW5kZXhdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGFibGUucm93cy5wdXNoKHtcbiAgICAgICAgaGVhZGVyczogW10sXG4gICAgICAgIGl0ZW1zOiBjb2x1bW5faXRlbXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBhZGQgbmFtZXMgdG8gdGl0bGVzIGFycmF5XG4gICAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5zaG93RGltZW5zaW9uTGFiZWxzKSB7XG4gICAgICB0YWJsZS50aXRsZXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zKSB7XG4gICAgICAgIHRhYmxlLnRpdGxlcy5jb2x1bW4ucHVzaChcbiAgICAgICAgICBhbmFseXRpY3NPYmplY3QuaGVhZGVyc1tnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtKV1cbiAgICAgICAgICAgIC5jb2x1bW5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0YWJsZUNvbmZpZ3VyYXRpb24ucm93cykge1xuICAgICAgICB0YWJsZS50aXRsZXMucm93cy5wdXNoKFxuICAgICAgICAgIGFuYWx5dGljc09iamVjdC5oZWFkZXJzW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsIGl0ZW0pXVxuICAgICAgICAgICAgLmNvbHVtblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNvbHVtbkl0ZW0gb2YgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMpIHtcbiAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IGNhbGN1bGF0ZUNvbFNwYW4oXG4gICAgICAgIGFuYWx5dGljc09iamVjdCxcbiAgICAgICAgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMsXG4gICAgICAgIGNvbHVtbkl0ZW1cbiAgICAgICk7XG4gICAgICBjb25zdCBjdXJyZW50Q29sdW1uSXRlbXMgPSBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhcbiAgICAgICAgYW5hbHl0aWNzT2JqZWN0LFxuICAgICAgICBjb2x1bW5JdGVtXG4gICAgICApO1xuICAgICAgY29uc3QgaGVhZGVySXRlbSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW1lbnNpb24uZHVwbGljYXRpb247IGkrKykge1xuICAgICAgICBmb3IgKGNvbnN0IGN1cnJlbnRJdGVtIG9mIGN1cnJlbnRDb2x1bW5JdGVtcykge1xuICAgICAgICAgIGhlYWRlckl0ZW0ucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBjdXJyZW50SXRlbS5uYW1lLFxuICAgICAgICAgICAgc3BhbjogZGltZW5zaW9uLmNvbF9zcGFuLFxuICAgICAgICAgICAgdHlwZTogY3VycmVudEl0ZW0udHlwZSxcbiAgICAgICAgICAgIGlkOiBjdXJyZW50SXRlbS51aWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHN0eWxlcyA9ICcnO1xuICAgICAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnc3R5bGUnKSkge1xuICAgICAgICBpZiAodGFibGVDb25maWd1cmF0aW9uLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShjb2x1bW5JdGVtKSkge1xuICAgICAgICAgIHN0eWxlcyA9IHRhYmxlQ29uZmlndXJhdGlvbi5zdHlsZXNbY29sdW1uSXRlbV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRhYmxlLmhlYWRlcnMucHVzaCh7IGl0ZW1zOiBoZWFkZXJJdGVtLCBzdHlsZTogc3R5bGVzIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJvd0l0ZW0gb2YgdGFibGVDb25maWd1cmF0aW9uLnJvd3MpIHtcbiAgICAgIHRhYmxlLmNvbHVtbnMucHVzaChyb3dJdGVtKTtcbiAgICB9XG5cbiAgICAvLyBQcmVwYXJpbmcgdGFibGUgY29sdW1uc1xuICAgIGNvbnN0IGNvbHVtbl9sZW5ndGggPSB0YWJsZUNvbmZpZ3VyYXRpb24uY29sdW1ucy5sZW5ndGg7XG4gICAgY29uc3QgY29sdW1uX2l0ZW1zX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW5fbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRSb3dJdGVtcyA9IHByZXBhcmVTaW5nbGVDYXRlZ29yaWVzKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW2ldXG4gICAgICApO1xuICAgICAgY29sdW1uX2l0ZW1zX2FycmF5LnB1c2goY3VycmVudFJvd0l0ZW1zKTtcbiAgICB9XG4gICAgbGV0IHRhYmxlX2NvbHVtbnNfYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbl9pdGVtc19hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRhYmxlX2NvbHVtbnNfYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb2x1bW5faXRlbXNfYXJyYXlbaV0pIHtcbiAgICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5LnB1c2goW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGVtcF9hcnIgPSB0YWJsZV9jb2x1bW5zX2FycmF5LmNvbmNhdCgpO1xuICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0ZW1wX2Fycikge1xuICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIGNvbHVtbl9pdGVtc19hcnJheVtpXSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICBjb25zdCB0ZW1wQXJyID0gQXJyYXkuZnJvbShpdGVtKTtcbiAgICAgICAgICAgICAgdGFibGVfY29sdW1uc19hcnJheS5wdXNoKHRlbXBBcnIuY29uY2F0KFt2YWxdKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5LnB1c2goW2l0ZW0sIHZhbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXBhcmluZyB0YWJsZSByb3dzXG4gICAgY29uc3Qgcm93c19sZW5ndGggPSB0YWJsZUNvbmZpZ3VyYXRpb24ucm93cy5sZW5ndGg7XG4gICAgY29uc3Qgcm93X2l0ZW1zX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzX2xlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaW1lbnNpb24gPSBjYWxjdWxhdGVDb2xTcGFuKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLFxuICAgICAgICB0YWJsZUNvbmZpZ3VyYXRpb24ucm93c1tpXVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRSb3dJdGVtcyA9IHByZXBhcmVTaW5nbGVDYXRlZ29yaWVzKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzW2ldXG4gICAgICApO1xuICAgICAgcm93X2l0ZW1zX2FycmF5LnB1c2goeyBpdGVtczogY3VycmVudFJvd0l0ZW1zLCBkaW1lbnNpb25zOiBkaW1lbnNpb24gfSk7XG4gICAgfVxuICAgIGxldCB0YWJsZV9yb3dzX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dfaXRlbXNfYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0YWJsZV9yb3dzX2FycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygcm93X2l0ZW1zX2FycmF5W2ldLml0ZW1zKSB7XG4gICAgICAgICAgaXRlbS5kaW1lbnNpb25zID0gcm93X2l0ZW1zX2FycmF5W2ldLmRpbWVuc2lvbnM7XG4gICAgICAgICAgdGFibGVfcm93c19hcnJheS5wdXNoKFtpdGVtXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRlbXBfYXJyID0gdGFibGVfcm93c19hcnJheS5jb25jYXQoKTtcbiAgICAgICAgdGFibGVfcm93c19hcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGVtcF9hcnIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiByb3dfaXRlbXNfYXJyYXlbaV0uaXRlbXMpIHtcbiAgICAgICAgICAgIHZhbC5kaW1lbnNpb25zID0gcm93X2l0ZW1zX2FycmF5W2ldLmRpbWVuc2lvbnM7XG4gICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRlbXBBcnIgPSBBcnJheS5mcm9tKGl0ZW0pO1xuICAgICAgICAgICAgICB0YWJsZV9yb3dzX2FycmF5LnB1c2godGVtcEFyci5jb25jYXQoW3ZhbF0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRhYmxlX3Jvd3NfYXJyYXkucHVzaChbaXRlbSwgdmFsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGlmICh0YWJsZV9yb3dzX2FycmF5Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgZm9yIChjb25zdCByb3dJdGVtIG9mIHRhYmxlX3Jvd3NfYXJyYXkpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgaGVhZGVyczogcm93SXRlbVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiByb3dJdGVtKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgPT09IDAgfHwgY291bnRlciAlIHZhbC5kaW1lbnNpb25zLmNvbF9zcGFuID09PSAwKSB7XG4gICAgICAgICAgICBpdGVtLml0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiB2YWwudHlwZSxcbiAgICAgICAgICAgICAgbmFtZTogdmFsLnVpZCxcbiAgICAgICAgICAgICAgdmFsOiB2YWwubmFtZSxcbiAgICAgICAgICAgICAgcm93X3NwYW46IHZhbC5kaW1lbnNpb25zLmNvbF9zcGFuLFxuICAgICAgICAgICAgICBoZWFkZXI6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbEl0ZW0gb2YgdGFibGVfY29sdW1uc19hcnJheSkge1xuICAgICAgICAgIGNvbnN0IGRhdGFJdGVtID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCB2YWwgb2Ygcm93SXRlbSkge1xuICAgICAgICAgICAgZGF0YUl0ZW0ucHVzaCh7IHR5cGU6IHZhbC50eXBlLCB2YWx1ZTogdmFsLnVpZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29sSXRlbSkge1xuICAgICAgICAgICAgZGF0YUl0ZW0ucHVzaCh7IHR5cGU6IHZhbC50eXBlLCB2YWx1ZTogdmFsLnVpZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbS5pdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgdmFsOiBnZXREYXRhVmFsdWUoYW5hbHl0aWNzT2JqZWN0LCBkYXRhSXRlbSksXG4gICAgICAgICAgICBjb2xvcjogZ2V0RGF0YVZhbHVlQ29sb3IoXG4gICAgICAgICAgICAgIGxlZ2VuZENsYXNzZXMsXG4gICAgICAgICAgICAgIGdldERhdGFWYWx1ZShhbmFseXRpY3NPYmplY3QsIGRhdGFJdGVtKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHJvd19zcGFuOiAnMScsXG4gICAgICAgICAgICBkaXNwbGF5OiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpICYmXG4gICAgICAgICAgdGFibGVDb25maWd1cmF0aW9uLmhpZGVFbXB0eVJvd3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKCFjaGVja1plcm9zKHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLmxlbmd0aCwgaXRlbS5pdGVtcykpIHtcbiAgICAgICAgICAgIHRhYmxlLnJvd3MucHVzaChpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFibGUucm93cy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnRlcisrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICBpdGVtczogW10sXG4gICAgICAgIGhlYWRlcnM6IFtdXG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBjb2xJdGVtIG9mIHRhYmxlX2NvbHVtbnNfYXJyYXkpIHtcbiAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29sSXRlbSkge1xuICAgICAgICAgIGRhdGFJdGVtLnB1c2goeyB0eXBlOiB2YWwudHlwZSwgdmFsdWU6IHZhbC51aWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlbS5pdGVtcy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICB2YWw6IGdldERhdGFWYWx1ZShhbmFseXRpY3NPYmplY3QsIGRhdGFJdGVtKSxcbiAgICAgICAgICByb3dfc3BhbjogJzEnLFxuICAgICAgICAgIGRpc3BsYXk6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpICYmXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oaWRlRW1wdHlSb3dzXG4gICAgICApIHtcbiAgICAgICAgaWYgKCFjaGVja1plcm9zKHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLmxlbmd0aCwgaXRlbS5pdGVtcykpIHtcbiAgICAgICAgICB0YWJsZS5yb3dzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhYmxlLnJvd3MucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyB0b2RvIGltcHJvdmUgdG90YWwgb3B0aW9ucyB0byBhbHNvIHdvcmsgZm9yIGV2ZW50IHRhYmxlXG4gIC8vIHJldHVybiBfZ2V0U2FuaXRpemVkVGFibGVPYmplY3QodGFibGUsIHRhYmxlQ29uZmlndXJhdGlvbik7XG4gIHJldHVybiB0YWJsZTtcbn1cblxuZnVuY3Rpb24gZ2V0VGl0bGVJbmRleChhbmFseXRpY3NPYmplY3RIZWFkZXJzLCBuYW1lOiBzdHJpbmcpIHtcbiAgbGV0IGluZGV4ID0gMDtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBmb3IgKGNvbnN0IGhlYWRlciBvZiBhbmFseXRpY3NPYmplY3RIZWFkZXJzKSB7XG4gICAgaWYgKGhlYWRlci5uYW1lID09PSBuYW1lKSB7XG4gICAgICBpbmRleCA9IGNvdW50ZXI7XG4gICAgfVxuICAgIGNvdW50ZXIrKztcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvbFNwYW4oYW5hbHl0aWNzT2JqZWN0LCBhcnJheSwgaXRlbSkge1xuICBjb25zdCBpbmRleE9mSXRlbSA9IGFycmF5LmluZGV4T2YoaXRlbSk7XG4gIGNvbnN0IGFycmF5X2xlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgY29uc3QgbGFzdF9pbmRleCA9IGFycmF5X2xlbmd0aCAtIDE7XG4gIGNvbnN0IGRpbWVuc2lvbnMgPSB7IGNvbF9zcGFuOiAxLCBkdXBsaWNhdGlvbjogMSB9O1xuICBmb3IgKGxldCBpID0gbGFzdF9pbmRleDsgaSA+IGluZGV4T2ZJdGVtOyBpLS0pIHtcbiAgICBjb25zdCBhcnIgPSBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhhbmFseXRpY3NPYmplY3QsIGFycmF5W2ldKTtcbiAgICBkaW1lbnNpb25zLmNvbF9zcGFuID0gZGltZW5zaW9ucy5jb2xfc3BhbiAqIGFyci5sZW5ndGg7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleE9mSXRlbTsgaSsrKSB7XG4gICAgY29uc3QgYXJyID0gcHJlcGFyZVNpbmdsZUNhdGVnb3JpZXMoYW5hbHl0aWNzT2JqZWN0LCBhcnJheVtpXSk7XG4gICAgZGltZW5zaW9ucy5kdXBsaWNhdGlvbiA9IGRpbWVuc2lvbnMuZHVwbGljYXRpb24gKiBhcnIubGVuZ3RoO1xuICB9XG4gIHJldHVybiBkaW1lbnNpb25zO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhcbiAgaW5pdGlhbEFuYWx5dGljcyxcbiAgaXRlbUlkZW50aWZpZXIsXG4gIHByZURlZmluZWRJdGVtcyA9IFtdXG4pIHtcbiAgY29uc3QgYW5hbHl0aWNzT2JqZWN0ID0gc2FuaXRpemVJbmNvbWluZ0FuYWx5dGljcyhpbml0aWFsQW5hbHl0aWNzKTtcbiAgY29uc3Qgc3RydWN0dXJlID0gW107XG4gIGlmIChwcmVEZWZpbmVkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChjb25zdCB2YWwgb2YgZ2V0TWV0YWRhdGFBcnJheShhbmFseXRpY3NPYmplY3QsIGl0ZW1JZGVudGlmaWVyKSkge1xuICAgICAgc3RydWN0dXJlLnB1c2goe1xuICAgICAgICBuYW1lOiBhbmFseXRpY3NPYmplY3QubWV0YURhdGEubmFtZXNbdmFsXSxcbiAgICAgICAgdWlkOiB2YWwsXG4gICAgICAgIHR5cGU6IGl0ZW1JZGVudGlmaWVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaWYgKHByZURlZmluZWRJdGVtcy5sZW5ndGggIT09IDApIHtcbiAgICBmb3IgKGNvbnN0IHZhbCBvZiBwcmVEZWZpbmVkSXRlbXMpIHtcbiAgICAgIHN0cnVjdHVyZS5wdXNoKHtcbiAgICAgICAgbmFtZTogYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLm5hbWVzW3ZhbF0sXG4gICAgICAgIHVpZDogdmFsLFxuICAgICAgICB0eXBlOiBpdGVtSWRlbnRpZmllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJ1Y3R1cmU7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplSW5jb21pbmdBbmFseXRpY3MoYW5hbHl0aWNzT2JqZWN0OiBhbnkpIHtcbiAgcmV0dXJuIGFuYWx5dGljc09iamVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0TWV0YWRhdGFBcnJheShhbmFseXRpY3NPYmplY3QsIG1ldGFkYXRhVHlwZTogc3RyaW5nKSB7XG4gIGxldCBtZXRhZGF0YUFycmF5ID0gW107XG4gIGlmIChtZXRhZGF0YVR5cGUgPT09ICdkeCcpIHtcbiAgICBtZXRhZGF0YUFycmF5ID0gYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLmR4O1xuICB9IGVsc2UgaWYgKG1ldGFkYXRhVHlwZSA9PT0gJ291Jykge1xuICAgIG1ldGFkYXRhQXJyYXkgPSBhbmFseXRpY3NPYmplY3QubWV0YURhdGEub3U7XG4gIH0gZWxzZSBpZiAobWV0YWRhdGFUeXBlID09PSAnY28nKSB7XG4gICAgbWV0YWRhdGFBcnJheSA9IGFuYWx5dGljc09iamVjdC5tZXRhRGF0YS5jbztcbiAgfSBlbHNlIGlmIChtZXRhZGF0YVR5cGUgPT09ICdwZScpIHtcbiAgICBtZXRhZGF0YUFycmF5ID0gYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLnBlO1xuICB9IGVsc2Uge1xuICAgIG1ldGFkYXRhQXJyYXkgPSBhbmFseXRpY3NPYmplY3QubWV0YURhdGFbbWV0YWRhdGFUeXBlXTtcbiAgfVxuICByZXR1cm4gbWV0YWRhdGFBcnJheTtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVZhbHVlKGFuYWx5dGljc09iamVjdCwgZGF0YUl0ZW1zID0gW10pIHtcbiAgbGV0IG51bSA9IG51bGw7XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgYW5hbHl0aWNzT2JqZWN0LnJvd3MpIHtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFJdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICB2YWx1ZVtnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtLnR5cGUpXSA9PT0gaXRlbS52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIGNvdW50ZXIrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvdW50ZXIgPT09IGRhdGFJdGVtcy5sZW5ndGgpIHtcbiAgICAgIGlmIChpc05hTih2YWx1ZVtnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCAndmFsdWUnKV0pKSB7XG4gICAgICAgIG51bSA9IHZhbHVlW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsICd2YWx1ZScpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG51bSArPSBwYXJzZUZsb2F0KFxuICAgICAgICAgIHZhbHVlW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsICd2YWx1ZScpXVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhVmFsdWVDb2xvcihsZWdlbmRDbGFzc2VzLCB2YWx1ZSkge1xuICBsZXQgY29sb3IgPSAnJztcbiAgaWYgKCFpc05hTih2YWx1ZSkgJiYgbGVnZW5kQ2xhc3Nlcykge1xuICAgIGxlZ2VuZENsYXNzZXMuZm9yRWFjaChsZWdlbmRDbGFzcyA9PiB7XG4gICAgICBpZiAobGVnZW5kQ2xhc3Muc3RhcnRWYWx1ZSA8PSB2YWx1ZSAmJiBsZWdlbmRDbGFzcy5lbmRWYWx1ZSA+IHZhbHVlKSB7XG4gICAgICAgIGNvbG9yID0gbGVnZW5kQ2xhc3MuY29sb3I7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIChsZWdlbmRDbGFzcy5zdGFydFZhbHVlIDwgdmFsdWUgJiYgbGVnZW5kQ2xhc3MuZW5kVmFsdWUgPj0gdmFsdWUpIHtcbiAgICAgIFxuICAgICAgLy8gfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuZnVuY3Rpb24gY2hlY2taZXJvcyhzdGF0aW5nX2xlbmd0aCwgYXJyYXkpOiBib29sZWFuIHtcbiAgbGV0IGNoZWNrZXIgPSB0cnVlO1xuICBmb3IgKGxldCBpID0gc3RhdGluZ19sZW5ndGg7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJheVtpXS5uYW1lID09PSAnJyAmJiBhcnJheVtpXS52YWwgIT0gbnVsbCkge1xuICAgICAgY2hlY2tlciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hlY2tlcjtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuXG5pbXBvcnQgeyBnZXRUYWJsZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9oZWxwZXJzL2luZGV4JztcbkBDb21wb25lbnQoe1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXG4gIHNlbGVjdG9yOiAnbmd4LWRoaXMyLXRhYmxlLWxpc3QnLFxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sLTEyXCIgKm5nRm9yPVwibGV0IHRhYmxlTGF5ZXIgb2YgdGFibGVMYXllcnNcIj5cbiAgICAgICAgPG5neC1kaGlzMi10YWJsZS1pdGVtIFthbmFseXRpY3NPYmplY3RdPVwidGFibGVMYXllci5hbmFseXRpY3NPYmplY3RcIiBbdGFibGVDb25maWd1cmF0aW9uXT1cInRhYmxlTGF5ZXIudGFibGVDb25maWd1cmF0aW9uXCI+XG4gICAgICAgIDwvbmd4LWRoaXMyLXRhYmxlLWl0ZW0+XG4gICAgPC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgYF1cbn0pXG5leHBvcnQgY2xhc3MgVGFibGVMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgdmlzdWFsaXphdGlvbkxheWVyczogYW55W107XG4gIEBJbnB1dCgpIHZpc3VhbGl6YXRpb25UeXBlOiBzdHJpbmc7XG4gIHRhYmxlTGF5ZXJzOiBBcnJheTx7XG4gICAgdGFibGVDb25maWd1cmF0aW9uOiBUYWJsZUNvbmZpZ3VyYXRpb247XG4gICAgYW5hbHl0aWNzT2JqZWN0OiBhbnk7XG4gIH0+ID0gW107XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAodGhpcy52aXN1YWxpemF0aW9uTGF5ZXJzICYmIHRoaXMudmlzdWFsaXphdGlvbkxheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnRhYmxlTGF5ZXJzID0gdGhpcy52aXN1YWxpemF0aW9uTGF5ZXJzLm1hcCgobGF5ZXI6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbjogZ2V0VGFibGVDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgbGF5ZXIuY29uZmlnIHx8IHt9LFxuICAgICAgICAgICAgbGF5ZXIubGF5b3V0LFxuICAgICAgICAgICAgdGhpcy52aXN1YWxpemF0aW9uVHlwZVxuICAgICAgICAgICksXG4gICAgICAgICAgYW5hbHl0aWNzT2JqZWN0OiBsYXllci5hbmFseXRpY3NcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWJsZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9tb2RlbHMvdGFibGUtY29uZmlndXJhdGlvbic7XG5cbmltcG9ydCB7IGRyYXdUYWJsZSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvaW5kZXgnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ25neC1kaGlzMi10YWJsZS1pdGVtJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMlwiICpuZ0lmPVwidGFibGVPYmplY3RcIj5cbiAgICAgICAgPGg1IHN0eWxlPVwibWFyZ2luLXRvcDogODBweFwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIiAqbmdJZj1cInRhYmxlT2JqZWN0LnJvd3MubGVuZ3RoID09IDBcIj4gTm8gZGF0YSB0byBkaXNwbGF5PC9oNT5cblxuICAgICAgICA8ZGl2ICpuZ0lmPVwidGFibGVPYmplY3RcIiBzdHlsZT1cInBhZGRpbmc6IDNweFwiPlxuICAgICAgICAgICAgPCEtLTxoNCAqbmdJZj1cInRhYmxlT2JqZWN0LnJvd3MubGVuZ3RoICE9IDBcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAwcHhcIj57e3RhYmxlT2JqZWN0Py50aXRsZX19PC9oND4tLT5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkIHRhYmxlLXJlc3BvbnNpdmUgdGFibGUtY29uZGVuc2VkIGN1c3RvbS10YWJsZVwiICpuZ0lmPVwidGFibGVPYmplY3Qucm93cy5sZW5ndGggIT0gMFwiPlxuICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPCEtLXRpdGxlLS0+XG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInRhYmxlLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggW2F0dHIuY29sc3Bhbl09XCJ0YWJsZU9iamVjdC5yb3dzWzBdLml0ZW1zLmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBzdHlsZT1cIm1hcmdpbjogMHB4XCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPnt7dGFibGVPYmplY3Quc3VidGl0bGV9fSA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLWhlYWRlcnMtLT5cbiAgICAgICAgICAgICAgICAgICAgPHRyICpuZ0Zvcj1cImxldCBoZWFkZXIgb2YgdGFibGVPYmplY3QuaGVhZGVyczsgbGV0IGogPSBpbmRleFwiIGNsYXNzPVwiaGVhZGVyLWNvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0lmPVwidGFibGVPYmplY3QuaGFzUGFyZW50T3VcIj48L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0Zvcj1cImxldCB0YWJsZV9jb2x1bW4gb2YgdGFibGVPYmplY3QuY29sdW1uczsgbGV0IGkgPSBpbmRleFwiIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpPT10YWJsZU9iamVjdC5jb2x1bW5zLmxlbmd0aC0xICYmIGo9PXRhYmxlT2JqZWN0LmhlYWRlcnMubGVuZ3RoLTEgJiYgdGFibGVPYmplY3QudGl0bGVzQXZhaWxhYmxlXCI+e3sgdGFibGVPYmplY3QudGl0bGVzLnJvd3NbaV0gfX0gLyB7eyB0YWJsZU9iamVjdC50aXRsZXMuY29sdW1uW2pdfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpICE9IHRhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoLTFcIj57eyB0YWJsZU9iamVjdC50aXRsZXMucm93c1tpXSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImogIT0gdGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGgtMVwiPnt7IHRhYmxlT2JqZWN0LnRpdGxlcy5jb2x1bW5bal0gfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0Zvcj1cImxldCBoZWFkZXJfY29sdW1uIG9mIGhlYWRlci5pdGVtczsgbGV0IGk9aW5kZXhcIiBbY29sU3Bhbl09XCJoZWFkZXJfY29sdW1uLnNwYW5cIiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlclwiIChjbGljayk9XCJzb3J0RGF0YSh0YWJsZU9iamVjdCxpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoLGorMT09dGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGgpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgaGVhZGVyX2NvbHVtbi5uYW1lIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJqKzE9PXRhYmxlT2JqZWN0LmhlYWRlcnMubGVuZ3RoICYmIGN1cnJlbnRfc29ydGluZ1tpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoXSAmJiBzb3J0X2RpcmVjdGlvbltpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoXSA9PSAnYXNjJ1wiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmlhbmdsZS10b3AgcHVsbC1yaWdodFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImorMT09dGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGggJiYgY3VycmVudF9zb3J0aW5nW2krdGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGhdICYmIHNvcnRfZGlyZWN0aW9uW2krdGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGhdID09ICdkZXNjJ1wiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmlhbmdsZS1ib3R0b20gcHVsbC1yaWdodFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9XCJteVBpdm90VGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRyICpuZ0Zvcj1cImxldCByb3cgb2YgdGFibGVPYmplY3Qucm93c1wiIFtuZ0NsYXNzXT1cInsnc3ViLXRvdGFsJzogcm93LnN1Yl90b3RhbH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdGb3I9XCJsZXQgaGVhZGVyX2NvbHVtbiBvZiByb3cuaXRlbXM7bGV0IGkgPSBpbmRleFwiIFtuZ0NsYXNzXT1cInsnaGVhZGVyLWNvbHVtbic6IGhlYWRlcl9jb2x1bW4ubmFtZSAhPSAnJ31cIiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCIgW2F0dHIucm93c3Bhbl09XCJoZWFkZXJfY29sdW1uLnJvd19zcGFuXCIgW3N0eWxlLmJhY2tncm91bmRdPVwiaGVhZGVyX2NvbHVtbi5jb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGhlYWRlcl9jb2x1bW4udmFsIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuXG5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgLnRhYmxlLWl0ZW0tY29udGFpbmVye292ZXJmbG93OmhpZGRlbn0uY3VzdG9tLXRhYmxle2Rpc3BsYXk6dGFibGU7Ym9yZGVyLXN0eWxlOm5vbmUhaW1wb3J0YW50O3dpZHRoOjEwMCV9LmN1c3RvbS10YWJsZSB0ZCwuY3VzdG9tLXRhYmxlIHRoe2JvcmRlcjp0aGluIHNvbGlkICNmMWYxZjF9LmN1c3RvbS10YWJsZT50Ym9keT50cj50ZCwuY3VzdG9tLXRhYmxlPnRoZWFkPnRyPnRoe2ZvbnQtc2l6ZToxM3B4IWltcG9ydGFudH10YWJsZSB0ciB0aHtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjM4LDIzOCwyMzgsLjI5KTtwYWRkaW5nOjRweDt0ZXh0LWFsaWduOmNlbnRlcn10YWJsZSB0ciB0ZHtwYWRkaW5nOjRweH10YWJsZSB0ciB0ZDpmaXJzdC1jaGlsZHtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjM4LDIzOCwyMzgsLjI5KX0udGFibGUtdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO3RleHQtYWxpZ246Y2VudGVyfWBdXG59KVxuZXhwb3J0IGNsYXNzIFRhYmxlSXRlbUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIHRhYmxlQ29uZmlndXJhdGlvbjogVGFibGVDb25maWd1cmF0aW9uO1xuICBASW5wdXQoKSBhbmFseXRpY3NPYmplY3Q6IGFueTtcbiAgdGFibGVPYmplY3Q6IGFueTtcbiAgc29ydF9kaXJlY3Rpb246IHN0cmluZ1tdID0gW107XG4gIGN1cnJlbnRfc29ydGluZzogYm9vbGVhbltdID0gW107XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGFibGVPYmplY3QgPSBudWxsO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuYW5hbHl0aWNzT2JqZWN0ICYmIHRoaXMudGFibGVDb25maWd1cmF0aW9uKSB7XG4gICAgICB0aGlzLnRhYmxlT2JqZWN0ID0gZHJhd1RhYmxlKFxuICAgICAgICB0aGlzLmFuYWx5dGljc09iamVjdCxcbiAgICAgICAgdGhpcy50YWJsZUNvbmZpZ3VyYXRpb25cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc29ydERhdGEodGFibGVPYmplY3QsIG4sIGlzTGFzdEl0ZW0pIHtcbiAgICBpZiAodGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGggPT09IDEgJiYgaXNMYXN0SXRlbSkge1xuICAgICAgdGhpcy5jdXJyZW50X3NvcnRpbmcgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudF9zb3J0aW5nW25dID0gdHJ1ZTtcbiAgICAgIGxldCB0YWJsZSxcbiAgICAgICAgcm93cyxcbiAgICAgICAgc3dpdGNoaW5nLFxuICAgICAgICBpLFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBzaG91bGRTd2l0Y2gsXG4gICAgICAgIGRpcixcbiAgICAgICAgc3dpdGNoY291bnQgPSAwO1xuICAgICAgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlQaXZvdFRhYmxlJyk7XG4gICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuICAgICAgLy8gIFNldCB0aGUgc29ydGluZyBkaXJlY3Rpb24gdG8gYXNjZW5kaW5nOlxuICAgICAgZGlyID0gJ2FzYyc7XG4gICAgICAvKk1ha2UgYSBsb29wIHRoYXQgd2lsbCBjb250aW51ZSB1bnRpbFxuICAgICAgIG5vIHN3aXRjaGluZyBoYXMgYmVlbiBkb25lOiovXG4gICAgICB3aGlsZSAoc3dpdGNoaW5nKSB7XG4gICAgICAgIC8vICBzdGFydCBieSBzYXlpbmc6IG5vIHN3aXRjaGluZyBpcyBkb25lOlxuICAgICAgICBzd2l0Y2hpbmcgPSBmYWxzZTtcbiAgICAgICAgcm93cyA9IHRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdUUicpO1xuICAgICAgICAvKkxvb3AgdGhyb3VnaCBhbGwgdGFibGUgcm93cyAoZXhjZXB0IHRoZVxuICAgICAgICAgZmlyc3QsIHdoaWNoIGNvbnRhaW5zIHRhYmxlIGhlYWRlcnMpOiovXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCByb3dzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgIC8vIHN0YXJ0IGJ5IHNheWluZyB0aGVyZSBzaG91bGQgYmUgbm8gc3dpdGNoaW5nOlxuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IGZhbHNlO1xuICAgICAgICAgIC8qR2V0IHRoZSB0d28gZWxlbWVudHMgeW91IHdhbnQgdG8gY29tcGFyZSxcbiAgICAgICAgICAgb25lIGZyb20gY3VycmVudCByb3cgYW5kIG9uZSBmcm9tIHRoZSBuZXh0OiovXG4gICAgICAgICAgeCA9IHJvd3NbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1REJylbbl07XG4gICAgICAgICAgeSA9IHJvd3NbaSArIDFdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdURCcpW25dO1xuICAgICAgICAgIC8qY2hlY2sgaWYgdGhlIHR3byByb3dzIHNob3VsZCBzd2l0Y2ggcGxhY2UsXG4gICAgICAgICAgIGJhc2VkIG9uIHRoZSBkaXJlY3Rpb24sIGFzYyBvciBkZXNjOiovXG4gICAgICAgICAgaWYgKGRpciA9PT0gJ2FzYycpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHguaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh4LmlubmVySFRNTCkgPiBwYXJzZUZsb2F0KHkuaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHNvLCBtYXJrIGFzIGEgc3dpdGNoIGFuZCBicmVhayB0aGUgbG9vcDpcbiAgICAgICAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA+IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBzbywgbWFyayBhcyBhIHN3aXRjaCBhbmQgYnJlYWsgdGhlIGxvb3A6XG4gICAgICAgICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdhc2MnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGlyID09PSAnZGVzYycpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHguaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh4LmlubmVySFRNTCkgPCBwYXJzZUZsb2F0KHkuaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHNvLCBtYXJrIGFzIGEgc3dpdGNoIGFuZCBicmVhayB0aGUgbG9vcDpcbiAgICAgICAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA8IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBzbywgbWFyayBhcyBhIHN3aXRjaCBhbmQgYnJlYWsgdGhlIGxvb3A6XG4gICAgICAgICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdkZXNjJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFN3aXRjaCkge1xuICAgICAgICAgIC8qSWYgYSBzd2l0Y2ggaGFzIGJlZW4gbWFya2VkLCBtYWtlIHRoZSBzd2l0Y2hcbiAgICAgICAgICAgYW5kIG1hcmsgdGhhdCBhIHN3aXRjaCBoYXMgYmVlbiBkb25lOiovXG4gICAgICAgICAgcm93c1tpXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyb3dzW2kgKyAxXSwgcm93c1tpXSk7XG4gICAgICAgICAgc3dpdGNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAvLyBFYWNoIHRpbWUgYSBzd2l0Y2ggaXMgZG9uZSwgaW5jcmVhc2UgdGhpcyBjb3VudCBieSAxOlxuICAgICAgICAgIHN3aXRjaGNvdW50Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLypJZiBubyBzd2l0Y2hpbmcgaGFzIGJlZW4gZG9uZSBBTkQgdGhlIGRpcmVjdGlvbiBpcyAnYXNjJyxcbiAgICAgICAgICAgc2V0IHRoZSBkaXJlY3Rpb24gdG8gJ2Rlc2MnIGFuZCBydW4gdGhlIHdoaWxlIGxvb3AgYWdhaW4uKi9cbiAgICAgICAgICBpZiAoc3dpdGNoY291bnQgPT09IDAgJiYgZGlyID09PSAnYXNjJykge1xuICAgICAgICAgICAgZGlyID0gJ2Rlc2MnO1xuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdkZXNjJztcbiAgICAgICAgICAgIHN3aXRjaGluZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFibGVMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3RhYmxlLWxpc3QvdGFibGUtbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGFibGVJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3RhYmxlLWl0ZW0vdGFibGUtaXRlbS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1RhYmxlTGlzdENvbXBvbmVudCwgVGFibGVJdGVtQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW1RhYmxlTGlzdENvbXBvbmVudCwgVGFibGVJdGVtQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hEaGlzMlRhYmxlTW9kdWxlIHt9XG4iXSwibmFtZXMiOlsidHNsaWJfMS5fX3ZhbHVlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDQSwrQkFDRSxjQUFtQixFQUNuQixtQkFBd0IsRUFDeEIsSUFBWTtJQUVaLE9BQU87UUFDTCxLQUFLLEVBQUUsY0FBYyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUM7Y0FDL0MsY0FBYyxDQUFDLFdBQVc7Y0FDMUIsY0FBYyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7a0JBQ25DLGNBQWMsQ0FBQyxJQUFJO2tCQUNuQixFQUFFO1FBQ1IsUUFBUSxFQUFFLGNBQWMsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDO2NBQy9DLGNBQWMsQ0FBQyxRQUFRO2NBQ3ZCLEVBQUU7UUFDTixlQUFlLEVBQUUsY0FBYyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUM7Y0FDdEQsY0FBYyxDQUFDLFFBQVE7Y0FDdkIsSUFBSTtRQUNSLGtCQUFrQixFQUFFLGNBQWMsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDO2NBQzVELGNBQWMsQ0FBQyxXQUFXO2NBQzFCLElBQUk7UUFDUixZQUFZLEVBQUUsY0FBYyxD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
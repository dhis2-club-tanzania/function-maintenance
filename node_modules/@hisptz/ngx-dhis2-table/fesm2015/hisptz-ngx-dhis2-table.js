import { Component, Input, NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * @param {?} favoriteObject
 * @param {?} visualizationLayout
 * @param {?} type
 * @return {?}
 */
function getTableConfiguration(favoriteObject, visualizationLayout, type) {
    return {
        title: favoriteObject.hasOwnProperty('displayName')
            ? favoriteObject.displayName
            : favoriteObject.hasOwnProperty('name')
                ? favoriteObject.name
                : '',
        subtitle: favoriteObject.hasOwnProperty('subtitle')
            ? favoriteObject.subtitle
            : '',
        showColumnTotal: favoriteObject.hasOwnProperty('colTotal')
            ? favoriteObject.colTotal
            : true,
        showColumnSubtotal: favoriteObject.hasOwnProperty('colSubtotal')
            ? favoriteObject.colSubtotal
            : true,
        showRowTotal: favoriteObject.hasOwnProperty('rowTotal')
            ? favoriteObject.rowTotal
            : true,
        showRowSubtotal: favoriteObject.hasOwnProperty('rowSubtotal')
            ? favoriteObject.rowSubtotal
            : true,
        showDimensionLabels: favoriteObject.hasOwnProperty('showDimensionLabels')
            ? favoriteObject.showDimensionLabels
            : true,
        hideEmptyRows: favoriteObject.hasOwnProperty('hideEmptyRows')
            ? favoriteObject.hideEmptyRows
            : true,
        showHierarchy: favoriteObject.hasOwnProperty('showHierarchy')
            ? favoriteObject.showHierarchy
            : true,
        displayList: checkForEventDataType(favoriteObject, type),
        rows: visualizationLayout.rows ? visualizationLayout.rows : ['pe'],
        columns: visualizationLayout.columns ? visualizationLayout.columns : ['dx'],
        legendSet: favoriteObject.legendSet || null,
        styles: null
    };
}
/**
 * @param {?} favoriteObject
 * @param {?} favoriteType
 * @return {?}
 */
function checkForEventDataType(favoriteObject, favoriteType) {
    let /** @type {?} */ displayList = false;
    if (favoriteType === 'EVENT_REPORT') {
        if (favoriteObject.hasOwnProperty('dataType') &&
            favoriteObject.dataType === 'EVENTS') {
            displayList = true;
        }
    }
    return displayList;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * @param {?} analyticsObject
 * @param {?} tableConfiguration
 * @return {?}
 */
function drawTable(analyticsObject, tableConfiguration) {
    const /** @type {?} */ legendClasses = tableConfiguration.legendSet
        ? tableConfiguration.legendSet.legends
        : null;
    const /** @type {?} */ table = {
        headers: [],
        columns: [],
        rows: [],
        titles: {
            rows: [],
            column: []
        },
        titlesAvailable: false,
        hasParentOu: false
    };
    if (tableConfiguration.hasOwnProperty('title')) {
        table['title'] = tableConfiguration.title;
    }
    if (tableConfiguration.hasOwnProperty('subtitle')) {
        table['subtitle'] = tableConfiguration.subtitle;
    }
    if (tableConfiguration.displayList) {
        table.headers[0] = {
            items: [],
            style: ''
        };
        tableConfiguration.columns[tableConfiguration.columns.indexOf('pe')] =
            'eventdate';
        tableConfiguration.columns[tableConfiguration.columns.indexOf('ou')] =
            'ouname';
        for (const /** @type {?} */ item of tableConfiguration.columns) {
            table.headers[0].items.push({
                name: analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                    .column,
                span: 1
            });
        }
        for (const /** @type {?} */ item of analyticsObject.rows) {
            const /** @type {?} */ column_items = [];
            for (const /** @type {?} */ col of tableConfiguration.columns) {
                const /** @type {?} */ index = getTitleIndex(analyticsObject.headers, col);
                column_items.push({
                    name: '',
                    display: true,
                    row_span: '1',
                    // color:getColor(item[index],)
                    val: item[index]
                });
            }
            table.rows.push({
                headers: [],
                items: column_items
            });
        }
    }
    else {
        // add names to titles array
        if (tableConfiguration.showDimensionLabels) {
            table.titlesAvailable = true;
            for (const /** @type {?} */ item of tableConfiguration.columns) {
                table.titles.column.push(analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                    .column);
            }
            for (const /** @type {?} */ item of tableConfiguration.rows) {
                table.titles.rows.push(analyticsObject.headers[getTitleIndex(analyticsObject.headers, item)]
                    .column);
            }
        }
        for (const /** @type {?} */ columnItem of tableConfiguration.columns) {
            const /** @type {?} */ dimension = calculateColSpan(analyticsObject, tableConfiguration.columns, columnItem);
            const /** @type {?} */ currentColumnItems = prepareSingleCategories(analyticsObject, columnItem);
            const /** @type {?} */ headerItem = [];
            for (let /** @type {?} */ i = 0; i < dimension.duplication; i++) {
                for (const /** @type {?} */ currentItem of currentColumnItems) {
                    headerItem.push({
                        name: currentItem.name,
                        span: dimension.col_span,
                        type: currentItem.type,
                        id: currentItem.uid
                    });
                }
            }
            let /** @type {?} */ styles = '';
            if (tableConfiguration.hasOwnProperty('style')) {
                if (tableConfiguration.styles.hasOwnProperty(columnItem)) {
                    styles = tableConfiguration.styles[columnItem];
                }
            }
            table.headers.push({ items: headerItem, style: styles });
        }
        for (const /** @type {?} */ rowItem of tableConfiguration.rows) {
            table.columns.push(rowItem);
        }
        // Preparing table columns
        const /** @type {?} */ column_length = tableConfiguration.columns.length;
        const /** @type {?} */ column_items_array = [];
        for (let /** @type {?} */ i = 0; i < column_length; i++) {
            const /** @type {?} */ currentRowItems = prepareSingleCategories(analyticsObject, tableConfiguration.columns[i]);
            column_items_array.push(currentRowItems);
        }
        let /** @type {?} */ table_columns_array = [];
        for (let /** @type {?} */ i = 0; i < column_items_array.length; i++) {
            if (table_columns_array.length === 0) {
                for (const /** @type {?} */ item of column_items_array[i]) {
                    table_columns_array.push([item]);
                }
            }
            else {
                const /** @type {?} */ temp_arr = table_columns_array.concat();
                table_columns_array = [];
                for (const /** @type {?} */ item of temp_arr) {
                    for (const /** @type {?} */ val of column_items_array[i]) {
                        if (item instanceof Array) {
                            const /** @type {?} */ tempArr = Array.from(item);
                            table_columns_array.push(tempArr.concat([val]));
                        }
                        else {
                            table_columns_array.push([item, val]);
                        }
                    }
                }
            }
        }
        // Preparing table rows
        const /** @type {?} */ rows_length = tableConfiguration.rows.length;
        const /** @type {?} */ row_items_array = [];
        for (let /** @type {?} */ i = 0; i < rows_length; i++) {
            const /** @type {?} */ dimension = calculateColSpan(analyticsObject, tableConfiguration.rows, tableConfiguration.rows[i]);
            const /** @type {?} */ currentRowItems = prepareSingleCategories(analyticsObject, tableConfiguration.rows[i]);
            row_items_array.push({ items: currentRowItems, dimensions: dimension });
        }
        let /** @type {?} */ table_rows_array = [];
        for (let /** @type {?} */ i = 0; i < row_items_array.length; i++) {
            if (table_rows_array.length === 0) {
                for (const /** @type {?} */ item of row_items_array[i].items) {
                    item.dimensions = row_items_array[i].dimensions;
                    table_rows_array.push([item]);
                }
            }
            else {
                const /** @type {?} */ temp_arr = table_rows_array.concat();
                table_rows_array = [];
                for (const /** @type {?} */ item of temp_arr) {
                    for (const /** @type {?} */ val of row_items_array[i].items) {
                        val.dimensions = row_items_array[i].dimensions;
                        if (item instanceof Array) {
                            const /** @type {?} */ tempArr = Array.from(item);
                            table_rows_array.push(tempArr.concat([val]));
                        }
                        else {
                            table_rows_array.push([item, val]);
                        }
                    }
                }
            }
        }
        let /** @type {?} */ counter = 0;
        if (table_rows_array.length !== 0) {
            for (const /** @type {?} */ rowItem of table_rows_array) {
                const /** @type {?} */ item = {
                    items: [],
                    headers: rowItem
                };
                for (const /** @type {?} */ val of rowItem) {
                    if (counter === 0 || counter % val.dimensions.col_span === 0) {
                        item.items.push({
                            type: val.type,
                            name: val.uid,
                            val: val.name,
                            row_span: val.dimensions.col_span,
                            header: true
                        });
                    }
                }
                for (const /** @type {?} */ colItem of table_columns_array) {
                    const /** @type {?} */ dataItem = [];
                    for (const /** @type {?} */ val of rowItem) {
                        dataItem.push({ type: val.type, value: val.uid });
                    }
                    for (const /** @type {?} */ val of colItem) {
                        dataItem.push({ type: val.type, value: val.uid });
                    }
                    item.items.push({
                        name: '',
                        val: getDataValue(analyticsObject, dataItem),
                        color: getDataValueColor(legendClasses, getDataValue(analyticsObject, dataItem)),
                        row_span: '1',
                        display: true
                    });
                }
                if (tableConfiguration.hasOwnProperty('hideEmptyRows') &&
                    tableConfiguration.hideEmptyRows) {
                    if (!checkZeros(tableConfiguration.rows.length, item.items)) {
                        table.rows.push(item);
                    }
                }
                else {
                    table.rows.push(item);
                }
                counter++;
            }
        }
        else {
            const /** @type {?} */ item = {
                items: [],
                headers: []
            };
            for (const /** @type {?} */ colItem of table_columns_array) {
                const /** @type {?} */ dataItem = [];
                for (const /** @type {?} */ val of colItem) {
                    dataItem.push({ type: val.type, value: val.uid });
                }
                item.items.push({
                    name: '',
                    val: getDataValue(analyticsObject, dataItem),
                    row_span: '1',
                    display: true
                });
            }
            if (tableConfiguration.hasOwnProperty('hideEmptyRows') &&
                tableConfiguration.hideEmptyRows) {
                if (!checkZeros(tableConfiguration.rows.length, item.items)) {
                    table.rows.push(item);
                }
            }
            else {
                table.rows.push(item);
            }
        }
    }
    // todo improve total options to also work for event table
    // return _getSanitizedTableObject(table, tableConfiguration);
    return table;
}
/**
 * @param {?} analyticsObjectHeaders
 * @param {?} name
 * @return {?}
 */
function getTitleIndex(analyticsObjectHeaders, name) {
    let /** @type {?} */ index = 0;
    let /** @type {?} */ counter = 0;
    for (const /** @type {?} */ header of analyticsObjectHeaders) {
        if (header.name === name) {
            index = counter;
        }
        counter++;
    }
    return index;
}
/**
 * @param {?} analyticsObject
 * @param {?} array
 * @param {?} item
 * @return {?}
 */
function calculateColSpan(analyticsObject, array, item) {
    const /** @type {?} */ indexOfItem = array.indexOf(item);
    const /** @type {?} */ array_length = array.length;
    const /** @type {?} */ last_index = array_length - 1;
    const /** @type {?} */ dimensions = { col_span: 1, duplication: 1 };
    for (let /** @type {?} */ i = last_index; i > indexOfItem; i--) {
        const /** @type {?} */ arr = prepareSingleCategories(analyticsObject, array[i]);
        dimensions.col_span = dimensions.col_span * arr.length;
    }
    for (let /** @type {?} */ i = 0; i < indexOfItem; i++) {
        const /** @type {?} */ arr = prepareSingleCategories(analyticsObject, array[i]);
        dimensions.duplication = dimensions.duplication * arr.length;
    }
    return dimensions;
}
/**
 * @param {?} initialAnalytics
 * @param {?} itemIdentifier
 * @param {?=} preDefinedItems
 * @return {?}
 */
function prepareSingleCategories(initialAnalytics, itemIdentifier, preDefinedItems = []) {
    const /** @type {?} */ analyticsObject = sanitizeIncomingAnalytics(initialAnalytics);
    const /** @type {?} */ structure = [];
    if (preDefinedItems.length === 0) {
        for (const /** @type {?} */ val of getMetadataArray(analyticsObject, itemIdentifier)) {
            structure.push({
                name: analyticsObject.metaData.names[val],
                uid: val,
                type: itemIdentifier
            });
        }
    }
    if (preDefinedItems.length !== 0) {
        for (const /** @type {?} */ val of preDefinedItems) {
            structure.push({
                name: analyticsObject.metaData.names[val],
                uid: val,
                type: itemIdentifier
            });
        }
    }
    return structure;
}
/**
 * @param {?} analyticsObject
 * @return {?}
 */
function sanitizeIncomingAnalytics(analyticsObject) {
    return analyticsObject;
}
/**
 * @param {?} analyticsObject
 * @param {?} metadataType
 * @return {?}
 */
function getMetadataArray(analyticsObject, metadataType) {
    let /** @type {?} */ metadataArray = [];
    if (metadataType === 'dx') {
        metadataArray = analyticsObject.metaData.dx;
    }
    else if (metadataType === 'ou') {
        metadataArray = analyticsObject.metaData.ou;
    }
    else if (metadataType === 'co') {
        metadataArray = analyticsObject.metaData.co;
    }
    else if (metadataType === 'pe') {
        metadataArray = analyticsObject.metaData.pe;
    }
    else {
        metadataArray = analyticsObject.metaData[metadataType];
    }
    return metadataArray;
}
/**
 * @param {?} analyticsObject
 * @param {?=} dataItems
 * @return {?}
 */
function getDataValue(analyticsObject, dataItems = []) {
    let /** @type {?} */ num = null;
    for (const /** @type {?} */ value of analyticsObject.rows) {
        let /** @type {?} */ counter = 0;
        for (const /** @type {?} */ item of dataItems) {
            if (value[getTitleIndex(analyticsObject.headers, item.type)] === item.value) {
                counter++;
            }
        }
        if (counter === dataItems.length) {
            if (isNaN(value[getTitleIndex(analyticsObject.headers, 'value')])) {
                num = value[getTitleIndex(analyticsObject.headers, 'value')];
            }
            else {
                num += parseFloat(value[getTitleIndex(analyticsObject.headers, 'value')]);
            }
        }
    }
    return num;
}
/**
 * @param {?} legendClasses
 * @param {?} value
 * @return {?}
 */
function getDataValueColor(legendClasses, value) {
    let /** @type {?} */ color = '';
    if (!isNaN(value) && legendClasses) {
        legendClasses.forEach(legendClass => {
            if (legendClass.startValue <= value && legendClass.endValue > value) {
                color = legendClass.color;
            }
            // if (legendClass.startValue < value && legendClass.endValue >= value) {
            // }
        });
    }
    return color;
}
/**
 * @param {?} stating_length
 * @param {?} array
 * @return {?}
 */
function checkZeros(stating_length, array) {
    let /** @type {?} */ checker = true;
    for (let /** @type {?} */ i = stating_length; i < array.length; i++) {
        if (array[i].name === '' && array[i].val != null) {
            checker = false;
        }
    }
    return checker;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class TableListComponent {
    constructor() {
        this.tableLayers = [];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.visualizationLayers && this.visualizationLayers.length > 0) {
            this.tableLayers = this.visualizationLayers.map((layer) => {
                return {
                    tableConfiguration: getTableConfiguration(layer.config || {}, layer.layout, this.visualizationType),
                    analyticsObject: layer.analytics
                };
            });
        }
    }
}
TableListComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'ngx-dhis2-table-list',
                template: `<div class="row">
    <div class="col-12" *ngFor="let tableLayer of tableLayers">
        <ngx-dhis2-table-item [analyticsObject]="tableLayer.analyticsObject" [tableConfiguration]="tableLayer.tableConfiguration">
        </ngx-dhis2-table-item>
    </div>
</div>`,
                styles: [``]
            },] },
];
/** @nocollapse */
TableListComponent.ctorParameters = () => [];
TableListComponent.propDecorators = {
    visualizationLayers: [{ type: Input }],
    visualizationType: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class TableItemComponent {
    constructor() {
        this.sort_direction = [];
        this.current_sorting = [];
        this.tableObject = null;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.analyticsObject && this.tableConfiguration) {
            this.tableObject = drawTable(this.analyticsObject, this.tableConfiguration);
        }
    }
    /**
     * @param {?} tableObject
     * @param {?} n
     * @param {?} isLastItem
     * @return {?}
     */
    sortData(tableObject, n, isLastItem) {
        if (tableObject.columns.length === 1 && isLastItem) {
            this.current_sorting = [];
            this.current_sorting[n] = true;
            let /** @type {?} */ table, /** @type {?} */
            rows, /** @type {?} */
            switching, /** @type {?} */
            i, /** @type {?} */
            x, /** @type {?} */
            y, /** @type {?} */
            shouldSwitch, /** @type {?} */
            dir, /** @type {?} */
            switchcount = 0;
            table = document.getElementById('myPivotTable');
            switching = true;
            //  Set the sorting direction to ascending:
            dir = 'asc';
            /*Make a loop that will continue until
                   no switching has been done:*/
            while (switching) {
                //  start by saying: no switching is done:
                switching = false;
                rows = table.getElementsByTagName('TR');
                /*Loop through all table rows (except the
                         first, which contains table headers):*/
                for (i = 0; i < rows.length - 1; i++) {
                    // start by saying there should be no switching:
                    shouldSwitch = false;
                    /*Get the two elements you want to compare,
                               one from current row and one from the next:*/
                    x = rows[i].getElementsByTagName('TD')[n];
                    y = rows[i + 1].getElementsByTagName('TD')[n];
                    /*check if the two rows should switch place,
                               based on the direction, asc or desc:*/
                    if (dir === 'asc') {
                        if (parseFloat(x.innerHTML)) {
                            if (parseFloat(x.innerHTML) > parseFloat(y.innerHTML)) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        else {
                            if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        this.sort_direction[n] = 'asc';
                    }
                    else if (dir === 'desc') {
                        if (parseFloat(x.innerHTML)) {
                            if (parseFloat(x.innerHTML) < parseFloat(y.innerHTML)) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        else {
                            if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                                // if so, mark as a switch and break the loop:
                                shouldSwitch = true;
                                break;
                            }
                        }
                        this.sort_direction[n] = 'desc';
                    }
                }
                if (shouldSwitch) {
                    /*If a switch has been marked, make the switch
                               and mark that a switch has been done:*/
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                    // Each time a switch is done, increase this count by 1:
                    switchcount++;
                }
                else {
                    /*If no switching has been done AND the direction is 'asc',
                               set the direction to 'desc' and run the while loop again.*/
                    if (switchcount === 0 && dir === 'asc') {
                        dir = 'desc';
                        this.sort_direction[n] = 'desc';
                        switching = true;
                    }
                }
            }
        }
    }
}
TableItemComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'ngx-dhis2-table-item',
                template: `<div class="row">
    <div class="col-md-12" *ngIf="tableObject">
        <h5 style="margin-top: 80px" class="text-center" *ngIf="tableObject.rows.length == 0"> No data to display</h5>

        <div *ngIf="tableObject" style="padding: 3px">
            <!--<h4 *ngIf="tableObject.rows.length != 0" class="text-center" style="margin-bottom: 0px">{{tableObject?.title}}</h4>-->
            <table class="table table-bordered table-responsive table-condensed custom-table" *ngIf="tableObject.rows.length != 0">
                <thead>
                    <!--title-->
                    <tr class="table-title">
                        <th [attr.colspan]="tableObject.rows[0].items.length">
                            <h4 style="margin: 0px" class="text-center">{{tableObject.subtitle}} </h4>
                        </th>
                    </tr>
                    <!--headers-->
                    <tr *ngFor="let header of tableObject.headers; let j = index" class="header-column">
                        <th *ngIf="tableObject.hasParentOu"></th>
                        <th *ngFor="let table_column of tableObject.columns; let i = index" style="text-align: center">
                            <span *ngIf="i==tableObject.columns.length-1 && j==tableObject.headers.length-1 && tableObject.titlesAvailable">{{ tableObject.titles.rows[i] }} / {{ tableObject.titles.column[j]}}</span>
                            <span *ngIf="i != tableObject.columns.length-1">{{ tableObject.titles.rows[i] }}</span>
                            <span *ngIf="j != tableObject.headers.length-1">{{ tableObject.titles.column[j] }}</span>
                        </th>
                        <th *ngFor="let header_column of header.items; let i=index" [colSpan]="header_column.span" style="text-align: center" (click)="sortData(tableObject,i+tableObject.columns.length,j+1==tableObject.headers.length)">
                            {{ header_column.name }}
                            <span *ngIf="j+1==tableObject.headers.length && current_sorting[i+tableObject.columns.length] && sort_direction[i+tableObject.columns.length] == 'asc'" class="glyphicon glyphicon-triangle-top pull-right"></span>
                            <span *ngIf="j+1==tableObject.headers.length && current_sorting[i+tableObject.columns.length] && sort_direction[i+tableObject.columns.length] == 'desc'" class="glyphicon glyphicon-triangle-bottom pull-right"></span>
                        </th>
                    </tr>
                </thead>
                <tbody id="myPivotTable">
                    <tr *ngFor="let row of tableObject.rows" [ngClass]="{'sub-total': row.sub_total}">
                        <td *ngFor="let header_column of row.items;let i = index" [ngClass]="{'header-column': header_column.name != ''}" style="text-align: center;vertical-align: middle" [attr.rowspan]="header_column.row_span" [style.background]="header_column.color">
                            {{ header_column.val }}
                        </td>
                    </tr>
                </tbody>
            </table>


        </div>
    </div>
</div>`,
                styles: [`.table-item-container{overflow:hidden}.custom-table{display:table;border-style:none!important;width:100%}.custom-table td,.custom-table th{border:thin solid #f1f1f1}.custom-table>tbody>tr>td,.custom-table>thead>tr>th{font-size:13px!important}table tr th{background-color:rgba(238,238,238,.29);padding:4px;text-align:center}table tr td{padding:4px}table tr td:first-child{background-color:rgba(238,238,238,.29)}.table-title{font-size:13px;font-weight:600;text-align:center}`]
            },] },
];
/** @nocollapse */
TableItemComponent.ctorParameters = () => [];
TableItemComponent.propDecorators = {
    tableConfiguration: [{ type: Input }],
    analyticsObject: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class NgxDhis2TableModule {
}
NgxDhis2TableModule.decorators = [
    { type: NgModule, args: [{
                imports: [CommonModule],
                declarations: [TableListComponent, TableItemComponent],
                exports: [TableListComponent, TableItemComponent]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { NgxDhis2TableModule, TableItemComponent as ɵb, TableListComponent as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzcHR6LW5neC1kaGlzMi10YWJsZS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2hlbHBlcnMvZ2V0LXRhYmxlLWNvbmZpZ3VyYXRpb24uaGVscGVyLnRzIiwibmc6Ly9AaGlzcHR6L25neC1kaGlzMi10YWJsZS9saWIvaGVscGVycy9kcmF3LXRhYmxlLmhlbHBlci50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2NvbXBvbmVudHMvdGFibGUtbGlzdC90YWJsZS1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL2NvbXBvbmVudHMvdGFibGUtaXRlbS90YWJsZS1pdGVtLmNvbXBvbmVudC50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItdGFibGUvbGliL25neC1kaGlzMi10YWJsZS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhYmxlQ29uZmlndXJhdGlvbihcbiAgZmF2b3JpdGVPYmplY3Q6IGFueSxcbiAgdmlzdWFsaXphdGlvbkxheW91dDogYW55LFxuICB0eXBlOiBzdHJpbmdcbik6IFRhYmxlQ29uZmlndXJhdGlvbiB7XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdkaXNwbGF5TmFtZScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmRpc3BsYXlOYW1lXG4gICAgICA6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCduYW1lJylcbiAgICAgICAgPyBmYXZvcml0ZU9iamVjdC5uYW1lXG4gICAgICAgIDogJycsXG4gICAgc3VidGl0bGU6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdzdWJ0aXRsZScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnN1YnRpdGxlXG4gICAgICA6ICcnLFxuICAgIHNob3dDb2x1bW5Ub3RhbDogZmF2b3JpdGVPYmplY3QuaGFzT3duUHJvcGVydHkoJ2NvbFRvdGFsJylcbiAgICAgID8gZmF2b3JpdGVPYmplY3QuY29sVG90YWxcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93Q29sdW1uU3VidG90YWw6IGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdjb2xTdWJ0b3RhbCcpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmNvbFN1YnRvdGFsXG4gICAgICA6IHRydWUsXG4gICAgc2hvd1Jvd1RvdGFsOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgncm93VG90YWwnKVxuICAgICAgPyBmYXZvcml0ZU9iamVjdC5yb3dUb3RhbFxuICAgICAgOiB0cnVlLFxuICAgIHNob3dSb3dTdWJ0b3RhbDogZmF2b3JpdGVPYmplY3QuaGFzT3duUHJvcGVydHkoJ3Jvd1N1YnRvdGFsJylcbiAgICAgID8gZmF2b3JpdGVPYmplY3Qucm93U3VidG90YWxcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93RGltZW5zaW9uTGFiZWxzOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnc2hvd0RpbWVuc2lvbkxhYmVscycpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnNob3dEaW1lbnNpb25MYWJlbHNcbiAgICAgIDogdHJ1ZSxcbiAgICBoaWRlRW1wdHlSb3dzOiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LmhpZGVFbXB0eVJvd3NcbiAgICAgIDogdHJ1ZSxcbiAgICBzaG93SGllcmFyY2h5OiBmYXZvcml0ZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnc2hvd0hpZXJhcmNoeScpXG4gICAgICA/IGZhdm9yaXRlT2JqZWN0LnNob3dIaWVyYXJjaHlcbiAgICAgIDogdHJ1ZSxcbiAgICBkaXNwbGF5TGlzdDogY2hlY2tGb3JFdmVudERhdGFUeXBlKGZhdm9yaXRlT2JqZWN0LCB0eXBlKSxcbiAgICByb3dzOiB2aXN1YWxpemF0aW9uTGF5b3V0LnJvd3MgPyB2aXN1YWxpemF0aW9uTGF5b3V0LnJvd3MgOiBbJ3BlJ10sXG4gICAgY29sdW1uczogdmlzdWFsaXphdGlvbkxheW91dC5jb2x1bW5zID8gdmlzdWFsaXphdGlvbkxheW91dC5jb2x1bW5zIDogWydkeCddLFxuICAgIGxlZ2VuZFNldDogZmF2b3JpdGVPYmplY3QubGVnZW5kU2V0IHx8IG51bGwsXG4gICAgc3R5bGVzOiBudWxsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yRXZlbnREYXRhVHlwZShmYXZvcml0ZU9iamVjdCwgZmF2b3JpdGVUeXBlKTogYm9vbGVhbiB7XG4gIGxldCBkaXNwbGF5TGlzdCA9IGZhbHNlO1xuICBpZiAoZmF2b3JpdGVUeXBlID09PSAnRVZFTlRfUkVQT1JUJykge1xuICAgIGlmIChcbiAgICAgIGZhdm9yaXRlT2JqZWN0Lmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpICYmXG4gICAgICBmYXZvcml0ZU9iamVjdC5kYXRhVHlwZSA9PT0gJ0VWRU5UUydcbiAgICApIHtcbiAgICAgIGRpc3BsYXlMaXN0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpc3BsYXlMaXN0O1xufVxuIiwiaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdUYWJsZShcbiAgYW5hbHl0aWNzT2JqZWN0LFxuICB0YWJsZUNvbmZpZ3VyYXRpb246IFRhYmxlQ29uZmlndXJhdGlvblxuKSB7XG4gIGNvbnN0IGxlZ2VuZENsYXNzZXMgPSB0YWJsZUNvbmZpZ3VyYXRpb24ubGVnZW5kU2V0XG4gICAgPyB0YWJsZUNvbmZpZ3VyYXRpb24ubGVnZW5kU2V0LmxlZ2VuZHNcbiAgICA6IG51bGw7XG5cbiAgY29uc3QgdGFibGUgPSB7XG4gICAgaGVhZGVyczogW10sXG4gICAgY29sdW1uczogW10sXG4gICAgcm93czogW10sXG4gICAgdGl0bGVzOiB7XG4gICAgICByb3dzOiBbXSxcbiAgICAgIGNvbHVtbjogW11cbiAgICB9LFxuICAgIHRpdGxlc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgaGFzUGFyZW50T3U6IGZhbHNlXG4gIH07XG4gIGlmICh0YWJsZUNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkoJ3RpdGxlJykpIHtcbiAgICB0YWJsZVsndGl0bGUnXSA9IHRhYmxlQ29uZmlndXJhdGlvbi50aXRsZTtcbiAgfVxuICBpZiAodGFibGVDb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KCdzdWJ0aXRsZScpKSB7XG4gICAgdGFibGVbJ3N1YnRpdGxlJ10gPSB0YWJsZUNvbmZpZ3VyYXRpb24uc3VidGl0bGU7XG4gIH1cbiAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5kaXNwbGF5TGlzdCkge1xuICAgIHRhYmxlLmhlYWRlcnNbMF0gPSB7XG4gICAgICBpdGVtczogW10sXG4gICAgICBzdHlsZTogJydcbiAgICB9O1xuICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW3RhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zLmluZGV4T2YoJ3BlJyldID1cbiAgICAgICdldmVudGRhdGUnO1xuICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW3RhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zLmluZGV4T2YoJ291JyldID1cbiAgICAgICdvdW5hbWUnO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0YWJsZUNvbmZpZ3VyYXRpb24uY29sdW1ucykge1xuICAgICAgdGFibGUuaGVhZGVyc1swXS5pdGVtcy5wdXNoKHtcbiAgICAgICAgbmFtZTpcbiAgICAgICAgICBhbmFseXRpY3NPYmplY3QuaGVhZGVyc1tnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtKV1cbiAgICAgICAgICAgIC5jb2x1bW4sXG4gICAgICAgIHNwYW46IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYW5hbHl0aWNzT2JqZWN0LnJvd3MpIHtcbiAgICAgIGNvbnN0IGNvbHVtbl9pdGVtcyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBjb2wgb2YgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBjb2wpO1xuICAgICAgICBjb2x1bW5faXRlbXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICByb3dfc3BhbjogJzEnLFxuICAgICAgICAgIC8vIGNvbG9yOmdldENvbG9yKGl0ZW1baW5kZXhdLClcbiAgICAgICAgICB2YWw6IGl0ZW1baW5kZXhdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGFibGUucm93cy5wdXNoKHtcbiAgICAgICAgaGVhZGVyczogW10sXG4gICAgICAgIGl0ZW1zOiBjb2x1bW5faXRlbXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBhZGQgbmFtZXMgdG8gdGl0bGVzIGFycmF5XG4gICAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5zaG93RGltZW5zaW9uTGFiZWxzKSB7XG4gICAgICB0YWJsZS50aXRsZXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zKSB7XG4gICAgICAgIHRhYmxlLnRpdGxlcy5jb2x1bW4ucHVzaChcbiAgICAgICAgICBhbmFseXRpY3NPYmplY3QuaGVhZGVyc1tnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtKV1cbiAgICAgICAgICAgIC5jb2x1bW5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0YWJsZUNvbmZpZ3VyYXRpb24ucm93cykge1xuICAgICAgICB0YWJsZS50aXRsZXMucm93cy5wdXNoKFxuICAgICAgICAgIGFuYWx5dGljc09iamVjdC5oZWFkZXJzW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsIGl0ZW0pXVxuICAgICAgICAgICAgLmNvbHVtblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNvbHVtbkl0ZW0gb2YgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMpIHtcbiAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IGNhbGN1bGF0ZUNvbFNwYW4oXG4gICAgICAgIGFuYWx5dGljc09iamVjdCxcbiAgICAgICAgdGFibGVDb25maWd1cmF0aW9uLmNvbHVtbnMsXG4gICAgICAgIGNvbHVtbkl0ZW1cbiAgICAgICk7XG4gICAgICBjb25zdCBjdXJyZW50Q29sdW1uSXRlbXMgPSBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhcbiAgICAgICAgYW5hbHl0aWNzT2JqZWN0LFxuICAgICAgICBjb2x1bW5JdGVtXG4gICAgICApO1xuICAgICAgY29uc3QgaGVhZGVySXRlbSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW1lbnNpb24uZHVwbGljYXRpb247IGkrKykge1xuICAgICAgICBmb3IgKGNvbnN0IGN1cnJlbnRJdGVtIG9mIGN1cnJlbnRDb2x1bW5JdGVtcykge1xuICAgICAgICAgIGhlYWRlckl0ZW0ucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBjdXJyZW50SXRlbS5uYW1lLFxuICAgICAgICAgICAgc3BhbjogZGltZW5zaW9uLmNvbF9zcGFuLFxuICAgICAgICAgICAgdHlwZTogY3VycmVudEl0ZW0udHlwZSxcbiAgICAgICAgICAgIGlkOiBjdXJyZW50SXRlbS51aWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHN0eWxlcyA9ICcnO1xuICAgICAgaWYgKHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnc3R5bGUnKSkge1xuICAgICAgICBpZiAodGFibGVDb25maWd1cmF0aW9uLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShjb2x1bW5JdGVtKSkge1xuICAgICAgICAgIHN0eWxlcyA9IHRhYmxlQ29uZmlndXJhdGlvbi5zdHlsZXNbY29sdW1uSXRlbV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRhYmxlLmhlYWRlcnMucHVzaCh7IGl0ZW1zOiBoZWFkZXJJdGVtLCBzdHlsZTogc3R5bGVzIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJvd0l0ZW0gb2YgdGFibGVDb25maWd1cmF0aW9uLnJvd3MpIHtcbiAgICAgIHRhYmxlLmNvbHVtbnMucHVzaChyb3dJdGVtKTtcbiAgICB9XG5cbiAgICAvLyBQcmVwYXJpbmcgdGFibGUgY29sdW1uc1xuICAgIGNvbnN0IGNvbHVtbl9sZW5ndGggPSB0YWJsZUNvbmZpZ3VyYXRpb24uY29sdW1ucy5sZW5ndGg7XG4gICAgY29uc3QgY29sdW1uX2l0ZW1zX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW5fbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRSb3dJdGVtcyA9IHByZXBhcmVTaW5nbGVDYXRlZ29yaWVzKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5jb2x1bW5zW2ldXG4gICAgICApO1xuICAgICAgY29sdW1uX2l0ZW1zX2FycmF5LnB1c2goY3VycmVudFJvd0l0ZW1zKTtcbiAgICB9XG4gICAgbGV0IHRhYmxlX2NvbHVtbnNfYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbl9pdGVtc19hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRhYmxlX2NvbHVtbnNfYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb2x1bW5faXRlbXNfYXJyYXlbaV0pIHtcbiAgICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5LnB1c2goW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGVtcF9hcnIgPSB0YWJsZV9jb2x1bW5zX2FycmF5LmNvbmNhdCgpO1xuICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0ZW1wX2Fycikge1xuICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIGNvbHVtbl9pdGVtc19hcnJheVtpXSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICBjb25zdCB0ZW1wQXJyID0gQXJyYXkuZnJvbShpdGVtKTtcbiAgICAgICAgICAgICAgdGFibGVfY29sdW1uc19hcnJheS5wdXNoKHRlbXBBcnIuY29uY2F0KFt2YWxdKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YWJsZV9jb2x1bW5zX2FycmF5LnB1c2goW2l0ZW0sIHZhbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXBhcmluZyB0YWJsZSByb3dzXG4gICAgY29uc3Qgcm93c19sZW5ndGggPSB0YWJsZUNvbmZpZ3VyYXRpb24ucm93cy5sZW5ndGg7XG4gICAgY29uc3Qgcm93X2l0ZW1zX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzX2xlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaW1lbnNpb24gPSBjYWxjdWxhdGVDb2xTcGFuKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLFxuICAgICAgICB0YWJsZUNvbmZpZ3VyYXRpb24ucm93c1tpXVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRSb3dJdGVtcyA9IHByZXBhcmVTaW5nbGVDYXRlZ29yaWVzKFxuICAgICAgICBhbmFseXRpY3NPYmplY3QsXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzW2ldXG4gICAgICApO1xuICAgICAgcm93X2l0ZW1zX2FycmF5LnB1c2goeyBpdGVtczogY3VycmVudFJvd0l0ZW1zLCBkaW1lbnNpb25zOiBkaW1lbnNpb24gfSk7XG4gICAgfVxuICAgIGxldCB0YWJsZV9yb3dzX2FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dfaXRlbXNfYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0YWJsZV9yb3dzX2FycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygcm93X2l0ZW1zX2FycmF5W2ldLml0ZW1zKSB7XG4gICAgICAgICAgaXRlbS5kaW1lbnNpb25zID0gcm93X2l0ZW1zX2FycmF5W2ldLmRpbWVuc2lvbnM7XG4gICAgICAgICAgdGFibGVfcm93c19hcnJheS5wdXNoKFtpdGVtXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRlbXBfYXJyID0gdGFibGVfcm93c19hcnJheS5jb25jYXQoKTtcbiAgICAgICAgdGFibGVfcm93c19hcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGVtcF9hcnIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiByb3dfaXRlbXNfYXJyYXlbaV0uaXRlbXMpIHtcbiAgICAgICAgICAgIHZhbC5kaW1lbnNpb25zID0gcm93X2l0ZW1zX2FycmF5W2ldLmRpbWVuc2lvbnM7XG4gICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRlbXBBcnIgPSBBcnJheS5mcm9tKGl0ZW0pO1xuICAgICAgICAgICAgICB0YWJsZV9yb3dzX2FycmF5LnB1c2godGVtcEFyci5jb25jYXQoW3ZhbF0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRhYmxlX3Jvd3NfYXJyYXkucHVzaChbaXRlbSwgdmFsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGlmICh0YWJsZV9yb3dzX2FycmF5Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgZm9yIChjb25zdCByb3dJdGVtIG9mIHRhYmxlX3Jvd3NfYXJyYXkpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgaGVhZGVyczogcm93SXRlbVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiByb3dJdGVtKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgPT09IDAgfHwgY291bnRlciAlIHZhbC5kaW1lbnNpb25zLmNvbF9zcGFuID09PSAwKSB7XG4gICAgICAgICAgICBpdGVtLml0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiB2YWwudHlwZSxcbiAgICAgICAgICAgICAgbmFtZTogdmFsLnVpZCxcbiAgICAgICAgICAgICAgdmFsOiB2YWwubmFtZSxcbiAgICAgICAgICAgICAgcm93X3NwYW46IHZhbC5kaW1lbnNpb25zLmNvbF9zcGFuLFxuICAgICAgICAgICAgICBoZWFkZXI6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbEl0ZW0gb2YgdGFibGVfY29sdW1uc19hcnJheSkge1xuICAgICAgICAgIGNvbnN0IGRhdGFJdGVtID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCB2YWwgb2Ygcm93SXRlbSkge1xuICAgICAgICAgICAgZGF0YUl0ZW0ucHVzaCh7IHR5cGU6IHZhbC50eXBlLCB2YWx1ZTogdmFsLnVpZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29sSXRlbSkge1xuICAgICAgICAgICAgZGF0YUl0ZW0ucHVzaCh7IHR5cGU6IHZhbC50eXBlLCB2YWx1ZTogdmFsLnVpZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbS5pdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgdmFsOiBnZXREYXRhVmFsdWUoYW5hbHl0aWNzT2JqZWN0LCBkYXRhSXRlbSksXG4gICAgICAgICAgICBjb2xvcjogZ2V0RGF0YVZhbHVlQ29sb3IoXG4gICAgICAgICAgICAgIGxlZ2VuZENsYXNzZXMsXG4gICAgICAgICAgICAgIGdldERhdGFWYWx1ZShhbmFseXRpY3NPYmplY3QsIGRhdGFJdGVtKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHJvd19zcGFuOiAnMScsXG4gICAgICAgICAgICBkaXNwbGF5OiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpICYmXG4gICAgICAgICAgdGFibGVDb25maWd1cmF0aW9uLmhpZGVFbXB0eVJvd3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKCFjaGVja1plcm9zKHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLmxlbmd0aCwgaXRlbS5pdGVtcykpIHtcbiAgICAgICAgICAgIHRhYmxlLnJvd3MucHVzaChpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFibGUucm93cy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnRlcisrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICBpdGVtczogW10sXG4gICAgICAgIGhlYWRlcnM6IFtdXG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBjb2xJdGVtIG9mIHRhYmxlX2NvbHVtbnNfYXJyYXkpIHtcbiAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29sSXRlbSkge1xuICAgICAgICAgIGRhdGFJdGVtLnB1c2goeyB0eXBlOiB2YWwudHlwZSwgdmFsdWU6IHZhbC51aWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlbS5pdGVtcy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICB2YWw6IGdldERhdGFWYWx1ZShhbmFseXRpY3NPYmplY3QsIGRhdGFJdGVtKSxcbiAgICAgICAgICByb3dfc3BhbjogJzEnLFxuICAgICAgICAgIGRpc3BsYXk6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSgnaGlkZUVtcHR5Um93cycpICYmXG4gICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbi5oaWRlRW1wdHlSb3dzXG4gICAgICApIHtcbiAgICAgICAgaWYgKCFjaGVja1plcm9zKHRhYmxlQ29uZmlndXJhdGlvbi5yb3dzLmxlbmd0aCwgaXRlbS5pdGVtcykpIHtcbiAgICAgICAgICB0YWJsZS5yb3dzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhYmxlLnJvd3MucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyB0b2RvIGltcHJvdmUgdG90YWwgb3B0aW9ucyB0byBhbHNvIHdvcmsgZm9yIGV2ZW50IHRhYmxlXG4gIC8vIHJldHVybiBfZ2V0U2FuaXRpemVkVGFibGVPYmplY3QodGFibGUsIHRhYmxlQ29uZmlndXJhdGlvbik7XG4gIHJldHVybiB0YWJsZTtcbn1cblxuZnVuY3Rpb24gZ2V0VGl0bGVJbmRleChhbmFseXRpY3NPYmplY3RIZWFkZXJzLCBuYW1lOiBzdHJpbmcpIHtcbiAgbGV0IGluZGV4ID0gMDtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBmb3IgKGNvbnN0IGhlYWRlciBvZiBhbmFseXRpY3NPYmplY3RIZWFkZXJzKSB7XG4gICAgaWYgKGhlYWRlci5uYW1lID09PSBuYW1lKSB7XG4gICAgICBpbmRleCA9IGNvdW50ZXI7XG4gICAgfVxuICAgIGNvdW50ZXIrKztcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvbFNwYW4oYW5hbHl0aWNzT2JqZWN0LCBhcnJheSwgaXRlbSkge1xuICBjb25zdCBpbmRleE9mSXRlbSA9IGFycmF5LmluZGV4T2YoaXRlbSk7XG4gIGNvbnN0IGFycmF5X2xlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgY29uc3QgbGFzdF9pbmRleCA9IGFycmF5X2xlbmd0aCAtIDE7XG4gIGNvbnN0IGRpbWVuc2lvbnMgPSB7IGNvbF9zcGFuOiAxLCBkdXBsaWNhdGlvbjogMSB9O1xuICBmb3IgKGxldCBpID0gbGFzdF9pbmRleDsgaSA+IGluZGV4T2ZJdGVtOyBpLS0pIHtcbiAgICBjb25zdCBhcnIgPSBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhhbmFseXRpY3NPYmplY3QsIGFycmF5W2ldKTtcbiAgICBkaW1lbnNpb25zLmNvbF9zcGFuID0gZGltZW5zaW9ucy5jb2xfc3BhbiAqIGFyci5sZW5ndGg7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleE9mSXRlbTsgaSsrKSB7XG4gICAgY29uc3QgYXJyID0gcHJlcGFyZVNpbmdsZUNhdGVnb3JpZXMoYW5hbHl0aWNzT2JqZWN0LCBhcnJheVtpXSk7XG4gICAgZGltZW5zaW9ucy5kdXBsaWNhdGlvbiA9IGRpbWVuc2lvbnMuZHVwbGljYXRpb24gKiBhcnIubGVuZ3RoO1xuICB9XG4gIHJldHVybiBkaW1lbnNpb25zO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlU2luZ2xlQ2F0ZWdvcmllcyhcbiAgaW5pdGlhbEFuYWx5dGljcyxcbiAgaXRlbUlkZW50aWZpZXIsXG4gIHByZURlZmluZWRJdGVtcyA9IFtdXG4pIHtcbiAgY29uc3QgYW5hbHl0aWNzT2JqZWN0ID0gc2FuaXRpemVJbmNvbWluZ0FuYWx5dGljcyhpbml0aWFsQW5hbHl0aWNzKTtcbiAgY29uc3Qgc3RydWN0dXJlID0gW107XG4gIGlmIChwcmVEZWZpbmVkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChjb25zdCB2YWwgb2YgZ2V0TWV0YWRhdGFBcnJheShhbmFseXRpY3NPYmplY3QsIGl0ZW1JZGVudGlmaWVyKSkge1xuICAgICAgc3RydWN0dXJlLnB1c2goe1xuICAgICAgICBuYW1lOiBhbmFseXRpY3NPYmplY3QubWV0YURhdGEubmFtZXNbdmFsXSxcbiAgICAgICAgdWlkOiB2YWwsXG4gICAgICAgIHR5cGU6IGl0ZW1JZGVudGlmaWVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaWYgKHByZURlZmluZWRJdGVtcy5sZW5ndGggIT09IDApIHtcbiAgICBmb3IgKGNvbnN0IHZhbCBvZiBwcmVEZWZpbmVkSXRlbXMpIHtcbiAgICAgIHN0cnVjdHVyZS5wdXNoKHtcbiAgICAgICAgbmFtZTogYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLm5hbWVzW3ZhbF0sXG4gICAgICAgIHVpZDogdmFsLFxuICAgICAgICB0eXBlOiBpdGVtSWRlbnRpZmllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJ1Y3R1cmU7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplSW5jb21pbmdBbmFseXRpY3MoYW5hbHl0aWNzT2JqZWN0OiBhbnkpIHtcbiAgcmV0dXJuIGFuYWx5dGljc09iamVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0TWV0YWRhdGFBcnJheShhbmFseXRpY3NPYmplY3QsIG1ldGFkYXRhVHlwZTogc3RyaW5nKSB7XG4gIGxldCBtZXRhZGF0YUFycmF5ID0gW107XG4gIGlmIChtZXRhZGF0YVR5cGUgPT09ICdkeCcpIHtcbiAgICBtZXRhZGF0YUFycmF5ID0gYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLmR4O1xuICB9IGVsc2UgaWYgKG1ldGFkYXRhVHlwZSA9PT0gJ291Jykge1xuICAgIG1ldGFkYXRhQXJyYXkgPSBhbmFseXRpY3NPYmplY3QubWV0YURhdGEub3U7XG4gIH0gZWxzZSBpZiAobWV0YWRhdGFUeXBlID09PSAnY28nKSB7XG4gICAgbWV0YWRhdGFBcnJheSA9IGFuYWx5dGljc09iamVjdC5tZXRhRGF0YS5jbztcbiAgfSBlbHNlIGlmIChtZXRhZGF0YVR5cGUgPT09ICdwZScpIHtcbiAgICBtZXRhZGF0YUFycmF5ID0gYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLnBlO1xuICB9IGVsc2Uge1xuICAgIG1ldGFkYXRhQXJyYXkgPSBhbmFseXRpY3NPYmplY3QubWV0YURhdGFbbWV0YWRhdGFUeXBlXTtcbiAgfVxuICByZXR1cm4gbWV0YWRhdGFBcnJheTtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVZhbHVlKGFuYWx5dGljc09iamVjdCwgZGF0YUl0ZW1zID0gW10pIHtcbiAgbGV0IG51bSA9IG51bGw7XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgYW5hbHl0aWNzT2JqZWN0LnJvd3MpIHtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFJdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICB2YWx1ZVtnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCBpdGVtLnR5cGUpXSA9PT0gaXRlbS52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIGNvdW50ZXIrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvdW50ZXIgPT09IGRhdGFJdGVtcy5sZW5ndGgpIHtcbiAgICAgIGlmIChpc05hTih2YWx1ZVtnZXRUaXRsZUluZGV4KGFuYWx5dGljc09iamVjdC5oZWFkZXJzLCAndmFsdWUnKV0pKSB7XG4gICAgICAgIG51bSA9IHZhbHVlW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsICd2YWx1ZScpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG51bSArPSBwYXJzZUZsb2F0KFxuICAgICAgICAgIHZhbHVlW2dldFRpdGxlSW5kZXgoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMsICd2YWx1ZScpXVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhVmFsdWVDb2xvcihsZWdlbmRDbGFzc2VzLCB2YWx1ZSkge1xuICBsZXQgY29sb3IgPSAnJztcbiAgaWYgKCFpc05hTih2YWx1ZSkgJiYgbGVnZW5kQ2xhc3Nlcykge1xuICAgIGxlZ2VuZENsYXNzZXMuZm9yRWFjaChsZWdlbmRDbGFzcyA9PiB7XG4gICAgICBpZiAobGVnZW5kQ2xhc3Muc3RhcnRWYWx1ZSA8PSB2YWx1ZSAmJiBsZWdlbmRDbGFzcy5lbmRWYWx1ZSA+IHZhbHVlKSB7XG4gICAgICAgIGNvbG9yID0gbGVnZW5kQ2xhc3MuY29sb3I7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIChsZWdlbmRDbGFzcy5zdGFydFZhbHVlIDwgdmFsdWUgJiYgbGVnZW5kQ2xhc3MuZW5kVmFsdWUgPj0gdmFsdWUpIHtcbiAgICAgIFxuICAgICAgLy8gfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuZnVuY3Rpb24gY2hlY2taZXJvcyhzdGF0aW5nX2xlbmd0aCwgYXJyYXkpOiBib29sZWFuIHtcbiAgbGV0IGNoZWNrZXIgPSB0cnVlO1xuICBmb3IgKGxldCBpID0gc3RhdGluZ19sZW5ndGg7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJheVtpXS5uYW1lID09PSAnJyAmJiBhcnJheVtpXS52YWwgIT0gbnVsbCkge1xuICAgICAgY2hlY2tlciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hlY2tlcjtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFibGVDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3RhYmxlLWNvbmZpZ3VyYXRpb24nO1xuXG5pbXBvcnQgeyBnZXRUYWJsZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9oZWxwZXJzL2luZGV4JztcbkBDb21wb25lbnQoe1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXG4gIHNlbGVjdG9yOiAnbmd4LWRoaXMyLXRhYmxlLWxpc3QnLFxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sLTEyXCIgKm5nRm9yPVwibGV0IHRhYmxlTGF5ZXIgb2YgdGFibGVMYXllcnNcIj5cbiAgICAgICAgPG5neC1kaGlzMi10YWJsZS1pdGVtIFthbmFseXRpY3NPYmplY3RdPVwidGFibGVMYXllci5hbmFseXRpY3NPYmplY3RcIiBbdGFibGVDb25maWd1cmF0aW9uXT1cInRhYmxlTGF5ZXIudGFibGVDb25maWd1cmF0aW9uXCI+XG4gICAgICAgIDwvbmd4LWRoaXMyLXRhYmxlLWl0ZW0+XG4gICAgPC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgYF1cbn0pXG5leHBvcnQgY2xhc3MgVGFibGVMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgdmlzdWFsaXphdGlvbkxheWVyczogYW55W107XG4gIEBJbnB1dCgpIHZpc3VhbGl6YXRpb25UeXBlOiBzdHJpbmc7XG4gIHRhYmxlTGF5ZXJzOiBBcnJheTx7XG4gICAgdGFibGVDb25maWd1cmF0aW9uOiBUYWJsZUNvbmZpZ3VyYXRpb247XG4gICAgYW5hbHl0aWNzT2JqZWN0OiBhbnk7XG4gIH0+ID0gW107XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAodGhpcy52aXN1YWxpemF0aW9uTGF5ZXJzICYmIHRoaXMudmlzdWFsaXphdGlvbkxheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnRhYmxlTGF5ZXJzID0gdGhpcy52aXN1YWxpemF0aW9uTGF5ZXJzLm1hcCgobGF5ZXI6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRhYmxlQ29uZmlndXJhdGlvbjogZ2V0VGFibGVDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgbGF5ZXIuY29uZmlnIHx8IHt9LFxuICAgICAgICAgICAgbGF5ZXIubGF5b3V0LFxuICAgICAgICAgICAgdGhpcy52aXN1YWxpemF0aW9uVHlwZVxuICAgICAgICAgICksXG4gICAgICAgICAgYW5hbHl0aWNzT2JqZWN0OiBsYXllci5hbmFseXRpY3NcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWJsZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9tb2RlbHMvdGFibGUtY29uZmlndXJhdGlvbic7XG5cbmltcG9ydCB7IGRyYXdUYWJsZSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvaW5kZXgnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ25neC1kaGlzMi10YWJsZS1pdGVtJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMlwiICpuZ0lmPVwidGFibGVPYmplY3RcIj5cbiAgICAgICAgPGg1IHN0eWxlPVwibWFyZ2luLXRvcDogODBweFwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIiAqbmdJZj1cInRhYmxlT2JqZWN0LnJvd3MubGVuZ3RoID09IDBcIj4gTm8gZGF0YSB0byBkaXNwbGF5PC9oNT5cblxuICAgICAgICA8ZGl2ICpuZ0lmPVwidGFibGVPYmplY3RcIiBzdHlsZT1cInBhZGRpbmc6IDNweFwiPlxuICAgICAgICAgICAgPCEtLTxoNCAqbmdJZj1cInRhYmxlT2JqZWN0LnJvd3MubGVuZ3RoICE9IDBcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAwcHhcIj57e3RhYmxlT2JqZWN0Py50aXRsZX19PC9oND4tLT5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkIHRhYmxlLXJlc3BvbnNpdmUgdGFibGUtY29uZGVuc2VkIGN1c3RvbS10YWJsZVwiICpuZ0lmPVwidGFibGVPYmplY3Qucm93cy5sZW5ndGggIT0gMFwiPlxuICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPCEtLXRpdGxlLS0+XG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInRhYmxlLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggW2F0dHIuY29sc3Bhbl09XCJ0YWJsZU9iamVjdC5yb3dzWzBdLml0ZW1zLmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBzdHlsZT1cIm1hcmdpbjogMHB4XCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPnt7dGFibGVPYmplY3Quc3VidGl0bGV9fSA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLWhlYWRlcnMtLT5cbiAgICAgICAgICAgICAgICAgICAgPHRyICpuZ0Zvcj1cImxldCBoZWFkZXIgb2YgdGFibGVPYmplY3QuaGVhZGVyczsgbGV0IGogPSBpbmRleFwiIGNsYXNzPVwiaGVhZGVyLWNvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0lmPVwidGFibGVPYmplY3QuaGFzUGFyZW50T3VcIj48L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0Zvcj1cImxldCB0YWJsZV9jb2x1bW4gb2YgdGFibGVPYmplY3QuY29sdW1uczsgbGV0IGkgPSBpbmRleFwiIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpPT10YWJsZU9iamVjdC5jb2x1bW5zLmxlbmd0aC0xICYmIGo9PXRhYmxlT2JqZWN0LmhlYWRlcnMubGVuZ3RoLTEgJiYgdGFibGVPYmplY3QudGl0bGVzQXZhaWxhYmxlXCI+e3sgdGFibGVPYmplY3QudGl0bGVzLnJvd3NbaV0gfX0gLyB7eyB0YWJsZU9iamVjdC50aXRsZXMuY29sdW1uW2pdfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpICE9IHRhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoLTFcIj57eyB0YWJsZU9iamVjdC50aXRsZXMucm93c1tpXSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImogIT0gdGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGgtMVwiPnt7IHRhYmxlT2JqZWN0LnRpdGxlcy5jb2x1bW5bal0gfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoICpuZ0Zvcj1cImxldCBoZWFkZXJfY29sdW1uIG9mIGhlYWRlci5pdGVtczsgbGV0IGk9aW5kZXhcIiBbY29sU3Bhbl09XCJoZWFkZXJfY29sdW1uLnNwYW5cIiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlclwiIChjbGljayk9XCJzb3J0RGF0YSh0YWJsZU9iamVjdCxpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoLGorMT09dGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGgpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgaGVhZGVyX2NvbHVtbi5uYW1lIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJqKzE9PXRhYmxlT2JqZWN0LmhlYWRlcnMubGVuZ3RoICYmIGN1cnJlbnRfc29ydGluZ1tpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoXSAmJiBzb3J0X2RpcmVjdGlvbltpK3RhYmxlT2JqZWN0LmNvbHVtbnMubGVuZ3RoXSA9PSAnYXNjJ1wiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmlhbmdsZS10b3AgcHVsbC1yaWdodFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImorMT09dGFibGVPYmplY3QuaGVhZGVycy5sZW5ndGggJiYgY3VycmVudF9zb3J0aW5nW2krdGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGhdICYmIHNvcnRfZGlyZWN0aW9uW2krdGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGhdID09ICdkZXNjJ1wiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmlhbmdsZS1ib3R0b20gcHVsbC1yaWdodFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9XCJteVBpdm90VGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRyICpuZ0Zvcj1cImxldCByb3cgb2YgdGFibGVPYmplY3Qucm93c1wiIFtuZ0NsYXNzXT1cInsnc3ViLXRvdGFsJzogcm93LnN1Yl90b3RhbH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdGb3I9XCJsZXQgaGVhZGVyX2NvbHVtbiBvZiByb3cuaXRlbXM7bGV0IGkgPSBpbmRleFwiIFtuZ0NsYXNzXT1cInsnaGVhZGVyLWNvbHVtbic6IGhlYWRlcl9jb2x1bW4ubmFtZSAhPSAnJ31cIiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCIgW2F0dHIucm93c3Bhbl09XCJoZWFkZXJfY29sdW1uLnJvd19zcGFuXCIgW3N0eWxlLmJhY2tncm91bmRdPVwiaGVhZGVyX2NvbHVtbi5jb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGhlYWRlcl9jb2x1bW4udmFsIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuXG5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgLnRhYmxlLWl0ZW0tY29udGFpbmVye292ZXJmbG93OmhpZGRlbn0uY3VzdG9tLXRhYmxle2Rpc3BsYXk6dGFibGU7Ym9yZGVyLXN0eWxlOm5vbmUhaW1wb3J0YW50O3dpZHRoOjEwMCV9LmN1c3RvbS10YWJsZSB0ZCwuY3VzdG9tLXRhYmxlIHRoe2JvcmRlcjp0aGluIHNvbGlkICNmMWYxZjF9LmN1c3RvbS10YWJsZT50Ym9keT50cj50ZCwuY3VzdG9tLXRhYmxlPnRoZWFkPnRyPnRoe2ZvbnQtc2l6ZToxM3B4IWltcG9ydGFudH10YWJsZSB0ciB0aHtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjM4LDIzOCwyMzgsLjI5KTtwYWRkaW5nOjRweDt0ZXh0LWFsaWduOmNlbnRlcn10YWJsZSB0ciB0ZHtwYWRkaW5nOjRweH10YWJsZSB0ciB0ZDpmaXJzdC1jaGlsZHtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjM4LDIzOCwyMzgsLjI5KX0udGFibGUtdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO3RleHQtYWxpZ246Y2VudGVyfWBdXG59KVxuZXhwb3J0IGNsYXNzIFRhYmxlSXRlbUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIHRhYmxlQ29uZmlndXJhdGlvbjogVGFibGVDb25maWd1cmF0aW9uO1xuICBASW5wdXQoKSBhbmFseXRpY3NPYmplY3Q6IGFueTtcbiAgdGFibGVPYmplY3Q6IGFueTtcbiAgc29ydF9kaXJlY3Rpb246IHN0cmluZ1tdID0gW107XG4gIGN1cnJlbnRfc29ydGluZzogYm9vbGVhbltdID0gW107XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGFibGVPYmplY3QgPSBudWxsO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuYW5hbHl0aWNzT2JqZWN0ICYmIHRoaXMudGFibGVDb25maWd1cmF0aW9uKSB7XG4gICAgICB0aGlzLnRhYmxlT2JqZWN0ID0gZHJhd1RhYmxlKFxuICAgICAgICB0aGlzLmFuYWx5dGljc09iamVjdCxcbiAgICAgICAgdGhpcy50YWJsZUNvbmZpZ3VyYXRpb25cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc29ydERhdGEodGFibGVPYmplY3QsIG4sIGlzTGFzdEl0ZW0pIHtcbiAgICBpZiAodGFibGVPYmplY3QuY29sdW1ucy5sZW5ndGggPT09IDEgJiYgaXNMYXN0SXRlbSkge1xuICAgICAgdGhpcy5jdXJyZW50X3NvcnRpbmcgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudF9zb3J0aW5nW25dID0gdHJ1ZTtcbiAgICAgIGxldCB0YWJsZSxcbiAgICAgICAgcm93cyxcbiAgICAgICAgc3dpdGNoaW5nLFxuICAgICAgICBpLFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBzaG91bGRTd2l0Y2gsXG4gICAgICAgIGRpcixcbiAgICAgICAgc3dpdGNoY291bnQgPSAwO1xuICAgICAgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlQaXZvdFRhYmxlJyk7XG4gICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuICAgICAgLy8gIFNldCB0aGUgc29ydGluZyBkaXJlY3Rpb24gdG8gYXNjZW5kaW5nOlxuICAgICAgZGlyID0gJ2FzYyc7XG4gICAgICAvKk1ha2UgYSBsb29wIHRoYXQgd2lsbCBjb250aW51ZSB1bnRpbFxuICAgICAgIG5vIHN3aXRjaGluZyBoYXMgYmVlbiBkb25lOiovXG4gICAgICB3aGlsZSAoc3dpdGNoaW5nKSB7XG4gICAgICAgIC8vICBzdGFydCBieSBzYXlpbmc6IG5vIHN3aXRjaGluZyBpcyBkb25lOlxuICAgICAgICBzd2l0Y2hpbmcgPSBmYWxzZTtcbiAgICAgICAgcm93cyA9IHRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdUUicpO1xuICAgICAgICAvKkxvb3AgdGhyb3VnaCBhbGwgdGFibGUgcm93cyAoZXhjZXB0IHRoZVxuICAgICAgICAgZmlyc3QsIHdoaWNoIGNvbnRhaW5zIHRhYmxlIGhlYWRlcnMpOiovXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCByb3dzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgIC8vIHN0YXJ0IGJ5IHNheWluZyB0aGVyZSBzaG91bGQgYmUgbm8gc3dpdGNoaW5nOlxuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IGZhbHNlO1xuICAgICAgICAgIC8qR2V0IHRoZSB0d28gZWxlbWVudHMgeW91IHdhbnQgdG8gY29tcGFyZSxcbiAgICAgICAgICAgb25lIGZyb20gY3VycmVudCByb3cgYW5kIG9uZSBmcm9tIHRoZSBuZXh0OiovXG4gICAgICAgICAgeCA9IHJvd3NbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1REJylbbl07XG4gICAgICAgICAgeSA9IHJvd3NbaSArIDFdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdURCcpW25dO1xuICAgICAgICAgIC8qY2hlY2sgaWYgdGhlIHR3byByb3dzIHNob3VsZCBzd2l0Y2ggcGxhY2UsXG4gICAgICAgICAgIGJhc2VkIG9uIHRoZSBkaXJlY3Rpb24sIGFzYyBvciBkZXNjOiovXG4gICAgICAgICAgaWYgKGRpciA9PT0gJ2FzYycpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHguaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh4LmlubmVySFRNTCkgPiBwYXJzZUZsb2F0KHkuaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHNvLCBtYXJrIGFzIGEgc3dpdGNoIGFuZCBicmVhayB0aGUgbG9vcDpcbiAgICAgICAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA+IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBzbywgbWFyayBhcyBhIHN3aXRjaCBhbmQgYnJlYWsgdGhlIGxvb3A6XG4gICAgICAgICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdhc2MnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGlyID09PSAnZGVzYycpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHguaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh4LmlubmVySFRNTCkgPCBwYXJzZUZsb2F0KHkuaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHNvLCBtYXJrIGFzIGEgc3dpdGNoIGFuZCBicmVhayB0aGUgbG9vcDpcbiAgICAgICAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA8IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBzbywgbWFyayBhcyBhIHN3aXRjaCBhbmQgYnJlYWsgdGhlIGxvb3A6XG4gICAgICAgICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdkZXNjJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFN3aXRjaCkge1xuICAgICAgICAgIC8qSWYgYSBzd2l0Y2ggaGFzIGJlZW4gbWFya2VkLCBtYWtlIHRoZSBzd2l0Y2hcbiAgICAgICAgICAgYW5kIG1hcmsgdGhhdCBhIHN3aXRjaCBoYXMgYmVlbiBkb25lOiovXG4gICAgICAgICAgcm93c1tpXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyb3dzW2kgKyAxXSwgcm93c1tpXSk7XG4gICAgICAgICAgc3dpdGNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAvLyBFYWNoIHRpbWUgYSBzd2l0Y2ggaXMgZG9uZSwgaW5jcmVhc2UgdGhpcyBjb3VudCBieSAxOlxuICAgICAgICAgIHN3aXRjaGNvdW50Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLypJZiBubyBzd2l0Y2hpbmcgaGFzIGJlZW4gZG9uZSBBTkQgdGhlIGRpcmVjdGlvbiBpcyAnYXNjJyxcbiAgICAgICAgICAgc2V0IHRoZSBkaXJlY3Rpb24gdG8gJ2Rlc2MnIGFuZCBydW4gdGhlIHdoaWxlIGxvb3AgYWdhaW4uKi9cbiAgICAgICAgICBpZiAoc3dpdGNoY291bnQgPT09IDAgJiYgZGlyID09PSAnYXNjJykge1xuICAgICAgICAgICAgZGlyID0gJ2Rlc2MnO1xuICAgICAgICAgICAgdGhpcy5zb3J0X2RpcmVjdGlvbltuXSA9ICdkZXNjJztcbiAgICAgICAgICAgIHN3aXRjaGluZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFibGVMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3RhYmxlLWxpc3QvdGFibGUtbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGFibGVJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3RhYmxlLWl0ZW0vdGFibGUtaXRlbS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1RhYmxlTGlzdENvbXBvbmVudCwgVGFibGVJdGVtQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW1RhYmxlTGlzdENvbXBvbmVudCwgVGFibGVJdGVtQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hEaGlzMlRhYmxlTW9kdWxlIHt9XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNBLCtCQUNFLGNBQW1CLEVBQ25CLG1CQUF3QixFQUN4QixJQUFZO0lBRVosT0FBTztRQUNMLEtBQUssRUFBRSxjQUFjLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQztjQUMvQyxjQUFjLENBQUMsV0FBVztjQUMxQixjQUFjLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztrQkFDbkMsY0FBYyxDQUFDLElBQUk7a0JBQ25CLEVBQUU7UUFDUixRQUFRLEVBQUUsY0FBYyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUM7Y0FDL0MsY0FBYyxDQUFDLFFBQVE7Y0FDdkIsRUFBRTtRQUNOLGVBQWUsRUFBRSxjQUFjLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQztjQUN0RCxjQUFjLENBQUMsUUFBUTtjQUN2QixJQUFJO1FBQ1Isa0JBQWtCLEVBQUUsY0FBYyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUM7Y0FDNUQsY0FBYyxDQUFDLFdBQVc7Y0FDMUIsSUFBSTtRQUNSLFlBQVksRUFBRSxjQUFjLENBQUMsY0FBYyxDQUFDLFVBQVUs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
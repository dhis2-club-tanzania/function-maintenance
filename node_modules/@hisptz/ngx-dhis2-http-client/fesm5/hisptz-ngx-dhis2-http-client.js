import { Injectable, defineInjectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { of, forkJoin, throwError } from 'rxjs';
import { tap, catchError, map, switchMap, mergeMap } from 'rxjs/internal/operators';
import { __assign } from 'tslib';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ManifestService = /** @class */ (function () {
    function ManifestService(httpClient) {
        this.httpClient = httpClient;
        this._defaultRootUrl = '../../../';
        this._manifestLoaded = false;
    }
    /**
     * @return {?}
     */
    ManifestService.prototype.getManifest = /**
     * @return {?}
     */
    function () {
        var _this = this;
        return this._manifestLoaded ? of(this._manifest) : this.httpClient.get('manifest.webapp').pipe(catchError(function () {
            console.warn('Manifest file could not be loaded, default options have been used instead');
            return of(null);
        }), tap(function (manifest) {
            _this._manifest = manifest;
            _this._manifestLoaded = true;
        }));
    };
    /**
     * @return {?}
     */
    ManifestService.prototype.getRootUrl = /**
     * @return {?}
     */
    function () {
        var _this = this;
        return this.getManifest().pipe(map(function (manifest) {
            if (!manifest) {
                return _this._defaultRootUrl;
            }
            return manifest.activities && manifest.activities.dhis && manifest.activities.dhis.href ?
                manifest.activities.dhis.href : _this._defaultRootUrl;
        }));
    };
    ManifestService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] },
    ];
    /** @nocollapse */
    ManifestService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    /** @nocollapse */ ManifestService.ngInjectableDef = defineInjectable({ factory: function ManifestService_Factory() { return new ManifestService(inject(HttpClient)); }, token: ManifestService, providedIn: "root" });
    return ManifestService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var SystemInfoService = /** @class */ (function () {
    function SystemInfoService(manifestService, httpClient) {
        this.manifestService = manifestService;
        this.httpClient = httpClient;
        this._systemInfoLoaded = false;
    }
    /**
     * @return {?}
     */
    SystemInfoService.prototype.getSystemInfo = /**
     * @return {?}
     */
    function () {
        var _this = this;
        return this._systemInfoLoaded ? of(this._systemInfo) :
            this.manifestService.getRootUrl().pipe(switchMap(function (rootUrl) { return forkJoin(_this.httpClient.get(rootUrl + "api/system/info"), _this.httpClient.get(rootUrl + "api/systemSettings")).pipe(map(function (res) {
                return __assign({}, res[0], res[1]);
            }), tap(function (systemInfo) {
                _this._systemInfo = systemInfo;
                _this._systemInfoLoaded = true;
            })); }));
    };
    /**
     * @return {?}
     */
    SystemInfoService.prototype.getSystemVersion = /**
     * @return {?}
     */
    function () {
        return this.getSystemInfo().pipe(map(function (systemInfo) {
            if (!systemInfo) {
                return 0;
            }
            var /** @type {?} */ splitedVersion = systemInfo.version ? systemInfo.version.split('.') : [];
            return parseInt(splitedVersion[1], 10) || 0;
        }));
    };
    SystemInfoService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] },
    ];
    /** @nocollapse */
    SystemInfoService.ctorParameters = function () { return [
        { type: ManifestService },
        { type: HttpClient }
    ]; };
    /** @nocollapse */ SystemInfoService.ngInjectableDef = defineInjectable({ factory: function SystemInfoService_Factory() { return new SystemInfoService(inject(ManifestService), inject(HttpClient)); }, token: SystemInfoService, providedIn: "root" });
    return SystemInfoService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var NgxDhis2HttpClientService = /** @class */ (function () {
    function NgxDhis2HttpClientService(httpClient, manifestService, systemInfoService) {
        this.httpClient = httpClient;
        this.manifestService = manifestService;
        this.systemInfoService = systemInfoService;
    }
    /**
     * @param {?} url
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype.get = /**
     * @param {?} url
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    function (url, includeVersionNumber, preferPreviousApiVersion, useRootUrl) {
        var _this = this;
        if (includeVersionNumber === void 0) { includeVersionNumber = false; }
        if (preferPreviousApiVersion === void 0) { preferPreviousApiVersion = false; }
        if (useRootUrl === void 0) { useRootUrl = false; }
        var /** @type {?} */ rootUrlPromise = useRootUrl
            ? this.manifestService.getRootUrl()
            : this._getApiRootUrl(includeVersionNumber, preferPreviousApiVersion);
        return rootUrlPromise.pipe(mergeMap(function (rootUrl) {
            return _this.httpClient.get(rootUrl + url).pipe(catchError(_this._handleError));
        }), catchError(this._handleError));
    };
    /**
     * @param {?} url
     * @param {?} data
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @param {?=} headerOptions
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype.post = /**
     * @param {?} url
     * @param {?} data
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @param {?=} headerOptions
     * @return {?}
     */
    function (url, data, includeVersionNumber, preferPreviousApiVersion, useRootUrl, headerOptions) {
        var _this = this;
        if (includeVersionNumber === void 0) { includeVersionNumber = false; }
        if (preferPreviousApiVersion === void 0) { preferPreviousApiVersion = false; }
        if (useRootUrl === void 0) { useRootUrl = false; }
        var /** @type {?} */ rootUrlPromise = useRootUrl
            ? this.manifestService.getRootUrl()
            : this._getApiRootUrl(includeVersionNumber, preferPreviousApiVersion);
        return rootUrlPromise.pipe(mergeMap(function (rootUrl) {
            return _this.httpClient
                .post(rootUrl + url, data)
                .pipe(catchError(_this._handleError));
        }), catchError(this._handleError));
    };
    /**
     * @param {?} url
     * @param {?} data
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype.put = /**
     * @param {?} url
     * @param {?} data
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    function (url, data, includeVersionNumber, preferPreviousApiVersion, useRootUrl) {
        var _this = this;
        if (includeVersionNumber === void 0) { includeVersionNumber = false; }
        if (preferPreviousApiVersion === void 0) { preferPreviousApiVersion = false; }
        if (useRootUrl === void 0) { useRootUrl = false; }
        var /** @type {?} */ rootUrlPromise = useRootUrl
            ? this.manifestService.getRootUrl()
            : this._getApiRootUrl(includeVersionNumber, preferPreviousApiVersion);
        return rootUrlPromise.pipe(mergeMap(function (rootUrl) {
            return _this.httpClient
                .put(rootUrl + url, data)
                .pipe(catchError(_this._handleError));
        }), catchError(this._handleError));
    };
    /**
     * @param {?} url
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype.delete = /**
     * @param {?} url
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousApiVersion
     * @param {?=} useRootUrl
     * @return {?}
     */
    function (url, includeVersionNumber, preferPreviousApiVersion, useRootUrl) {
        var _this = this;
        if (includeVersionNumber === void 0) { includeVersionNumber = false; }
        if (preferPreviousApiVersion === void 0) { preferPreviousApiVersion = false; }
        if (useRootUrl === void 0) { useRootUrl = false; }
        var /** @type {?} */ rootUrlPromise = useRootUrl
            ? this.manifestService.getRootUrl()
            : this._getApiRootUrl(includeVersionNumber, preferPreviousApiVersion);
        return rootUrlPromise.pipe(mergeMap(function (rootUrl) {
            return _this.httpClient
                .delete(rootUrl + url)
                .pipe(catchError(_this._handleError));
        }), catchError(this._handleError));
    };
    /**
     * @param {?} err
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype._handleError = /**
     * @param {?} err
     * @return {?}
     */
    function (err) {
        var /** @type {?} */ error = null;
        if (err.error instanceof ErrorEvent) {
            // A client-side or network error occurred. Handle it accordingly.
            error = {
                message: err.error,
                status: err.status,
                statusText: err.statusText
            };
        }
        else {
            // The backend returned an unsuccessful response code.
            // The response body may contain clues as to what went wrong,
            error = {
                message: err.error instanceof Object
                    ? err.error.message
                    : err.error || err.message,
                status: err.status,
                statusText: err.statusText
            };
        }
        return throwError(error);
    };
    /**
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousVersion
     * @return {?}
     */
    NgxDhis2HttpClientService.prototype._getApiRootUrl = /**
     * @param {?=} includeVersionNumber
     * @param {?=} preferPreviousVersion
     * @return {?}
     */
    function (includeVersionNumber, preferPreviousVersion) {
        var _this = this;
        if (includeVersionNumber === void 0) { includeVersionNumber = false; }
        if (preferPreviousVersion === void 0) { preferPreviousVersion = false; }
        var /** @type {?} */ rootUrlPromise = this.manifestService.getRootUrl().pipe(switchMap(function (rootUrl) {
            return _this.systemInfoService.getSystemVersion().pipe(map(function (version) {
                return {
                    rootUrl: rootUrl,
                    version: version - 1 <= 25 ? version + 1 : version
                };
            }));
        }));
        return rootUrlPromise.pipe(map(function (urlInfo) {
            return urlInfo.rootUrl + "api/" + (includeVersionNumber && !preferPreviousVersion
                ? urlInfo.version + '/'
                : preferPreviousVersion
                    ? urlInfo.version
                        ? urlInfo.version - 1 + '/'
                        : ''
                    : '');
        }));
    };
    NgxDhis2HttpClientService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] },
    ];
    /** @nocollapse */
    NgxDhis2HttpClientService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: ManifestService },
        { type: SystemInfoService }
    ]; };
    /** @nocollapse */ NgxDhis2HttpClientService.ngInjectableDef = defineInjectable({ factory: function NgxDhis2HttpClientService_Factory() { return new NgxDhis2HttpClientService(inject(HttpClient), inject(ManifestService), inject(SystemInfoService)); }, token: NgxDhis2HttpClientService, providedIn: "root" });
    return NgxDhis2HttpClientService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var /** @type {?} */ services = [ManifestService, SystemInfoService, NgxDhis2HttpClientService];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { services, ManifestService, SystemInfoService, NgxDhis2HttpClientService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzcHR6LW5neC1kaGlzMi1odHRwLWNsaWVudC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItaHR0cC1jbGllbnQvbGliL3NlcnZpY2VzL21hbmlmZXN0LnNlcnZpY2UudHMiLCJuZzovL0BoaXNwdHovbmd4LWRoaXMyLWh0dHAtY2xpZW50L2xpYi9zZXJ2aWNlcy9zeXN0ZW0taW5mby5zZXJ2aWNlLnRzIiwibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1odHRwLWNsaWVudC9saWIvc2VydmljZXMvbmd4LWRoaXMyLWh0dHAtY2xpZW50LnNlcnZpY2UudHMiLCJuZzovL0BoaXNwdHovbmd4LWRoaXMyLWh0dHAtY2xpZW50L2xpYi9zZXJ2aWNlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgTWFuaWZlc3QgfSBmcm9tICcuLi9tb2RlbHMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRhcCwgY2F0Y2hFcnJvciwgbWFwIH0gZnJvbSAncnhqcy9pbnRlcm5hbC9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSh7cHJvdmlkZWRJbjogJ3Jvb3QnfSlcbmV4cG9ydCBjbGFzcyBNYW5pZmVzdFNlcnZpY2Uge1xuICBwcml2YXRlIF9tYW5pZmVzdDogTWFuaWZlc3Q7XG4gIHByaXZhdGUgX2RlZmF1bHRSb290VXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgX21hbmlmZXN0TG9hZGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCkge1xuICAgIHRoaXMuX2RlZmF1bHRSb290VXJsID0gJy4uLy4uLy4uLyc7XG4gICAgdGhpcy5fbWFuaWZlc3RMb2FkZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYW5pZmVzdCgpOiBPYnNlcnZhYmxlPE1hbmlmZXN0PiB7XG4gICAgcmV0dXJuIHRoaXMuX21hbmlmZXN0TG9hZGVkID8gb2YodGhpcy5fbWFuaWZlc3QpIDogdGhpcy5odHRwQ2xpZW50LmdldDxNYW5pZmVzdD4oJ21hbmlmZXN0LndlYmFwcCcpLnBpcGUoXG4gICAgICBjYXRjaEVycm9yKCgpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYW5pZmVzdCBmaWxlIGNvdWxkIG5vdCBiZSBsb2FkZWQsIGRlZmF1bHQgb3B0aW9ucyBoYXZlIGJlZW4gdXNlZCBpbnN0ZWFkJyk7XG4gICAgICAgIHJldHVybiBvZihudWxsKTtcbiAgICAgIH0pLFxuICAgICAgdGFwKChtYW5pZmVzdCkgPT4ge1xuICAgICAgICB0aGlzLl9tYW5pZmVzdCA9IG1hbmlmZXN0O1xuICAgICAgICB0aGlzLl9tYW5pZmVzdExvYWRlZCA9IHRydWU7XG4gICAgICB9KSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Um9vdFVybCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmdldE1hbmlmZXN0KCkucGlwZShtYXAoKG1hbmlmZXN0OiBNYW5pZmVzdCkgPT4ge1xuICAgICAgaWYgKCFtYW5pZmVzdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdFJvb3RVcmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFuaWZlc3QuYWN0aXZpdGllcyAmJiBtYW5pZmVzdC5hY3Rpdml0aWVzLmRoaXMgJiYgbWFuaWZlc3QuYWN0aXZpdGllcy5kaGlzLmhyZWYgP1xuICAgICAgICBtYW5pZmVzdC5hY3Rpdml0aWVzLmRoaXMuaHJlZiA6IHRoaXMuX2RlZmF1bHRSb290VXJsO1xuICAgIH0pKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZm9ya0pvaW4sIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBNYW5pZmVzdFNlcnZpY2UgfSBmcm9tICcuL21hbmlmZXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgbWFwLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvaW50ZXJuYWwvb3BlcmF0b3JzJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbkBJbmplY3RhYmxlKHtwcm92aWRlZEluOiAncm9vdCd9KVxuZXhwb3J0IGNsYXNzIFN5c3RlbUluZm9TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfc3lzdGVtSW5mb0xvYWRlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfc3lzdGVtSW5mbzogYW55O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWFuaWZlc3RTZXJ2aWNlOiBNYW5pZmVzdFNlcnZpY2UsIHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCkge1xuICAgIHRoaXMuX3N5c3RlbUluZm9Mb2FkZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGdldFN5c3RlbUluZm8oKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5fc3lzdGVtSW5mb0xvYWRlZCA/IG9mKHRoaXMuX3N5c3RlbUluZm8pIDpcbiAgICAgIHRoaXMubWFuaWZlc3RTZXJ2aWNlLmdldFJvb3RVcmwoKS5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKHJvb3RVcmw6IHN0cmluZykgPT4gZm9ya0pvaW4odGhpcy5odHRwQ2xpZW50LmdldChgJHtyb290VXJsfWFwaS9zeXN0ZW0vaW5mb2ApLFxuICAgICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXQoYCR7cm9vdFVybH1hcGkvc3lzdGVtU2V0dGluZ3NgKSkucGlwZShtYXAoKHJlczogYW55W10pID0+IHtcbiAgICAgICAgICByZXR1cm4gey4uLnJlc1swXSwgLi4ucmVzWzFdfTtcbiAgICAgICAgfSksIHRhcCgoc3lzdGVtSW5mbzogYW55KSA9PiB7XG4gICAgICAgICAgdGhpcy5fc3lzdGVtSW5mbyA9IHN5c3RlbUluZm87XG4gICAgICAgICAgdGhpcy5fc3lzdGVtSW5mb0xvYWRlZCA9IHRydWU7XG4gICAgICAgIH0pKSkpO1xuICB9XG5cbiAgcHVibGljIGdldFN5c3RlbVZlcnNpb24oKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRTeXN0ZW1JbmZvKCkucGlwZShtYXAoKHN5c3RlbUluZm86IGFueSkgPT4ge1xuICAgICAgaWYgKCFzeXN0ZW1JbmZvKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BsaXRlZFZlcnNpb24gPSBzeXN0ZW1JbmZvLnZlcnNpb24gPyBzeXN0ZW1JbmZvLnZlcnNpb24uc3BsaXQoJy4nKSA6IFtdO1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0ZWRWZXJzaW9uWzFdLCAxMCkgfHwgMDtcbiAgICB9KSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgTWFuaWZlc3RTZXJ2aWNlIH0gZnJvbSAnLi9tYW5pZmVzdC5zZXJ2aWNlJztcbmltcG9ydCB7IFN5c3RlbUluZm9TZXJ2aWNlIH0gZnJvbSAnLi9zeXN0ZW0taW5mby5zZXJ2aWNlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNhdGNoRXJyb3IsIG1hcCwgbWVyZ2VNYXAsIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvaW50ZXJuYWwvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcbmV4cG9ydCBjbGFzcyBOZ3hEaGlzMkh0dHBDbGllbnRTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgbWFuaWZlc3RTZXJ2aWNlOiBNYW5pZmVzdFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBzeXN0ZW1JbmZvU2VydmljZTogU3lzdGVtSW5mb1NlcnZpY2VcbiAgKSB7fVxuXG4gIGdldChcbiAgICB1cmw6IHN0cmluZyxcbiAgICBpbmNsdWRlVmVyc2lvbk51bWJlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHVzZVJvb3RVcmw6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IHJvb3RVcmxQcm9taXNlID0gdXNlUm9vdFVybFxuICAgICAgPyB0aGlzLm1hbmlmZXN0U2VydmljZS5nZXRSb290VXJsKClcbiAgICAgIDogdGhpcy5fZ2V0QXBpUm9vdFVybChpbmNsdWRlVmVyc2lvbk51bWJlciwgcHJlZmVyUHJldmlvdXNBcGlWZXJzaW9uKTtcblxuICAgIHJldHVybiByb290VXJsUHJvbWlzZS5waXBlKFxuICAgICAgbWVyZ2VNYXAocm9vdFVybCA9PlxuICAgICAgICB0aGlzLmh0dHBDbGllbnQuZ2V0KHJvb3RVcmwgKyB1cmwpLnBpcGUoY2F0Y2hFcnJvcih0aGlzLl9oYW5kbGVFcnJvcikpXG4gICAgICApLFxuICAgICAgY2F0Y2hFcnJvcih0aGlzLl9oYW5kbGVFcnJvcilcbiAgICApO1xuICB9XG5cbiAgcG9zdChcbiAgICB1cmw6IHN0cmluZyxcbiAgICBkYXRhOiBhbnksXG4gICAgaW5jbHVkZVZlcnNpb25OdW1iZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBwcmVmZXJQcmV2aW91c0FwaVZlcnNpb246IGJvb2xlYW4gPSBmYWxzZSxcbiAgICB1c2VSb290VXJsOiBib29sZWFuID0gZmFsc2UsXG4gICAgaGVhZGVyT3B0aW9ucz86IGFueVxuICApIHtcbiAgICBjb25zdCByb290VXJsUHJvbWlzZSA9IHVzZVJvb3RVcmxcbiAgICAgID8gdGhpcy5tYW5pZmVzdFNlcnZpY2UuZ2V0Um9vdFVybCgpXG4gICAgICA6IHRoaXMuX2dldEFwaVJvb3RVcmwoaW5jbHVkZVZlcnNpb25OdW1iZXIsIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbik7XG4gICAgcmV0dXJuIHJvb3RVcmxQcm9taXNlLnBpcGUoXG4gICAgICBtZXJnZU1hcChyb290VXJsID0+XG4gICAgICAgIHRoaXMuaHR0cENsaWVudFxuICAgICAgICAgIC5wb3N0KHJvb3RVcmwgKyB1cmwsIGRhdGEpXG4gICAgICAgICAgLnBpcGUoY2F0Y2hFcnJvcih0aGlzLl9oYW5kbGVFcnJvcikpXG4gICAgICApLFxuICAgICAgY2F0Y2hFcnJvcih0aGlzLl9oYW5kbGVFcnJvcilcbiAgICApO1xuICB9XG5cbiAgcHV0KFxuICAgIHVybDogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBpbmNsdWRlVmVyc2lvbk51bWJlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHVzZVJvb3RVcmw6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBjb25zdCByb290VXJsUHJvbWlzZSA9IHVzZVJvb3RVcmxcbiAgICAgID8gdGhpcy5tYW5pZmVzdFNlcnZpY2UuZ2V0Um9vdFVybCgpXG4gICAgICA6IHRoaXMuX2dldEFwaVJvb3RVcmwoaW5jbHVkZVZlcnNpb25OdW1iZXIsIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbik7XG5cbiAgICByZXR1cm4gcm9vdFVybFByb21pc2UucGlwZShcbiAgICAgIG1lcmdlTWFwKHJvb3RVcmwgPT5cbiAgICAgICAgdGhpcy5odHRwQ2xpZW50XG4gICAgICAgICAgLnB1dChyb290VXJsICsgdXJsLCBkYXRhKVxuICAgICAgICAgIC5waXBlKGNhdGNoRXJyb3IodGhpcy5faGFuZGxlRXJyb3IpKVxuICAgICAgKSxcbiAgICAgIGNhdGNoRXJyb3IodGhpcy5faGFuZGxlRXJyb3IpXG4gICAgKTtcbiAgfVxuXG4gIGRlbGV0ZShcbiAgICB1cmw6IHN0cmluZyxcbiAgICBpbmNsdWRlVmVyc2lvbk51bWJlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbjogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHVzZVJvb3RVcmw6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBjb25zdCByb290VXJsUHJvbWlzZSA9IHVzZVJvb3RVcmxcbiAgICAgID8gdGhpcy5tYW5pZmVzdFNlcnZpY2UuZ2V0Um9vdFVybCgpXG4gICAgICA6IHRoaXMuX2dldEFwaVJvb3RVcmwoaW5jbHVkZVZlcnNpb25OdW1iZXIsIHByZWZlclByZXZpb3VzQXBpVmVyc2lvbik7XG5cbiAgICByZXR1cm4gcm9vdFVybFByb21pc2UucGlwZShcbiAgICAgIG1lcmdlTWFwKHJvb3RVcmwgPT5cbiAgICAgICAgdGhpcy5odHRwQ2xpZW50XG4gICAgICAgICAgLmRlbGV0ZShyb290VXJsICsgdXJsKVxuICAgICAgICAgIC5waXBlKGNhdGNoRXJyb3IodGhpcy5faGFuZGxlRXJyb3IpKVxuICAgICAgKSxcbiAgICAgIGNhdGNoRXJyb3IodGhpcy5faGFuZGxlRXJyb3IpXG4gICAgKTtcbiAgfVxuXG4gIC8vIHByaXZhdGUgbWV0aG9kc1xuICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnI6IEh0dHBFcnJvclJlc3BvbnNlKSB7XG4gICAgbGV0IGVycm9yID0gbnVsbDtcbiAgICBpZiAoZXJyLmVycm9yIGluc3RhbmNlb2YgRXJyb3JFdmVudCkge1xuICAgICAgLy8gQSBjbGllbnQtc2lkZSBvciBuZXR3b3JrIGVycm9yIG9jY3VycmVkLiBIYW5kbGUgaXQgYWNjb3JkaW5nbHkuXG4gICAgICBlcnJvciA9IHtcbiAgICAgICAgbWVzc2FnZTogZXJyLmVycm9yLFxuICAgICAgICBzdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IGVyci5zdGF0dXNUZXh0XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgYmFja2VuZCByZXR1cm5lZCBhbiB1bnN1Y2Nlc3NmdWwgcmVzcG9uc2UgY29kZS5cbiAgICAgIC8vIFRoZSByZXNwb25zZSBib2R5IG1heSBjb250YWluIGNsdWVzIGFzIHRvIHdoYXQgd2VudCB3cm9uZyxcbiAgICAgIGVycm9yID0ge1xuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIGVyci5lcnJvciBpbnN0YW5jZW9mIE9iamVjdFxuICAgICAgICAgICAgPyBlcnIuZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgOiBlcnIuZXJyb3IgfHwgZXJyLm1lc3NhZ2UsXG4gICAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyLnN0YXR1c1RleHRcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9yKTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEFwaVJvb3RVcmwoXG4gICAgaW5jbHVkZVZlcnNpb25OdW1iZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBwcmVmZXJQcmV2aW91c1ZlcnNpb246IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBjb25zdCByb290VXJsUHJvbWlzZSA9IHRoaXMubWFuaWZlc3RTZXJ2aWNlLmdldFJvb3RVcmwoKS5waXBlKFxuICAgICAgc3dpdGNoTWFwKHJvb3RVcmwgPT5cbiAgICAgICAgdGhpcy5zeXN0ZW1JbmZvU2VydmljZS5nZXRTeXN0ZW1WZXJzaW9uKCkucGlwZShcbiAgICAgICAgICBtYXAoKHZlcnNpb246IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcm9vdFVybCxcbiAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbiAtIDEgPD0gMjUgPyB2ZXJzaW9uICsgMSA6IHZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHJvb3RVcmxQcm9taXNlLnBpcGUoXG4gICAgICBtYXAoXG4gICAgICAgICh1cmxJbmZvOiB7IHJvb3RVcmw6IHN0cmluZzsgdmVyc2lvbjogbnVtYmVyIH0pID0+XG4gICAgICAgICAgYCR7dXJsSW5mby5yb290VXJsfWFwaS8ke1xuICAgICAgICAgICAgaW5jbHVkZVZlcnNpb25OdW1iZXIgJiYgIXByZWZlclByZXZpb3VzVmVyc2lvblxuICAgICAgICAgICAgICA/IHVybEluZm8udmVyc2lvbiArICcvJ1xuICAgICAgICAgICAgICA6IHByZWZlclByZXZpb3VzVmVyc2lvblxuICAgICAgICAgICAgICAgID8gdXJsSW5mby52ZXJzaW9uXG4gICAgICAgICAgICAgICAgICA/IHVybEluZm8udmVyc2lvbiAtIDEgKyAnLydcbiAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgfWBcbiAgICAgIClcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNYW5pZmVzdFNlcnZpY2UgfSBmcm9tICcuL21hbmlmZXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgU3lzdGVtSW5mb1NlcnZpY2UgfSBmcm9tICcuL3N5c3RlbS1pbmZvLnNlcnZpY2UnO1xuaW1wb3J0IHsgTmd4RGhpczJIdHRwQ2xpZW50U2VydmljZSB9IGZyb20gJy4vbmd4LWRoaXMyLWh0dHAtY2xpZW50LnNlcnZpY2UnO1xuXG5leHBvcnQgY29uc3Qgc2VydmljZXM6IGFueVtdID0gW01hbmlmZXN0U2VydmljZSwgU3lzdGVtSW5mb1NlcnZpY2UsIE5neERoaXMySHR0cENsaWVudFNlcnZpY2VdO1xuXG5leHBvcnQgKiBmcm9tICcuL21hbmlmZXN0LnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9zeXN0ZW0taW5mby5zZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vbmd4LWRoaXMyLWh0dHAtY2xpZW50LnNlcnZpY2UnO1xuIl0sIm5hbWVzIjpbXSwibWFwcGlu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
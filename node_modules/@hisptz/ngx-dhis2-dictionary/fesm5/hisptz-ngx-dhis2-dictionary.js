import { createEntityAdapter } from '@ngrx/entity';
import { createFeatureSelector, createSelector, Store, StoreModule } from '@ngrx/store';
import { filter, find, map } from 'lodash';
import { ChangeDetectionStrategy, Component, Input, Injectable, NgModule } from '@angular/core';
import { __decorate, __metadata } from 'tslib';
import { DatePipe, CommonModule } from '@angular/common';
import { Actions, Effect, ofType, EffectsModule } from '@ngrx/effects';
import { mergeMap, map as map$1, tap } from 'rxjs/operators';
import { Observable, from, forkJoin } from 'rxjs';
import { NgxDhis2HttpClientService } from '@hisptz/ngx-dhis2-http-client';
import { HttpClientModule } from '@angular/common/http';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
var DictionaryActionTypes = {
    InitializeDictionaryMetadata: '[Dictionary] initialize incoming metadata',
    AddDictionaryMetadataList: '[Dictionary] add dictionary metadata list',
    UpdateDictionaryMetadata: '[Dictionary] update dictionary metadata list',
};
var InitializeDictionaryMetadataAction = /** @class */ (function () {
    function InitializeDictionaryMetadataAction(dictionaryMetadataIdentifiers) {
        this.dictionaryMetadataIdentifiers = dictionaryMetadataIdentifiers;
        this.type = DictionaryActionTypes.InitializeDictionaryMetadata;
    }
    return InitializeDictionaryMetadataAction;
}());
var AddDictionaryMetadataListAction = /** @class */ (function () {
    function AddDictionaryMetadataListAction(dictionaryMetadataList) {
        this.dictionaryMetadataList = dictionaryMetadataList;
        this.type = DictionaryActionTypes.AddDictionaryMetadataList;
    }
    return AddDictionaryMetadataListAction;
}());
var UpdateDictionaryMetadataAction = /** @class */ (function () {
    function UpdateDictionaryMetadataAction(dictionaryMetadataId, changes) {
        this.dictionaryMetadataId = dictionaryMetadataId;
        this.changes = changes;
        this.type = DictionaryActionTypes.UpdateDictionaryMetadata;
    }
    return UpdateDictionaryMetadataAction;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var /** @type {?} */ dictionaryAdapter = createEntityAdapter();
var /** @type {?} */ initialState = dictionaryAdapter.getInitialState({});
/**
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
function dictionaryReducer(state, action) {
    if (state === void 0) { state = initialState; }
    switch (action.type) {
        case DictionaryActionTypes.AddDictionaryMetadataList: {
            return dictionaryAdapter.addMany(action.dictionaryMetadataList, state);
        }
        case DictionaryActionTypes.UpdateDictionaryMetadata: {
            return dictionaryAdapter.updateOne({ id: action.dictionaryMetadataId, changes: action.changes }, state);
        }
    }
    return state;
}
var /** @type {?} */ getDictionaryState = createFeatureSelector('dictionary');
var getDictionaryMetadataEntities = dictionaryAdapter.getSelectors(getDictionaryState).selectEntities;

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var /** @type {?} */ getDictionaryList = function (metadataIdentifiers) {
    return createSelector(getDictionaryMetadataEntities, function (dictionaryMetadataEntities) {
        return filter(map(metadataIdentifiers, function (metadataId) { return dictionaryMetadataEntities[metadataId]; }), function (metadata) { return metadata; });
    });
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var DictionaryListComponent = /** @class */ (function () {
    function DictionaryListComponent(store) {
        this.store = store;
        this.activeItem = 0;
    }
    /**
     * @return {?}
     */
    DictionaryListComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.metadataIdentifiers.length > 0) {
            this.store.dispatch(new InitializeDictionaryMetadataAction(this.metadataIdentifiers));
            this.dictionaryList$ = this.store.select(getDictionaryList(this.metadataIdentifiers));
        }
    };
    /**
     * @param {?} index
     * @param {?} e
     * @return {?}
     */
    DictionaryListComponent.prototype.setActiveItem = /**
     * @param {?} index
     * @param {?} e
     * @return {?}
     */
    function (index, e) {
        e.stopPropagation();
        if (this.activeItem === index) {
            this.activeItem = -1;
        }
        else {
            this.activeItem = index;
        }
    };
    DictionaryListComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'ngx-dhis2-dictionary-list',
                    template: "<div class=\"dictionary-list-container\">\n  <div\n    class=\"dictionary-item-container\"\n    *ngFor=\"let dictionaryItem of dictionaryList$ | async; let i = index\"\n  >\n    <div\n      class=\"dictionary-title\"\n      (click)=\"setActiveItem(i, $event)\"\n    >\n      <span>{{ dictionaryItem.name }}</span>\n      <div *ngIf=\"!dictionaryItem.name\">\n        <app-dictionary-progress></app-dictionary-progress>\n      </div>\n    </div>\n    <div\n      class=\"dictionary-body\"\n      *ngIf=\"activeItem === i\"\n    >\n      <div class=\"dictionary-description\" [innerHtml]=\"dictionaryItem.description\"></div>\n      <div *ngIf=\"dictionaryItem.progress.loading\">\n        <app-dictionary-progress></app-dictionary-progress>\n      </div>\n    </div>\n  </div>\n</div>\n",
                    styles: [".dictionary-list-container{box-shadow:0 0 3px rgba(0,0,0,.3)}.dictionary-item-container{border-bottom:thin solid #ececec}.dictionary-title{padding:5px 10px;cursor:pointer}.dictionary-item-container:last-child{border-bottom-style:none}.dictionary-body{border-top:thin solid #ececec;padding:10px}.dictionary-description{text-align:justify}"],
                    changeDetection: ChangeDetectionStrategy.OnPush
                },] },
    ];
    /** @nocollapse */
    DictionaryListComponent.ctorParameters = function () { return [
        { type: Store }
    ]; };
    DictionaryListComponent.propDecorators = {
        metadataIdentifiers: [{ type: Input }]
    };
    return DictionaryListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var DictionaryProgressComponent = /** @class */ (function () {
    function DictionaryProgressComponent() {
    }
    /**
     * @return {?}
     */
    DictionaryProgressComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    DictionaryProgressComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'app-dictionary-progress',
                    template: "<div class=\"dictionary-progress\">\n    <div class=\"animated-background\"></div>\n</div>",
                    styles: [".dictionary-progress div{height:5px;margin-top:3px}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}.animated-background{-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:#f6f7f8;background:linear-gradient(to right,#eee 8%,#ddd 18%,#eee 33%);background-size:800px 104px;height:100%;position:relative}"]
                },] },
    ];
    /** @nocollapse */
    DictionaryProgressComponent.ctorParameters = function () { return []; };
    return DictionaryProgressComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var DictionaryEffects = /** @class */ (function () {
    function DictionaryEffects(actions$, store, httpClient, datePipe) {
        var _this = this;
        this.actions$ = actions$;
        this.store = store;
        this.httpClient = httpClient;
        this.datePipe = datePipe;
        this.initializeDictionary$ = this.actions$.pipe(ofType(DictionaryActionTypes.InitializeDictionaryMetadata), mergeMap(function (action) {
            return _this.store
                .select(getDictionaryList(action.dictionaryMetadataIdentifiers))
                .pipe(map$1(function (dictionaryList) {
                return filter(action.dictionaryMetadataIdentifiers, function (metadataId) { return !find(dictionaryList, ['id', metadataId]); });
            }));
        }), tap(function (identifiers) {
            /**
                   * Add incoming items to the dictionary list
                   */
            /**
             * Add incoming items to the dictionary list
             */
            _this.store.dispatch(new AddDictionaryMetadataListAction(map(identifiers, function (id) {
                return {
                    id: id,
                    name: '',
                    description: '',
                    progress: {
                        loading: true,
                        loadingSucceeded: false,
                        loadingFailed: false
                    }
                };
            })));
            /**
                   * Identify corresponding dictionary items
                   */
            from(identifiers)
                .pipe(mergeMap(function (identifier) {
                return _this.httpClient.get("identifiableObjects/" + identifier + ".json", true);
            }))
                .subscribe(function (metadata) {
                _this.store.dispatch(new UpdateDictionaryMetadataAction(metadata.id, {
                    name: metadata.name,
                    progress: {
                        loading: true,
                        loadingSucceeded: true,
                        loadingFailed: false
                    }
                }));
                if (metadata.href && metadata.href.indexOf('indicator') !== -1) {
                    var /** @type {?} */ indicatorUrl = 'indicators/' +
                        metadata.id +
                        '.json?fields=:all,displayName,id,name,numeratorDescription,' +
                        'denominatorDescription,denominator,numerator,annualized,decimals,indicatorType[name],user[name],' +
                        'attributeValues[value,attribute[name]],indicatorGroups[name,indicators~size],legendSet[name,symbolizer,' +
                        'legends~size],dataSets[name]';
                    _this.getIndicatorInfo(indicatorUrl, metadata.id);
                }
                else if (metadata.href &&
                    metadata.href.indexOf('dataElement') !== -1) {
                    var /** @type {?} */ dataElementUrl = 'dataElements/' +
                        metadata.id +
                        '.json?fields=:all,id,name,aggregationType,displayName,' +
                        'categoryCombo[id,name,categories[id,name,categoryOptions[id,name]]],dataSets[:all,!compulsoryDataElementOperands]';
                    _this.getDataElementInfo(dataElementUrl, metadata.id);
                }
                else if (metadata.href && metadata.href.indexOf('dataSet') !== -1) {
                    var /** @type {?} */ dataSetUrl = 'dataSets/' +
                        metadata.id +
                        '.json?fields=:all,user[:all],id,name,periodType,shortName,' +
                        'categoryCombo[id,name,categories[id,name,categoryOptions[id,name]]]';
                    _this.getDataSetInfo(dataSetUrl, metadata.id);
                }
            });
        }));
    }
    /**
     * @param {?} dataSetUrl
     * @param {?} dataSetId
     * @return {?}
     */
    DictionaryEffects.prototype.getDataSetInfo = /**
     * @param {?} dataSetUrl
     * @param {?} dataSetId
     * @return {?}
     */
    function (dataSetUrl, dataSetId) {
        var _this = this;
        this.httpClient.get("" + dataSetUrl, true).subscribe(function (dataSet) {
            var /** @type {?} */ dataSetDescription = '<p>' +
                dataSet.name +
                ' of the <strong>' +
                dataSet.formType +
                '</strong> Form created ' +
                'at <strong>' +
                _this.datePipe.transform(dataSet.created) +
                ' by ' +
                dataSet.user.name +
                '</strong>';
            if (dataSet.categoryCombo && dataSet.categoryCombo.name !== 'default') {
                dataSetDescription +=
                    '<span> With <strong>' +
                        dataSet.categoryCombo.name +
                        '</strong> Dimension which is divided' +
                        ' into ';
                dataSet.categoryCombo.categories.forEach(function (category, categoryIndex) {
                    if (categoryIndex !== 0 &&
                        categoryIndex !== dataSet.categoryCombo.categories.length - 1) {
                        dataSetDescription += ', ';
                    }
                    if (categoryIndex === dataSet.categoryCombo.categories.length - 1 &&
                        dataSet.categoryCombo.categories.length > 1) {
                        dataSetDescription += ' and ';
                    }
                    dataSetDescription += '<strong>';
                    category.categoryOptions.forEach(function (categoryOption, categoryOptionIndex) {
                        if (categoryOptionIndex !== 0 &&
                            categoryOptionIndex !== category.categoryOptions.length - 1) {
                            dataSetDescription += ', ';
                        }
                        if (categoryOptionIndex === category.categoryOptions.length - 1 &&
                            category.categoryOptions.length > 1) {
                            dataSetDescription += ' and ';
                        }
                        dataSetDescription += '<span>' + categoryOption.name + '</span>';
                    });
                    dataSetDescription += '</strong>';
                });
                dataSetDescription += '</span>';
            }
            dataSetDescription += '</p>';
            _this.store.dispatch(new UpdateDictionaryMetadataAction(dataSetId, {
                description: dataSetDescription,
                progress: {
                    loading: false,
                    loadingSucceeded: true,
                    loadingFailed: false
                }
            }));
        });
    };
    /**
     * @param {?} dataElementUrl
     * @param {?} dataElementId
     * @return {?}
     */
    DictionaryEffects.prototype.getDataElementInfo = /**
     * @param {?} dataElementUrl
     * @param {?} dataElementId
     * @return {?}
     */
    function (dataElementUrl, dataElementId) {
        var _this = this;
        this.httpClient
            .get("" + dataElementUrl, true)
            .subscribe(function (dataElement) {
            var /** @type {?} */ dataElementDescription = '<p>This ' +
                dataElement.name +
                ' of this method of data aggregation <strong>' +
                dataElement.aggregationType +
                '</strong> created at <strong>' +
                _this.datePipe.transform(dataElement.created) +
                '</strong> is only taking <strong>' +
                dataElement.domainType +
                '</strong> data. As the culture of helping user ' +
                'not entering unrecognized data, therefore its only taking <strong>' +
                dataElement.valueType +
                '</strong> values ' +
                'from the user input</p>';
            if (dataElement.categoryCombo.name !== 'default') {
                dataElementDescription +=
                    '<p><strong>' +
                        dataElement.name +
                        '</strong> consists of <strong>' +
                        dataElement.categoryCombo.name +
                        '</strong> category combinations of ';
                dataElement.categoryCombo.categories.forEach(function (category, index) {
                    if (index !== 0 &&
                        index !== dataElement.categoryCombo.categories.length - 1) {
                        dataElementDescription += ', ';
                    }
                    if (index === dataElement.categoryCombo.categories.length - 1 &&
                        dataElement.categoryCombo.categories.length > 1) {
                        dataElementDescription += ' and ';
                    }
                    dataElementDescription += '<strong>(';
                    category.categoryOptions.forEach(function (categoryOption, categoryOptionIndex) {
                        if (categoryOptionIndex !== 0 &&
                            categoryOptionIndex !== category.categoryOptions.length - 1) {
                            dataElementDescription += ', ';
                        }
                        if (categoryOptionIndex === category.categoryOptions.length - 1 &&
                            category.categoryOptions.length > 1) {
                            dataElementDescription += ' and ';
                        }
                        dataElementDescription +=
                            '<span>' + categoryOption.name + '</span>';
                    });
                    dataElementDescription +=
                        ')</strong> of the <strong>' +
                            category.name +
                            '</strong> category';
                });
                dataElementDescription += '</strong></p>';
                // TODO deal with different version of dhis
                if (dataElement.dataSets && dataElement.dataSets.length > 0) {
                    dataElementDescription +=
                        '<h5>' + dataElement.name + ' Sources</h5>';
                    dataElementDescription +=
                        '<p>More than <strong>' +
                            dataElement.dataSets.length +
                            '</strong> dataset ie ';
                    dataElement.dataSets.forEach(function (dataSet, dataSetIndex) {
                        if (dataSetIndex !== 0 &&
                            dataSetIndex !== dataElement.dataSets.length - 1) {
                            dataElementDescription += ', ';
                        }
                        if (dataSetIndex === dataElement.dataSets.length - 1 &&
                            dataElement.dataSets.length > 1) {
                            dataElementDescription += ' and ';
                        }
                        dataElementDescription +=
                            '<strong>' + dataSet.name + '</strong>';
                    });
                    dataElementDescription +=
                        ' use this ' + dataElement.name + ' data element';
                    if (dataElement.dataElementGroups &&
                        dataElement.dataElementGroups.length > 0) {
                        dataElementDescription += ' and it belongs to ';
                        dataElement.dataElementGroups.forEach(function (dataElementGroup, dataElementGroupIndex) {
                            if (dataElementGroupIndex !== 0 &&
                                dataElementGroupIndex !==
                                    dataElement.dataElementGroups.length - 1) {
                                dataElementDescription += ', ';
                            }
                            if (dataElementGroupIndex ===
                                dataElement.dataElementGroups.length - 1 &&
                                dataElement.dataElementGroups.length > 1) {
                                dataElementDescription += ' and ';
                            }
                            dataElementDescription +=
                                '<strong>' + dataElementGroup.name + ' Group</strong>';
                        });
                    }
                    dataElementDescription += '</p>';
                }
                _this.store.dispatch(new UpdateDictionaryMetadataAction(dataElementId, {
                    description: dataElementDescription,
                    progress: {
                        loading: false,
                        loadingSucceeded: true,
                        loadingFailed: false
                    }
                }));
            }
        });
    };
    /**
     * @param {?} indicatorUrl
     * @param {?} indicatorId
     * @return {?}
     */
    DictionaryEffects.prototype.getIndicatorInfo = /**
     * @param {?} indicatorUrl
     * @param {?} indicatorId
     * @return {?}
     */
    function (indicatorUrl, indicatorId) {
        var _this = this;
        this.httpClient.get("" + indicatorUrl, true).subscribe(function (indicator) {
            var /** @type {?} */ indicatorDescription = '<p><strong>' +
                indicator.name +
                '</strong> is a <strong>' +
                indicator.indicatorType.name +
                ' </strong> indicator';
            if (indicator.numeratorDescription) {
                indicatorDescription +=
                    '<span> with the numerator described as <strong>' +
                        indicator.numeratorDescription +
                        '</strong></span>';
            }
            if (indicator.denominatorDescription) {
                indicatorDescription +=
                    '<span> and denominator described as <strong>' +
                        indicator.denominatorDescription +
                        '</strong></span>';
            }
            indicatorDescription += '</p>';
            if (indicator.annualized) {
                indicatorDescription +=
                    '<p><span>It’s figure is annualized to support analysis in less than year period ' +
                        '(monthly,quarterly,semi-annually)</span></p>';
            }
            _this.store.dispatch(new UpdateDictionaryMetadataAction(indicatorId, {
                description: indicatorDescription,
                progress: {
                    loading: true,
                    loadingSucceeded: true,
                    loadingFailed: false
                }
            }));
            /**
                   * Get numerator expression
                   */
            forkJoin(_this.httpClient.get('expressions/description?expression=' +
                encodeURIComponent(indicator.numerator), true), _this.httpClient.get('dataSets.json?fields=periodType,id,name,timelyDays,formType,created,expiryDays&' +
                'filter=dataSetElements.dataElement.id:in:[' +
                _this.getAvailableDataElements(indicator.numerator) +
                ']&paging=false', true)).subscribe(function (numeratorResults) {
                if (numeratorResults[0]) {
                    indicatorDescription +=
                        '<p>Numerator is calculated from <strong>' +
                            numeratorResults[0].description +
                            '</strong>';
                }
                if (numeratorResults[1] && numeratorResults[1].dataSets) {
                    var /** @type {?} */ dataSets_1 = numeratorResults[1].dataSets;
                    if (dataSets_1.length > 0) {
                        indicatorDescription += ' originating from ';
                    }
                    dataSets_1.forEach(function (dataset, index) {
                        if (index !== 0 && index !== dataSets_1.length - 1) {
                            indicatorDescription += ', ';
                        }
                        if (index === dataSets_1.length - 1 && dataSets_1.length > 1) {
                            indicatorDescription += ' and ';
                        }
                        indicatorDescription +=
                            '<span><strong>' +
                                dataset.name +
                                ',</strong> that is collected <strong>' +
                                dataset.periodType +
                                '</strong> with deadline for submission after <strong>' +
                                dataset.timelyDays +
                                ' days </strong></span>';
                    });
                }
                indicatorDescription += "</p>";
                _this.store.dispatch(new UpdateDictionaryMetadataAction(indicatorId, {
                    description: indicatorDescription,
                    progress: {
                        loading: true,
                        loadingSucceeded: true,
                        loadingFailed: false
                    }
                }));
                /**
                         * Get denominator expression
                         */
                forkJoin(_this.httpClient.get('expressions/description?expression=' +
                    encodeURIComponent(indicator.denominator), true), _this.httpClient.get('dataSets.json?fields=periodType,id,name,timelyDays,formType,created,expiryDays&' +
                    'filter=dataSetElements.dataElement.id:in:[' +
                    _this.getAvailableDataElements(indicator.denominator) +
                    ']&paging=false', true)).subscribe(function (denominatorResults) {
                    if (denominatorResults[0]) {
                        indicatorDescription +=
                            '<p>Denominator is calculated from <strong>' +
                                denominatorResults[0].description +
                                '</strong>';
                    }
                    if (denominatorResults[1] && denominatorResults[1].dataSets) {
                        var /** @type {?} */ dataSets_2 = denominatorResults[1].dataSets;
                        if (dataSets_2.length > 0) {
                            indicatorDescription += ' originating from ';
                        }
                        dataSets_2.forEach(function (dataset, index) {
                            if (index !== 0 && index !== dataSets_2.length - 1) {
                                indicatorDescription += ', ';
                            }
                            if (index === dataSets_2.length - 1 && dataSets_2.length > 1) {
                                indicatorDescription += ' and ';
                            }
                            indicatorDescription +=
                                '<span><strong>' +
                                    dataset.name +
                                    ',</strong> that is collected <strong>' +
                                    dataset.periodType +
                                    '</strong> with deadline for submission after <strong>' +
                                    dataset.timelyDays +
                                    ' days </strong></span>';
                        });
                    }
                    indicatorDescription += "</p>";
                    /**
                               * Indicator group
                               */
                    if (indicator.indicatorGroups &&
                        indicator.indicatorGroups.length > 0) {
                        indicatorDescription += '<div><p>It belongs to ';
                        indicator.indicatorGroups.forEach(function (indicatorGroup, index) {
                            if (index !== 0 &&
                                index !== indicator.indicatorGroups.length - 1) {
                                indicatorDescription += ', ';
                            }
                            if (index === indicator.indicatorGroups.length - 1 &&
                                indicator.indicatorGroups.length > 1) {
                                indicatorDescription += ' and ';
                            }
                            indicatorDescription +=
                                '<span><strong>' +
                                    indicatorGroup.name +
                                    '</strong> with <strong>' +
                                    indicatorGroup.indicators +
                                    '</strong> other related indicators</span>';
                        });
                        indicatorDescription += '</p></div>';
                    }
                    /**
                               * Attribute values
                               */
                    if (indicator.attributeValues &&
                        indicator.attributeValues.length > 0) {
                        indicatorDescription +=
                            '<div><p>Other related details associated with this indicators includes: ';
                        indicator.attributeValues.forEach(function (attr) {
                            indicatorDescription +=
                                '<span><strong>' +
                                    attr.attribute.name +
                                    ': ' +
                                    attr.value +
                                    '</strong></span>';
                        });
                        indicatorDescription += '</p></div>';
                    }
                    /**
                               * Legend set
                               */
                    if (indicator.legendSet) {
                        indicatorDescription +=
                            '<div><p> It makes use of: <strong>' +
                                indicator.legendSet.name +
                                '</strong> legend' +
                                ' set for analysis with <strong>' +
                                indicator.legendSet.legends +
                                ' Classes </strong>using <strong>' +
                                indicator.legendSet.symbolizer +
                                ' for analysis</strong></p></div>';
                    }
                    /**
                               * User info
                               */
                    if (indicator.user) {
                        indicatorDescription +=
                            '<div><p>This indicator was <strong> first created </strong> in the system on <strong>' +
                                _this.datePipe.transform(indicator.created) +
                                '</strong> by <strong>' +
                                indicator.user.name +
                                '</strong></p></div>';
                    }
                    _this.store.dispatch(new UpdateDictionaryMetadataAction(indicatorId, {
                        description: indicatorDescription,
                        progress: {
                            loading: false,
                            loadingSucceeded: true,
                            loadingFailed: false
                        }
                    }));
                });
            });
        });
    };
    /**
     * @param {?} data
     * @return {?}
     */
    DictionaryEffects.prototype.getAvailableDataElements = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        var /** @type {?} */ dataElementUids = [];
        var /** @type {?} */ separators = [' ', '\\+', '-', '\\(', '\\)', '\\*', '/', ':', '\\?'];
        var /** @type {?} */ numeratorDataElements = data.split(new RegExp(separators.join('|'), 'g'));
        numeratorDataElements.forEach(function (dataElement) {
            dataElementUids = _this.dataElementWithCategoryOptionCheck(dataElement);
        });
        return dataElementUids.join();
    };
    /**
     * @param {?} dataElement
     * @return {?}
     */
    DictionaryEffects.prototype.dataElementWithCategoryOptionCheck = /**
     * @param {?} dataElement
     * @return {?}
     */
    function (dataElement) {
        var /** @type {?} */ uid = [];
        if (dataElement.indexOf('.') >= 1) {
            uid.push(dataElement
                .replace(/#/g, '')
                .replace(/{/g, '')
                .replace(/}/g, '')
                .split('.')[0]);
        }
        else {
            uid.push(dataElement
                .replace(/#/g, '')
                .replace(/{/g, '')
                .replace(/}/g, ''));
        }
        return uid;
    };
    DictionaryEffects.decorators = [
        { type: Injectable },
    ];
    /** @nocollapse */
    DictionaryEffects.ctorParameters = function () { return [
        { type: Actions },
        { type: Store },
        { type: NgxDhis2HttpClientService },
        { type: DatePipe }
    ]; };
    __decorate([
        Effect({ dispatch: false }),
        __metadata("design:type", Observable)
    ], DictionaryEffects.prototype, "initializeDictionary$", void 0);
    return DictionaryEffects;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var NgxDhis2DictionaryModule = /** @class */ (function () {
    function NgxDhis2DictionaryModule() {
    }
    NgxDhis2DictionaryModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        HttpClientModule,
                        StoreModule.forFeature('dictionary', dictionaryReducer),
                        EffectsModule.forFeature([DictionaryEffects])
                    ],
                    declarations: [DictionaryListComponent, DictionaryProgressComponent],
                    exports: [DictionaryListComponent],
                    providers: [DatePipe]
                },] },
    ];
    return NgxDhis2DictionaryModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { NgxDhis2DictionaryModule, DictionaryListComponent as ɵd, DictionaryProgressComponent as ɵe, DictionaryEffects as ɵc, dictionaryReducer as ɵb };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzcHR6LW5neC1kaGlzMi1kaWN0aW9uYXJ5LmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1kaWN0aW9uYXJ5L2xpYi9zdG9yZS9hY3Rpb25zL2RpY3Rpb25hcnkuYWN0aW9ucy50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItZGljdGlvbmFyeS9saWIvc3RvcmUvcmVkdWNlcnMvZGljdGlvbmFyeS5yZWR1Y2VyLnRzIiwibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1kaWN0aW9uYXJ5L2xpYi9zdG9yZS9zZWxlY3RvcnMvZGljdGlvbmFyeS5zZWxlY3RvcnMudHMiLCJuZzovL0BoaXNwdHovbmd4LWRoaXMyLWRpY3Rpb25hcnkvbGliL2NvbXBvbmVudHMvZGljdGlvbmFyeS1saXN0L2RpY3Rpb25hcnktbGlzdC5jb21wb25lbnQudHMiLCJuZzovL0BoaXNwdHovbmd4LWRoaXMyLWRpY3Rpb25hcnkvbGliL2NvbXBvbmVudHMvZGljdGlvbmFyeS1wcm9ncmVzcy9kaWN0aW9uYXJ5LXByb2dyZXNzLmNvbXBvbmVudC50cyIsIm5nOi8vQGhpc3B0ei9uZ3gtZGhpczItZGljdGlvbmFyeS9saWIvc3RvcmUvZWZmZWN0cy9kaWN0aW9uYXJ5LmVmZmVjdHMudHMiLCJuZzovL0BoaXNwdHovbmd4LWRoaXMyLWRpY3Rpb25hcnkvbGliL25neC1kaGlzMi1kaWN0aW9uYXJ5Lm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBNZXRhZGF0YURpY3Rpb25hcnkgfSBmcm9tICcuLi8uLi9tb2RlbHMvZGljdGlvbmFyeSc7XG5cbmV4cG9ydCBlbnVtIERpY3Rpb25hcnlBY3Rpb25UeXBlcyB7XG4gIEluaXRpYWxpemVEaWN0aW9uYXJ5TWV0YWRhdGEgPSAnW0RpY3Rpb25hcnldIGluaXRpYWxpemUgaW5jb21pbmcgbWV0YWRhdGEnLFxuICBBZGREaWN0aW9uYXJ5TWV0YWRhdGFMaXN0ID0gJ1tEaWN0aW9uYXJ5XSBhZGQgZGljdGlvbmFyeSBtZXRhZGF0YSBsaXN0JyxcbiAgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhID0gJ1tEaWN0aW9uYXJ5XSB1cGRhdGUgZGljdGlvbmFyeSBtZXRhZGF0YSBsaXN0J1xufVxuXG5leHBvcnQgY2xhc3MgSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBEaWN0aW9uYXJ5QWN0aW9uVHlwZXMuSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YTtcbiAgY29uc3RydWN0b3IocHVibGljIGRpY3Rpb25hcnlNZXRhZGF0YUlkZW50aWZpZXJzOiBBcnJheTxzdHJpbmc+KSB7fVxufVxuXG5leHBvcnQgY2xhc3MgQWRkRGljdGlvbmFyeU1ldGFkYXRhTGlzdEFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG4gIHJlYWRvbmx5IHR5cGUgPSBEaWN0aW9uYXJ5QWN0aW9uVHlwZXMuQWRkRGljdGlvbmFyeU1ldGFkYXRhTGlzdDtcbiAgY29uc3RydWN0b3IocHVibGljIGRpY3Rpb25hcnlNZXRhZGF0YUxpc3Q6IE1ldGFkYXRhRGljdGlvbmFyeVtdKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcbiAgcmVhZG9ubHkgdHlwZSA9IERpY3Rpb25hcnlBY3Rpb25UeXBlcy5VcGRhdGVEaWN0aW9uYXJ5TWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWN0aW9uYXJ5TWV0YWRhdGFJZDogc3RyaW5nLFxuICAgIHB1YmxpYyBjaGFuZ2VzOiBQYXJ0aWFsPE1ldGFkYXRhRGljdGlvbmFyeT5cbiAgKSB7fVxufVxuXG5leHBvcnQgdHlwZSBEaWN0aW9uYXJ5QWN0aW9ucyA9XG4gIHwgSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvblxuICB8IEFkZERpY3Rpb25hcnlNZXRhZGF0YUxpc3RBY3Rpb25cbiAgfCBVcGRhdGVEaWN0aW9uYXJ5TWV0YWRhdGFBY3Rpb247XG4iLCJpbXBvcnQgeyBFbnRpdHlTdGF0ZSwgRW50aXR5QWRhcHRlciwgY3JlYXRlRW50aXR5QWRhcHRlciB9IGZyb20gJ0BuZ3J4L2VudGl0eSc7XG5pbXBvcnQgeyBjcmVhdGVGZWF0dXJlU2VsZWN0b3IsIE1lbW9pemVkU2VsZWN0b3IgfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBEaWN0aW9uYXJ5IH0gZnJvbSAnQG5ncngvZW50aXR5L3NyYy9tb2RlbHMnO1xuaW1wb3J0IHtcbiAgRGljdGlvbmFyeUFjdGlvbnMsXG4gIERpY3Rpb25hcnlBY3Rpb25UeXBlc1xufSBmcm9tICcuLi9hY3Rpb25zL2RpY3Rpb25hcnkuYWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBNZXRhZGF0YURpY3Rpb25hcnkgfSBmcm9tICcuLi8uLi9tb2RlbHMvZGljdGlvbmFyeSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGljdGlvbmFyeVN0YXRlIGV4dGVuZHMgRW50aXR5U3RhdGU8TWV0YWRhdGFEaWN0aW9uYXJ5PiB7fVxuXG5leHBvcnQgY29uc3QgZGljdGlvbmFyeUFkYXB0ZXI6IEVudGl0eUFkYXB0ZXI8XG4gIE1ldGFkYXRhRGljdGlvbmFyeVxuPiA9IGNyZWF0ZUVudGl0eUFkYXB0ZXI8TWV0YWRhdGFEaWN0aW9uYXJ5PigpO1xuXG5jb25zdCBpbml0aWFsU3RhdGU6IERpY3Rpb25hcnlTdGF0ZSA9IGRpY3Rpb25hcnlBZGFwdGVyLmdldEluaXRpYWxTdGF0ZSh7fSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWN0aW9uYXJ5UmVkdWNlcihcbiAgc3RhdGU6IERpY3Rpb25hcnlTdGF0ZSA9IGluaXRpYWxTdGF0ZSxcbiAgYWN0aW9uOiBEaWN0aW9uYXJ5QWN0aW9uc1xuKTogRGljdGlvbmFyeVN0YXRlIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgRGljdGlvbmFyeUFjdGlvblR5cGVzLkFkZERpY3Rpb25hcnlNZXRhZGF0YUxpc3Q6IHtcbiAgICAgIHJldHVybiBkaWN0aW9uYXJ5QWRhcHRlci5hZGRNYW55KGFjdGlvbi5kaWN0aW9uYXJ5TWV0YWRhdGFMaXN0LCBzdGF0ZSk7XG4gICAgfVxuICAgIGNhc2UgRGljdGlvbmFyeUFjdGlvblR5cGVzLlVwZGF0ZURpY3Rpb25hcnlNZXRhZGF0YToge1xuICAgICAgcmV0dXJuIGRpY3Rpb25hcnlBZGFwdGVyLnVwZGF0ZU9uZShcbiAgICAgICAgeyBpZDogYWN0aW9uLmRpY3Rpb25hcnlNZXRhZGF0YUlkLCBjaGFuZ2VzOiBhY3Rpb24uY2hhbmdlcyB9LFxuICAgICAgICBzdGF0ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG5cbmV4cG9ydCBjb25zdCBnZXREaWN0aW9uYXJ5U3RhdGUgPSBjcmVhdGVGZWF0dXJlU2VsZWN0b3I8RGljdGlvbmFyeVN0YXRlPihcbiAgJ2RpY3Rpb25hcnknXG4pO1xuXG5leHBvcnQgY29uc3Qge1xuICBzZWxlY3RFbnRpdGllczogZ2V0RGljdGlvbmFyeU1ldGFkYXRhRW50aXRpZXNcbn0gPSBkaWN0aW9uYXJ5QWRhcHRlci5nZXRTZWxlY3RvcnMoZ2V0RGljdGlvbmFyeVN0YXRlKTtcbiIsImltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yLCBNZW1vaXplZFNlbGVjdG9yIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZ2V0RGljdGlvbmFyeU1ldGFkYXRhRW50aXRpZXMgfSBmcm9tICcuLi9yZWR1Y2Vycy9kaWN0aW9uYXJ5LnJlZHVjZXInO1xuXG5leHBvcnQgY29uc3QgZ2V0RGljdGlvbmFyeUxpc3QgPSBtZXRhZGF0YUlkZW50aWZpZXJzID0+XG4gIGNyZWF0ZVNlbGVjdG9yKFxuICAgIGdldERpY3Rpb25hcnlNZXRhZGF0YUVudGl0aWVzLFxuICAgIChkaWN0aW9uYXJ5TWV0YWRhdGFFbnRpdGllczogYW55KSA9PlxuICAgICAgXy5maWx0ZXIoXG4gICAgICAgIF8ubWFwKFxuICAgICAgICAgIG1ldGFkYXRhSWRlbnRpZmllcnMsXG4gICAgICAgICAgbWV0YWRhdGFJZCA9PiBkaWN0aW9uYXJ5TWV0YWRhdGFFbnRpdGllc1ttZXRhZGF0YUlkXVxuICAgICAgICApLFxuICAgICAgICBtZXRhZGF0YSA9PiBtZXRhZGF0YVxuICAgICAgKVxuICApO1xuIiwiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIE9uSW5pdFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTWV0YWRhdGFEaWN0aW9uYXJ5IH0gZnJvbSAnLi4vLi4vbW9kZWxzL2RpY3Rpb25hcnknO1xuXG5pbXBvcnQgeyBEaWN0aW9uYXJ5U3RhdGUgfSBmcm9tICcuLi8uLi9zdG9yZS9yZWR1Y2Vycy9kaWN0aW9uYXJ5LnJlZHVjZXInO1xuaW1wb3J0IHsgZ2V0RGljdGlvbmFyeUxpc3QgfSBmcm9tICcuLi8uLi9zdG9yZS9zZWxlY3RvcnMvZGljdGlvbmFyeS5zZWxlY3RvcnMnO1xuaW1wb3J0IHsgSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbiB9IGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvZGljdGlvbmFyeS5hY3Rpb25zJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICduZ3gtZGhpczItZGljdGlvbmFyeS1saXN0JyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwiZGljdGlvbmFyeS1saXN0LWNvbnRhaW5lclwiPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJkaWN0aW9uYXJ5LWl0ZW0tY29udGFpbmVyXCJcbiAgICAqbmdGb3I9XCJsZXQgZGljdGlvbmFyeUl0ZW0gb2YgZGljdGlvbmFyeUxpc3QkIHwgYXN5bmM7IGxldCBpID0gaW5kZXhcIlxuICA+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJkaWN0aW9uYXJ5LXRpdGxlXCJcbiAgICAgIChjbGljayk9XCJzZXRBY3RpdmVJdGVtKGksICRldmVudClcIlxuICAgID5cbiAgICAgIDxzcGFuPnt7IGRpY3Rpb25hcnlJdGVtLm5hbWUgfX08L3NwYW4+XG4gICAgICA8ZGl2ICpuZ0lmPVwiIWRpY3Rpb25hcnlJdGVtLm5hbWVcIj5cbiAgICAgICAgPGFwcC1kaWN0aW9uYXJ5LXByb2dyZXNzPjwvYXBwLWRpY3Rpb25hcnktcHJvZ3Jlc3M+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImRpY3Rpb25hcnktYm9keVwiXG4gICAgICAqbmdJZj1cImFjdGl2ZUl0ZW0gPT09IGlcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJkaWN0aW9uYXJ5LWRlc2NyaXB0aW9uXCIgW2lubmVySHRtbF09XCJkaWN0aW9uYXJ5SXRlbS5kZXNjcmlwdGlvblwiPjwvZGl2PlxuICAgICAgPGRpdiAqbmdJZj1cImRpY3Rpb25hcnlJdGVtLnByb2dyZXNzLmxvYWRpbmdcIj5cbiAgICAgICAgPGFwcC1kaWN0aW9uYXJ5LXByb2dyZXNzPjwvYXBwLWRpY3Rpb25hcnktcHJvZ3Jlc3M+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbmAsXG4gIHN0eWxlczogW2AuZGljdGlvbmFyeS1saXN0LWNvbnRhaW5lcntib3gtc2hhZG93OjAgMCAzcHggcmdiYSgwLDAsMCwuMyl9LmRpY3Rpb25hcnktaXRlbS1jb250YWluZXJ7Ym9yZGVyLWJvdHRvbTp0aGluIHNvbGlkICNlY2VjZWN9LmRpY3Rpb25hcnktdGl0bGV7cGFkZGluZzo1cHggMTBweDtjdXJzb3I6cG9pbnRlcn0uZGljdGlvbmFyeS1pdGVtLWNvbnRhaW5lcjpsYXN0LWNoaWxke2JvcmRlci1ib3R0b20tc3R5bGU6bm9uZX0uZGljdGlvbmFyeS1ib2R5e2JvcmRlci10b3A6dGhpbiBzb2xpZCAjZWNlY2VjO3BhZGRpbmc6MTBweH0uZGljdGlvbmFyeS1kZXNjcmlwdGlvbnt0ZXh0LWFsaWduOmp1c3RpZnl9YF0sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIERpY3Rpb25hcnlMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgbWV0YWRhdGFJZGVudGlmaWVyczogQXJyYXk8c3RyaW5nPjtcbiAgZGljdGlvbmFyeUxpc3QkOiBPYnNlcnZhYmxlPE1ldGFkYXRhRGljdGlvbmFyeVtdPjtcbiAgYWN0aXZlSXRlbTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RvcmU6IFN0b3JlPERpY3Rpb25hcnlTdGF0ZT4pIHtcbiAgICB0aGlzLmFjdGl2ZUl0ZW0gPSAwO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMubWV0YWRhdGFJZGVudGlmaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFxuICAgICAgICBuZXcgSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbih0aGlzLm1ldGFkYXRhSWRlbnRpZmllcnMpXG4gICAgICApO1xuXG4gICAgICB0aGlzLmRpY3Rpb25hcnlMaXN0JCA9IHRoaXMuc3RvcmUuc2VsZWN0KFxuICAgICAgICBnZXREaWN0aW9uYXJ5TGlzdCh0aGlzLm1ldGFkYXRhSWRlbnRpZmllcnMpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUl0ZW0oaW5kZXgsIGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICh0aGlzLmFjdGl2ZUl0ZW0gPT09IGluZGV4KSB7XG4gICAgICB0aGlzLmFjdGl2ZUl0ZW0gPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3RpdmVJdGVtID0gaW5kZXg7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ2FwcC1kaWN0aW9uYXJ5LXByb2dyZXNzJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwiZGljdGlvbmFyeS1wcm9ncmVzc1wiPlxuICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlZC1iYWNrZ3JvdW5kXCI+PC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgLmRpY3Rpb25hcnktcHJvZ3Jlc3MgZGl2e2hlaWdodDo1cHg7bWFyZ2luLXRvcDozcHh9QC13ZWJraXQta2V5ZnJhbWVzIHBsYWNlSG9sZGVyU2hpbW1lcnswJXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NjhweCAwfTEwMCV7YmFja2dyb3VuZC1wb3NpdGlvbjo0NjhweCAwfX1Aa2V5ZnJhbWVzIHBsYWNlSG9sZGVyU2hpbW1lcnswJXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NjhweCAwfTEwMCV7YmFja2dyb3VuZC1wb3NpdGlvbjo0NjhweCAwfX0uYW5pbWF0ZWQtYmFja2dyb3VuZHstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjVzO2FuaW1hdGlvbi1kdXJhdGlvbjoxLjVzOy13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpmb3J3YXJkczthbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cGxhY2VIb2xkZXJTaGltbWVyO2FuaW1hdGlvbi1uYW1lOnBsYWNlSG9sZGVyU2hpbW1lcjstd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO2JhY2tncm91bmQ6I2Y2ZjdmODtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0byByaWdodCwjZWVlIDglLCNkZGQgMTglLCNlZWUgMzMlKTtiYWNrZ3JvdW5kLXNpemU6ODAwcHggMTA0cHg7aGVpZ2h0OjEwMCU7cG9zaXRpb246cmVsYXRpdmV9YF1cbn0pXG5leHBvcnQgY2xhc3MgRGljdGlvbmFyeVByb2dyZXNzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIG5nT25Jbml0KCkge31cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGVQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgQWN0aW9ucywgRWZmZWN0LCBvZlR5cGUgfSBmcm9tICdAbmdyeC9lZmZlY3RzJztcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgbWVyZ2VNYXAsIG1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZnJvbSwgZm9ya0pvaW4gfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgTmd4RGhpczJIdHRwQ2xpZW50U2VydmljZSB9IGZyb20gJ0BoaXNwdHovbmd4LWRoaXMyLWh0dHAtY2xpZW50JztcbmltcG9ydCB7IERpY3Rpb25hcnlTdGF0ZSB9IGZyb20gJy4uL3JlZHVjZXJzL2RpY3Rpb25hcnkucmVkdWNlcic7XG5cbmltcG9ydCB7XG4gIERpY3Rpb25hcnlBY3Rpb25UeXBlcyxcbiAgSW5pdGlhbGl6ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbixcbiAgQWRkRGljdGlvbmFyeU1ldGFkYXRhTGlzdEFjdGlvbixcbiAgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhQWN0aW9uXG59IGZyb20gJy4uL2FjdGlvbnMvZGljdGlvbmFyeS5hY3Rpb25zJztcbmltcG9ydCB7IGdldERpY3Rpb25hcnlMaXN0IH0gZnJvbSAnLi4vc2VsZWN0b3JzL2RpY3Rpb25hcnkuc2VsZWN0b3JzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIERpY3Rpb25hcnlFZmZlY3RzIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhY3Rpb25zJDogQWN0aW9ucyxcbiAgICBwcml2YXRlIHN0b3JlOiBTdG9yZTxEaWN0aW9uYXJ5U3RhdGU+LFxuICAgIHByaXZhdGUgaHR0cENsaWVudDogTmd4RGhpczJIdHRwQ2xpZW50U2VydmljZSxcbiAgICBwcml2YXRlIGRhdGVQaXBlOiBEYXRlUGlwZVxuICApIHt9XG5cbiAgQEVmZmVjdCh7IGRpc3BhdGNoOiBmYWxzZSB9KVxuICBpbml0aWFsaXplRGljdGlvbmFyeSQ6IE9ic2VydmFibGU8YW55PiA9IHRoaXMuYWN0aW9ucyQucGlwZShcbiAgICBvZlR5cGUoRGljdGlvbmFyeUFjdGlvblR5cGVzLkluaXRpYWxpemVEaWN0aW9uYXJ5TWV0YWRhdGEpLFxuICAgIG1lcmdlTWFwKChhY3Rpb246IEluaXRpYWxpemVEaWN0aW9uYXJ5TWV0YWRhdGFBY3Rpb24pID0+XG4gICAgICB0aGlzLnN0b3JlXG4gICAgICAgIC5zZWxlY3QoZ2V0RGljdGlvbmFyeUxpc3QoYWN0aW9uLmRpY3Rpb25hcnlNZXRhZGF0YUlkZW50aWZpZXJzKSlcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgbWFwKChkaWN0aW9uYXJ5TGlzdDogYW55W10pID0+XG4gICAgICAgICAgICBfLmZpbHRlcihcbiAgICAgICAgICAgICAgYWN0aW9uLmRpY3Rpb25hcnlNZXRhZGF0YUlkZW50aWZpZXJzLFxuICAgICAgICAgICAgICBtZXRhZGF0YUlkID0+ICFfLmZpbmQoZGljdGlvbmFyeUxpc3QsIFsnaWQnLCBtZXRhZGF0YUlkXSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApLFxuICAgIHRhcChpZGVudGlmaWVycyA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIEFkZCBpbmNvbWluZyBpdGVtcyB0byB0aGUgZGljdGlvbmFyeSBsaXN0XG4gICAgICAgKi9cbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goXG4gICAgICAgIG5ldyBBZGREaWN0aW9uYXJ5TWV0YWRhdGFMaXN0QWN0aW9uKFxuICAgICAgICAgIF8ubWFwKGlkZW50aWZpZXJzLCBpZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxvYWRpbmdTdWNjZWVkZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvYWRpbmdGYWlsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIC8qKlxuICAgICAgICogSWRlbnRpZnkgY29ycmVzcG9uZGluZyBkaWN0aW9uYXJ5IGl0ZW1zXG4gICAgICAgKi9cbiAgICAgIGZyb20oaWRlbnRpZmllcnMpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIG1lcmdlTWFwKGlkZW50aWZpZXIgPT5cbiAgICAgICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXQoYGlkZW50aWZpYWJsZU9iamVjdHMvJHtpZGVudGlmaWVyfS5qc29uYCwgdHJ1ZSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgobWV0YWRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goXG4gICAgICAgICAgICBuZXcgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhQWN0aW9uKG1ldGFkYXRhLmlkLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG1ldGFkYXRhLm5hbWUsXG4gICAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb2FkaW5nU3VjY2VlZGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxvYWRpbmdGYWlsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChtZXRhZGF0YS5ocmVmICYmIG1ldGFkYXRhLmhyZWYuaW5kZXhPZignaW5kaWNhdG9yJykgIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JVcmwgPVxuICAgICAgICAgICAgICAnaW5kaWNhdG9ycy8nICtcbiAgICAgICAgICAgICAgbWV0YWRhdGEuaWQgK1xuICAgICAgICAgICAgICAnLmpzb24/ZmllbGRzPTphbGwsZGlzcGxheU5hbWUsaWQsbmFtZSxudW1lcmF0b3JEZXNjcmlwdGlvbiwnICtcbiAgICAgICAgICAgICAgJ2Rlbm9taW5hdG9yRGVzY3JpcHRpb24sZGVub21pbmF0b3IsbnVtZXJhdG9yLGFubnVhbGl6ZWQsZGVjaW1hbHMsaW5kaWNhdG9yVHlwZVtuYW1lXSx1c2VyW25hbWVdLCcgK1xuICAgICAgICAgICAgICAnYXR0cmlidXRlVmFsdWVzW3ZhbHVlLGF0dHJpYnV0ZVtuYW1lXV0saW5kaWNhdG9yR3JvdXBzW25hbWUsaW5kaWNhdG9yc35zaXplXSxsZWdlbmRTZXRbbmFtZSxzeW1ib2xpemVyLCcgK1xuICAgICAgICAgICAgICAnbGVnZW5kc35zaXplXSxkYXRhU2V0c1tuYW1lXSc7XG4gICAgICAgICAgICB0aGlzLmdldEluZGljYXRvckluZm8oaW5kaWNhdG9yVXJsLCBtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIG1ldGFkYXRhLmhyZWYgJiZcbiAgICAgICAgICAgIG1ldGFkYXRhLmhyZWYuaW5kZXhPZignZGF0YUVsZW1lbnQnKSAhPT0gLTFcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFFbGVtZW50VXJsID1cbiAgICAgICAgICAgICAgJ2RhdGFFbGVtZW50cy8nICtcbiAgICAgICAgICAgICAgbWV0YWRhdGEuaWQgK1xuICAgICAgICAgICAgICAnLmpzb24/ZmllbGRzPTphbGwsaWQsbmFtZSxhZ2dyZWdhdGlvblR5cGUsZGlzcGxheU5hbWUsJyArXG4gICAgICAgICAgICAgICdjYXRlZ29yeUNvbWJvW2lkLG5hbWUsY2F0ZWdvcmllc1tpZCxuYW1lLGNhdGVnb3J5T3B0aW9uc1tpZCxuYW1lXV1dLGRhdGFTZXRzWzphbGwsIWNvbXB1bHNvcnlEYXRhRWxlbWVudE9wZXJhbmRzXSc7XG4gICAgICAgICAgICB0aGlzLmdldERhdGFFbGVtZW50SW5mbyhkYXRhRWxlbWVudFVybCwgbWV0YWRhdGEuaWQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobWV0YWRhdGEuaHJlZiAmJiBtZXRhZGF0YS5ocmVmLmluZGV4T2YoJ2RhdGFTZXQnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFTZXRVcmwgPVxuICAgICAgICAgICAgICAnZGF0YVNldHMvJyArXG4gICAgICAgICAgICAgIG1ldGFkYXRhLmlkICtcbiAgICAgICAgICAgICAgJy5qc29uP2ZpZWxkcz06YWxsLHVzZXJbOmFsbF0saWQsbmFtZSxwZXJpb2RUeXBlLHNob3J0TmFtZSwnICtcbiAgICAgICAgICAgICAgJ2NhdGVnb3J5Q29tYm9baWQsbmFtZSxjYXRlZ29yaWVzW2lkLG5hbWUsY2F0ZWdvcnlPcHRpb25zW2lkLG5hbWVdXV0nO1xuICAgICAgICAgICAgdGhpcy5nZXREYXRhU2V0SW5mbyhkYXRhU2V0VXJsLCBtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KVxuICApO1xuXG4gIGdldERhdGFTZXRJbmZvKGRhdGFTZXRVcmw6IHN0cmluZywgZGF0YVNldElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmh0dHBDbGllbnQuZ2V0KGAke2RhdGFTZXRVcmx9YCwgdHJ1ZSkuc3Vic2NyaWJlKChkYXRhU2V0OiBhbnkpID0+IHtcbiAgICAgIGxldCBkYXRhU2V0RGVzY3JpcHRpb24gPVxuICAgICAgICAnPHA+JyArXG4gICAgICAgIGRhdGFTZXQubmFtZSArXG4gICAgICAgICcgb2YgdGhlIDxzdHJvbmc+JyArXG4gICAgICAgIGRhdGFTZXQuZm9ybVR5cGUgK1xuICAgICAgICAnPC9zdHJvbmc+IEZvcm0gY3JlYXRlZCAnICtcbiAgICAgICAgJ2F0IDxzdHJvbmc+JyArXG4gICAgICAgIHRoaXMuZGF0ZVBpcGUudHJhbnNmb3JtKGRhdGFTZXQuY3JlYXRlZCkgK1xuICAgICAgICAnIGJ5ICcgK1xuICAgICAgICBkYXRhU2V0LnVzZXIubmFtZSArXG4gICAgICAgICc8L3N0cm9uZz4nO1xuXG4gICAgICBpZiAoZGF0YVNldC5jYXRlZ29yeUNvbWJvICYmIGRhdGFTZXQuY2F0ZWdvcnlDb21iby5uYW1lICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgZGF0YVNldERlc2NyaXB0aW9uICs9XG4gICAgICAgICAgJzxzcGFuPiBXaXRoIDxzdHJvbmc+JyArXG4gICAgICAgICAgZGF0YVNldC5jYXRlZ29yeUNvbWJvLm5hbWUgK1xuICAgICAgICAgICc8L3N0cm9uZz4gRGltZW5zaW9uIHdoaWNoIGlzIGRpdmlkZWQnICtcbiAgICAgICAgICAnIGludG8gJztcblxuICAgICAgICBkYXRhU2V0LmNhdGVnb3J5Q29tYm8uY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSwgY2F0ZWdvcnlJbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhdGVnb3J5SW5kZXggIT09IDAgJiZcbiAgICAgICAgICAgIGNhdGVnb3J5SW5kZXggIT09IGRhdGFTZXQuY2F0ZWdvcnlDb21iby5jYXRlZ29yaWVzLmxlbmd0aCAtIDFcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRhdGFTZXREZXNjcmlwdGlvbiArPSAnLCAnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhdGVnb3J5SW5kZXggPT09IGRhdGFTZXQuY2F0ZWdvcnlDb21iby5jYXRlZ29yaWVzLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgIGRhdGFTZXQuY2F0ZWdvcnlDb21iby5jYXRlZ29yaWVzLmxlbmd0aCA+IDFcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRhdGFTZXREZXNjcmlwdGlvbiArPSAnIGFuZCAnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFTZXREZXNjcmlwdGlvbiArPSAnPHN0cm9uZz4nO1xuXG4gICAgICAgICAgY2F0ZWdvcnkuY2F0ZWdvcnlPcHRpb25zLmZvckVhY2goXG4gICAgICAgICAgICAoY2F0ZWdvcnlPcHRpb24sIGNhdGVnb3J5T3B0aW9uSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5T3B0aW9uSW5kZXggIT09IDAgJiZcbiAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbkluZGV4ICE9PSBjYXRlZ29yeS5jYXRlZ29yeU9wdGlvbnMubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkYXRhU2V0RGVzY3JpcHRpb24gKz0gJywgJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbkluZGV4ID09PSBjYXRlZ29yeS5jYXRlZ29yeU9wdGlvbnMubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LmNhdGVnb3J5T3B0aW9ucy5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRhdGFTZXREZXNjcmlwdGlvbiArPSAnIGFuZCAnO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGF0YVNldERlc2NyaXB0aW9uICs9ICc8c3Bhbj4nICsgY2F0ZWdvcnlPcHRpb24ubmFtZSArICc8L3NwYW4+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZGF0YVNldERlc2NyaXB0aW9uICs9ICc8L3N0cm9uZz4nO1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXRhU2V0RGVzY3JpcHRpb24gKz0gJzwvc3Bhbj4nO1xuICAgICAgfVxuXG4gICAgICBkYXRhU2V0RGVzY3JpcHRpb24gKz0gJzwvcD4nO1xuXG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFxuICAgICAgICBuZXcgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhQWN0aW9uKGRhdGFTZXRJZCwge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhU2V0RGVzY3JpcHRpb24sXG4gICAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgbG9hZGluZ1N1Y2NlZWRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGxvYWRpbmdGYWlsZWQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldERhdGFFbGVtZW50SW5mbyhkYXRhRWxlbWVudFVybDogc3RyaW5nLCBkYXRhRWxlbWVudElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmh0dHBDbGllbnRcbiAgICAgIC5nZXQoYCR7ZGF0YUVsZW1lbnRVcmx9YCwgdHJ1ZSlcbiAgICAgIC5zdWJzY3JpYmUoKGRhdGFFbGVtZW50OiBhbnkpID0+IHtcbiAgICAgICAgbGV0IGRhdGFFbGVtZW50RGVzY3JpcHRpb24gPVxuICAgICAgICAgICc8cD5UaGlzICcgK1xuICAgICAgICAgIGRhdGFFbGVtZW50Lm5hbWUgK1xuICAgICAgICAgICcgb2YgdGhpcyBtZXRob2Qgb2YgZGF0YSBhZ2dyZWdhdGlvbiA8c3Ryb25nPicgK1xuICAgICAgICAgIGRhdGFFbGVtZW50LmFnZ3JlZ2F0aW9uVHlwZSArXG4gICAgICAgICAgJzwvc3Ryb25nPiBjcmVhdGVkIGF0IDxzdHJvbmc+JyArXG4gICAgICAgICAgdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZGF0YUVsZW1lbnQuY3JlYXRlZCkgK1xuICAgICAgICAgICc8L3N0cm9uZz4gaXMgb25seSB0YWtpbmcgPHN0cm9uZz4nICtcbiAgICAgICAgICBkYXRhRWxlbWVudC5kb21haW5UeXBlICtcbiAgICAgICAgICAnPC9zdHJvbmc+IGRhdGEuIEFzIHRoZSBjdWx0dXJlIG9mIGhlbHBpbmcgdXNlciAnICtcbiAgICAgICAgICAnbm90IGVudGVyaW5nIHVucmVjb2duaXplZCBkYXRhLCB0aGVyZWZvcmUgaXRzIG9ubHkgdGFraW5nIDxzdHJvbmc+JyArXG4gICAgICAgICAgZGF0YUVsZW1lbnQudmFsdWVUeXBlICtcbiAgICAgICAgICAnPC9zdHJvbmc+IHZhbHVlcyAnICtcbiAgICAgICAgICAnZnJvbSB0aGUgdXNlciBpbnB1dDwvcD4nO1xuXG4gICAgICAgIGlmIChkYXRhRWxlbWVudC5jYXRlZ29yeUNvbWJvLm5hbWUgIT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAgICc8cD48c3Ryb25nPicgK1xuICAgICAgICAgICAgZGF0YUVsZW1lbnQubmFtZSArXG4gICAgICAgICAgICAnPC9zdHJvbmc+IGNvbnNpc3RzIG9mIDxzdHJvbmc+JyArXG4gICAgICAgICAgICBkYXRhRWxlbWVudC5jYXRlZ29yeUNvbWJvLm5hbWUgK1xuICAgICAgICAgICAgJzwvc3Ryb25nPiBjYXRlZ29yeSBjb21iaW5hdGlvbnMgb2YgJztcblxuICAgICAgICAgIGRhdGFFbGVtZW50LmNhdGVnb3J5Q29tYm8uY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgaW5kZXggIT09IDAgJiZcbiAgICAgICAgICAgICAgaW5kZXggIT09IGRhdGFFbGVtZW50LmNhdGVnb3J5Q29tYm8uY2F0ZWdvcmllcy5sZW5ndGggLSAxXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnLCAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGluZGV4ID09PSBkYXRhRWxlbWVudC5jYXRlZ29yeUNvbWJvLmNhdGVnb3JpZXMubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgICBkYXRhRWxlbWVudC5jYXRlZ29yeUNvbWJvLmNhdGVnb3JpZXMubGVuZ3RoID4gMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz0gJyBhbmQgJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnPHN0cm9uZz4oJztcbiAgICAgICAgICAgIGNhdGVnb3J5LmNhdGVnb3J5T3B0aW9ucy5mb3JFYWNoKFxuICAgICAgICAgICAgICAoY2F0ZWdvcnlPcHRpb24sIGNhdGVnb3J5T3B0aW9uSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbkluZGV4ICE9PSAwICYmXG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbkluZGV4ICE9PSBjYXRlZ29yeS5jYXRlZ29yeU9wdGlvbnMubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnLCAnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5T3B0aW9uSW5kZXggPT09IGNhdGVnb3J5LmNhdGVnb3J5T3B0aW9ucy5sZW5ndGggLSAxICYmXG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeS5jYXRlZ29yeU9wdGlvbnMubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnIGFuZCAnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAgICAgICAgICc8c3Bhbj4nICsgY2F0ZWdvcnlPcHRpb24ubmFtZSArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnKTwvc3Ryb25nPiBvZiB0aGUgPHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgY2F0ZWdvcnkubmFtZSArXG4gICAgICAgICAgICAgICc8L3N0cm9uZz4gY2F0ZWdvcnknO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnPC9zdHJvbmc+PC9wPic7XG5cbiAgICAgICAgICAvLyBUT0RPIGRlYWwgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbiBvZiBkaGlzXG4gICAgICAgICAgaWYgKGRhdGFFbGVtZW50LmRhdGFTZXRzICYmIGRhdGFFbGVtZW50LmRhdGFTZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAgICAgJzxoNT4nICsgZGF0YUVsZW1lbnQubmFtZSArICcgU291cmNlczwvaDU+JztcblxuICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnPHA+TW9yZSB0aGFuIDxzdHJvbmc+JyArXG4gICAgICAgICAgICAgIGRhdGFFbGVtZW50LmRhdGFTZXRzLmxlbmd0aCArXG4gICAgICAgICAgICAgICc8L3N0cm9uZz4gZGF0YXNldCBpZSAnO1xuXG4gICAgICAgICAgICBkYXRhRWxlbWVudC5kYXRhU2V0cy5mb3JFYWNoKFxuICAgICAgICAgICAgICAoZGF0YVNldDogYW55LCBkYXRhU2V0SW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGFTZXRJbmRleCAhPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgZGF0YVNldEluZGV4ICE9PSBkYXRhRWxlbWVudC5kYXRhU2V0cy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudERlc2NyaXB0aW9uICs9ICcsICc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YVNldEluZGV4ID09PSBkYXRhRWxlbWVudC5kYXRhU2V0cy5sZW5ndGggLSAxICYmXG4gICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudC5kYXRhU2V0cy5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudERlc2NyaXB0aW9uICs9ICcgYW5kICc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAgICAgICAgICc8c3Ryb25nPicgKyBkYXRhU2V0Lm5hbWUgKyAnPC9zdHJvbmc+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnIHVzZSB0aGlzICcgKyBkYXRhRWxlbWVudC5uYW1lICsgJyBkYXRhIGVsZW1lbnQnO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGRhdGFFbGVtZW50LmRhdGFFbGVtZW50R3JvdXBzICYmXG4gICAgICAgICAgICAgIGRhdGFFbGVtZW50LmRhdGFFbGVtZW50R3JvdXBzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBkYXRhRWxlbWVudERlc2NyaXB0aW9uICs9ICcgYW5kIGl0IGJlbG9uZ3MgdG8gJztcblxuICAgICAgICAgICAgICBkYXRhRWxlbWVudC5kYXRhRWxlbWVudEdyb3Vwcy5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIChkYXRhRWxlbWVudEdyb3VwLCBkYXRhRWxlbWVudEdyb3VwSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgZGF0YUVsZW1lbnRHcm91cEluZGV4ICE9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIGRhdGFFbGVtZW50R3JvdXBJbmRleCAhPT1cbiAgICAgICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudC5kYXRhRWxlbWVudEdyb3Vwcy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUVsZW1lbnREZXNjcmlwdGlvbiArPSAnLCAnO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGRhdGFFbGVtZW50R3JvdXBJbmRleCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudC5kYXRhRWxlbWVudEdyb3Vwcy5sZW5ndGggLSAxICYmXG4gICAgICAgICAgICAgICAgICAgIGRhdGFFbGVtZW50LmRhdGFFbGVtZW50R3JvdXBzLmxlbmd0aCA+IDFcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudERlc2NyaXB0aW9uICs9ICcgYW5kICc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudERlc2NyaXB0aW9uICs9XG4gICAgICAgICAgICAgICAgICAgICc8c3Ryb25nPicgKyBkYXRhRWxlbWVudEdyb3VwLm5hbWUgKyAnIEdyb3VwPC9zdHJvbmc+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRhdGFFbGVtZW50RGVzY3JpcHRpb24gKz0gJzwvcD4nO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goXG4gICAgICAgICAgICBuZXcgVXBkYXRlRGljdGlvbmFyeU1ldGFkYXRhQWN0aW9uKGRhdGFFbGVtZW50SWQsIHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGFFbGVtZW50RGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9hZGluZ1N1Y2NlZWRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb2FkaW5nRmFpbGVkOiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5kaWNhdG9ySW5mbyhpbmRpY2F0b3JVcmw6IHN0cmluZywgaW5kaWNhdG9ySWQ6IHN0cmluZykge1xuICAgIHRoaXMuaHR0cENsaWVudC5nZXQoYCR7aW5kaWNhdG9yVXJsfWAsIHRydWUpLnN1YnNjcmliZSgoaW5kaWNhdG9yOiBhbnkpID0+IHtcbiAgICAgIGxldCBpbmRpY2F0b3JEZXNjcmlwdGlvbiA9XG4gICAgICAgICc8cD48c3Ryb25nPicgK1xuICAgICAgICBpbmRpY2F0b3IubmFtZSArXG4gICAgICAgICc8L3N0cm9uZz4gaXMgYSA8c3Ryb25nPicgK1xuICAgICAgICBpbmRpY2F0b3IuaW5kaWNhdG9yVHlwZS5uYW1lICtcbiAgICAgICAgJyA8L3N0cm9uZz4gaW5kaWNhdG9yJztcblxuICAgICAgaWYgKGluZGljYXRvci5udW1lcmF0b3JEZXNjcmlwdGlvbikge1xuICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICc8c3Bhbj4gd2l0aCB0aGUgbnVtZXJhdG9yIGRlc2NyaWJlZCBhcyA8c3Ryb25nPicgK1xuICAgICAgICAgIGluZGljYXRvci5udW1lcmF0b3JEZXNjcmlwdGlvbiArXG4gICAgICAgICAgJzwvc3Ryb25nPjwvc3Bhbj4nO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5kaWNhdG9yLmRlbm9taW5hdG9yRGVzY3JpcHRpb24pIHtcbiAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAnPHNwYW4+IGFuZCBkZW5vbWluYXRvciBkZXNjcmliZWQgYXMgPHN0cm9uZz4nICtcbiAgICAgICAgICBpbmRpY2F0b3IuZGVub21pbmF0b3JEZXNjcmlwdGlvbiArXG4gICAgICAgICAgJzwvc3Ryb25nPjwvc3Bhbj4nO1xuICAgICAgfVxuXG4gICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPSAnPC9wPic7XG5cbiAgICAgIGlmIChpbmRpY2F0b3IuYW5udWFsaXplZCkge1xuICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICc8cD48c3Bhbj5JdMOiwoDCmXMgZmlndXJlIGlzIGFubnVhbGl6ZWQgdG8gc3VwcG9ydCBhbmFseXNpcyBpbiBsZXNzIHRoYW4geWVhciBwZXJpb2QgJyArXG4gICAgICAgICAgJyhtb250aGx5LHF1YXJ0ZXJseSxzZW1pLWFubnVhbGx5KTwvc3Bhbj48L3A+JztcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChcbiAgICAgICAgbmV3IFVwZGF0ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbihpbmRpY2F0b3JJZCwge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbmRpY2F0b3JEZXNjcmlwdGlvbixcbiAgICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGxvYWRpbmdTdWNjZWVkZWQ6IHRydWUsXG4gICAgICAgICAgICBsb2FkaW5nRmFpbGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IG51bWVyYXRvciBleHByZXNzaW9uXG4gICAgICAgKi9cbiAgICAgIGZvcmtKb2luKFxuICAgICAgICB0aGlzLmh0dHBDbGllbnQuZ2V0KFxuICAgICAgICAgICdleHByZXNzaW9ucy9kZXNjcmlwdGlvbj9leHByZXNzaW9uPScgK1xuICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGluZGljYXRvci5udW1lcmF0b3IpLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKSxcbiAgICAgICAgdGhpcy5odHRwQ2xpZW50LmdldChcbiAgICAgICAgICAnZGF0YVNldHMuanNvbj9maWVsZHM9cGVyaW9kVHlwZSxpZCxuYW1lLHRpbWVseURheXMsZm9ybVR5cGUsY3JlYXRlZCxleHBpcnlEYXlzJicgK1xuICAgICAgICAgICAgJ2ZpbHRlcj1kYXRhU2V0RWxlbWVudHMuZGF0YUVsZW1lbnQuaWQ6aW46WycgK1xuICAgICAgICAgICAgdGhpcy5nZXRBdmFpbGFibGVEYXRhRWxlbWVudHMoaW5kaWNhdG9yLm51bWVyYXRvcikgK1xuICAgICAgICAgICAgJ10mcGFnaW5nPWZhbHNlJyxcbiAgICAgICAgICB0cnVlXG4gICAgICAgIClcbiAgICAgICkuc3Vic2NyaWJlKChudW1lcmF0b3JSZXN1bHRzOiBhbnlbXSkgPT4ge1xuICAgICAgICBpZiAobnVtZXJhdG9yUmVzdWx0c1swXSkge1xuICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9XG4gICAgICAgICAgICAnPHA+TnVtZXJhdG9yIGlzIGNhbGN1bGF0ZWQgZnJvbSA8c3Ryb25nPicgK1xuICAgICAgICAgICAgbnVtZXJhdG9yUmVzdWx0c1swXS5kZXNjcmlwdGlvbiArXG4gICAgICAgICAgICAnPC9zdHJvbmc+JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudW1lcmF0b3JSZXN1bHRzWzFdICYmIG51bWVyYXRvclJlc3VsdHNbMV0uZGF0YVNldHMpIHtcbiAgICAgICAgICBjb25zdCBkYXRhU2V0czogYW55W10gPSBudW1lcmF0b3JSZXN1bHRzWzFdLmRhdGFTZXRzO1xuXG4gICAgICAgICAgaWYgKGRhdGFTZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICcgb3JpZ2luYXRpbmcgZnJvbSAnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFTZXRzLmZvckVhY2goKGRhdGFzZXQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwICYmIGluZGV4ICE9PSBkYXRhU2V0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICcsICc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gZGF0YVNldHMubGVuZ3RoIC0gMSAmJiBkYXRhU2V0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICcgYW5kICc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9XG4gICAgICAgICAgICAgICc8c3Bhbj48c3Ryb25nPicgK1xuICAgICAgICAgICAgICBkYXRhc2V0Lm5hbWUgK1xuICAgICAgICAgICAgICAnLDwvc3Ryb25nPiB0aGF0IGlzIGNvbGxlY3RlZCA8c3Ryb25nPicgK1xuICAgICAgICAgICAgICBkYXRhc2V0LnBlcmlvZFR5cGUgK1xuICAgICAgICAgICAgICAnPC9zdHJvbmc+IHdpdGggZGVhZGxpbmUgZm9yIHN1Ym1pc3Npb24gYWZ0ZXIgPHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgZGF0YXNldC50aW1lbHlEYXlzICtcbiAgICAgICAgICAgICAgJyBkYXlzIDwvc3Ryb25nPjwvc3Bhbj4nO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz0gYDwvcD5gO1xuXG4gICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goXG4gICAgICAgICAgbmV3IFVwZGF0ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbihpbmRpY2F0b3JJZCwge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IGluZGljYXRvckRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgbG9hZGluZ1N1Y2NlZWRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbG9hZGluZ0ZhaWxlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgZGVub21pbmF0b3IgZXhwcmVzc2lvblxuICAgICAgICAgKi9cbiAgICAgICAgZm9ya0pvaW4oXG4gICAgICAgICAgdGhpcy5odHRwQ2xpZW50LmdldChcbiAgICAgICAgICAgICdleHByZXNzaW9ucy9kZXNjcmlwdGlvbj9leHByZXNzaW9uPScgK1xuICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoaW5kaWNhdG9yLmRlbm9taW5hdG9yKSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApLFxuICAgICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXQoXG4gICAgICAgICAgICAnZGF0YVNldHMuanNvbj9maWVsZHM9cGVyaW9kVHlwZSxpZCxuYW1lLHRpbWVseURheXMsZm9ybVR5cGUsY3JlYXRlZCxleHBpcnlEYXlzJicgK1xuICAgICAgICAgICAgICAnZmlsdGVyPWRhdGFTZXRFbGVtZW50cy5kYXRhRWxlbWVudC5pZDppbjpbJyArXG4gICAgICAgICAgICAgIHRoaXMuZ2V0QXZhaWxhYmxlRGF0YUVsZW1lbnRzKGluZGljYXRvci5kZW5vbWluYXRvcikgK1xuICAgICAgICAgICAgICAnXSZwYWdpbmc9ZmFsc2UnLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgIClcbiAgICAgICAgKS5zdWJzY3JpYmUoKGRlbm9taW5hdG9yUmVzdWx0czogYW55W10pID0+IHtcbiAgICAgICAgICBpZiAoZGVub21pbmF0b3JSZXN1bHRzWzBdKSB7XG4gICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnPHA+RGVub21pbmF0b3IgaXMgY2FsY3VsYXRlZCBmcm9tIDxzdHJvbmc+JyArXG4gICAgICAgICAgICAgIGRlbm9taW5hdG9yUmVzdWx0c1swXS5kZXNjcmlwdGlvbiArXG4gICAgICAgICAgICAgICc8L3N0cm9uZz4nO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkZW5vbWluYXRvclJlc3VsdHNbMV0gJiYgZGVub21pbmF0b3JSZXN1bHRzWzFdLmRhdGFTZXRzKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhU2V0czogYW55W10gPSBkZW5vbWluYXRvclJlc3VsdHNbMV0uZGF0YVNldHM7XG5cbiAgICAgICAgICAgIGlmIChkYXRhU2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICcgb3JpZ2luYXRpbmcgZnJvbSAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkYXRhU2V0cy5mb3JFYWNoKChkYXRhc2V0OiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwICYmIGluZGV4ICE9PSBkYXRhU2V0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz0gJywgJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gZGF0YVNldHMubGVuZ3RoIC0gMSAmJiBkYXRhU2V0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz0gJyBhbmQgJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9XG4gICAgICAgICAgICAgICAgJzxzcGFuPjxzdHJvbmc+JyArXG4gICAgICAgICAgICAgICAgZGF0YXNldC5uYW1lICtcbiAgICAgICAgICAgICAgICAnLDwvc3Ryb25nPiB0aGF0IGlzIGNvbGxlY3RlZCA8c3Ryb25nPicgK1xuICAgICAgICAgICAgICAgIGRhdGFzZXQucGVyaW9kVHlwZSArXG4gICAgICAgICAgICAgICAgJzwvc3Ryb25nPiB3aXRoIGRlYWRsaW5lIGZvciBzdWJtaXNzaW9uIGFmdGVyIDxzdHJvbmc+JyArXG4gICAgICAgICAgICAgICAgZGF0YXNldC50aW1lbHlEYXlzICtcbiAgICAgICAgICAgICAgICAnIGRheXMgPC9zdHJvbmc+PC9zcGFuPic7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPSBgPC9wPmA7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBJbmRpY2F0b3IgZ3JvdXBcbiAgICAgICAgICAgKi9cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGluZGljYXRvci5pbmRpY2F0b3JHcm91cHMgJiZcbiAgICAgICAgICAgIGluZGljYXRvci5pbmRpY2F0b3JHcm91cHMubGVuZ3RoID4gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz0gJzxkaXY+PHA+SXQgYmVsb25ncyB0byAnO1xuXG4gICAgICAgICAgICBpbmRpY2F0b3IuaW5kaWNhdG9yR3JvdXBzLmZvckVhY2goKGluZGljYXRvckdyb3VwLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW5kZXggIT09IDAgJiZcbiAgICAgICAgICAgICAgICBpbmRleCAhPT0gaW5kaWNhdG9yLmluZGljYXRvckdyb3Vwcy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICcsICc7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW5kZXggPT09IGluZGljYXRvci5pbmRpY2F0b3JHcm91cHMubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgICAgIGluZGljYXRvci5pbmRpY2F0b3JHcm91cHMubGVuZ3RoID4gMVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPSAnIGFuZCAnO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaW5kaWNhdG9yRGVzY3JpcHRpb24gKz1cbiAgICAgICAgICAgICAgICAnPHNwYW4+PHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3JHcm91cC5uYW1lICtcbiAgICAgICAgICAgICAgICAnPC9zdHJvbmc+IHdpdGggPHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3JHcm91cC5pbmRpY2F0b3JzICtcbiAgICAgICAgICAgICAgICAnPC9zdHJvbmc+IG90aGVyIHJlbGF0ZWQgaW5kaWNhdG9yczwvc3Bhbj4nO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9ICc8L3A+PC9kaXY+JztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBBdHRyaWJ1dGUgdmFsdWVzXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgaW5kaWNhdG9yLmF0dHJpYnV0ZVZhbHVlcyAmJlxuICAgICAgICAgICAgaW5kaWNhdG9yLmF0dHJpYnV0ZVZhbHVlcy5sZW5ndGggPiAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnPGRpdj48cD5PdGhlciByZWxhdGVkIGRldGFpbHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5kaWNhdG9ycyBpbmNsdWRlczogJztcblxuICAgICAgICAgICAgaW5kaWNhdG9yLmF0dHJpYnV0ZVZhbHVlcy5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAgICc8c3Bhbj48c3Ryb25nPicgK1xuICAgICAgICAgICAgICAgIGF0dHIuYXR0cmlidXRlLm5hbWUgK1xuICAgICAgICAgICAgICAgICc6ICcgK1xuICAgICAgICAgICAgICAgIGF0dHIudmFsdWUgK1xuICAgICAgICAgICAgICAgICc8L3N0cm9uZz48L3NwYW4+JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPSAnPC9wPjwvZGl2Pic7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogTGVnZW5kIHNldFxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChpbmRpY2F0b3IubGVnZW5kU2V0KSB7XG4gICAgICAgICAgICBpbmRpY2F0b3JEZXNjcmlwdGlvbiArPVxuICAgICAgICAgICAgICAnPGRpdj48cD4gSXQgbWFrZXMgdXNlIG9mOiA8c3Ryb25nPicgK1xuICAgICAgICAgICAgICBpbmRpY2F0b3IubGVnZW5kU2V0Lm5hbWUgK1xuICAgICAgICAgICAgICAnPC9zdHJvbmc+IGxlZ2VuZCcgK1xuICAgICAgICAgICAgICAnIHNldCBmb3IgYW5hbHlzaXMgd2l0aCA8c3Ryb25nPicgK1xuICAgICAgICAgICAgICBpbmRpY2F0b3IubGVnZW5kU2V0LmxlZ2VuZHMgK1xuICAgICAgICAgICAgICAnIENsYXNzZXMgPC9zdHJvbmc+dXNpbmcgPHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgaW5kaWNhdG9yLmxlZ2VuZFNldC5zeW1ib2xpemVyICtcbiAgICAgICAgICAgICAgJyBmb3IgYW5hbHlzaXM8L3N0cm9uZz48L3A+PC9kaXY+JztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBVc2VyIGluZm9cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAoaW5kaWNhdG9yLnVzZXIpIHtcbiAgICAgICAgICAgIGluZGljYXRvckRlc2NyaXB0aW9uICs9XG4gICAgICAgICAgICAgICc8ZGl2PjxwPlRoaXMgaW5kaWNhdG9yIHdhcyA8c3Ryb25nPiBmaXJzdCBjcmVhdGVkIDwvc3Ryb25nPiBpbiB0aGUgc3lzdGVtIG9uIDxzdHJvbmc+JyArXG4gICAgICAgICAgICAgIHRoaXMuZGF0ZVBpcGUudHJhbnNmb3JtKGluZGljYXRvci5jcmVhdGVkKSArXG4gICAgICAgICAgICAgICc8L3N0cm9uZz4gYnkgPHN0cm9uZz4nICtcbiAgICAgICAgICAgICAgaW5kaWNhdG9yLnVzZXIubmFtZSArXG4gICAgICAgICAgICAgICc8L3N0cm9uZz48L3A+PC9kaXY+JztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFxuICAgICAgICAgICAgbmV3IFVwZGF0ZURpY3Rpb25hcnlNZXRhZGF0YUFjdGlvbihpbmRpY2F0b3JJZCwge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaW5kaWNhdG9yRGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9hZGluZ1N1Y2NlZWRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb2FkaW5nRmFpbGVkOiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRBdmFpbGFibGVEYXRhRWxlbWVudHMoZGF0YSkge1xuICAgIGxldCBkYXRhRWxlbWVudFVpZHMgPSBbXTtcbiAgICBjb25zdCBzZXBhcmF0b3JzID0gWycgJywgJ1xcXFwrJywgJy0nLCAnXFxcXCgnLCAnXFxcXCknLCAnXFxcXConLCAnLycsICc6JywgJ1xcXFw/J107XG4gICAgY29uc3QgbnVtZXJhdG9yRGF0YUVsZW1lbnRzID0gZGF0YS5zcGxpdChcbiAgICAgIG5ldyBSZWdFeHAoc2VwYXJhdG9ycy5qb2luKCd8JyksICdnJylcbiAgICApO1xuICAgIG51bWVyYXRvckRhdGFFbGVtZW50cy5mb3JFYWNoKGRhdGFFbGVtZW50ID0+IHtcbiAgICAgIGRhdGFFbGVtZW50VWlkcyA9IHRoaXMuZGF0YUVsZW1lbnRXaXRoQ2F0ZWdvcnlPcHRpb25DaGVjayhkYXRhRWxlbWVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGFFbGVtZW50VWlkcy5qb2luKCk7XG4gIH1cblxuICBkYXRhRWxlbWVudFdpdGhDYXRlZ29yeU9wdGlvbkNoZWNrKGRhdGFFbGVtZW50OiBhbnkpIHtcbiAgICBjb25zdCB1aWQgPSBbXTtcbiAgICBpZiAoZGF0YUVsZW1lbnQuaW5kZXhPZignLicpID49IDEpIHtcbiAgICAgIHVpZC5wdXNoKFxuICAgICAgICBkYXRhRWxlbWVudFxuICAgICAgICAgIC5yZXBsYWNlKC8jL2csICcnKVxuICAgICAgICAgIC5yZXBsYWNlKC97L2csICcnKVxuICAgICAgICAgIC5yZXBsYWNlKC99L2csICcnKVxuICAgICAgICAgIC5zcGxpdCgnLicpWzBdXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB1aWQucHVzaChcbiAgICAgICAgZGF0YUVsZW1lbnRcbiAgICAgICAgICAucmVwbGFjZSgvIy9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvey9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvfS9nLCAnJylcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVpZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSwgRGF0ZVBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSHR0cENsaWVudE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IFN0b3JlTW9kdWxlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgRWZmZWN0c01vZHVsZSB9IGZyb20gJ0BuZ3J4L2VmZmVjdHMnO1xuXG5pbXBvcnQgeyBEaWN0aW9uYXJ5TGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9kaWN0aW9uYXJ5LWxpc3QvZGljdGlvbmFyeS1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBEaWN0aW9uYXJ5UHJvZ3Jlc3NDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvZGljdGlvbmFyeS1wcm9ncmVzcy9kaWN0aW9uYXJ5LXByb2dyZXNzLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBkaWN0aW9uYXJ5UmVkdWNlciB9IGZyb20gJy4vc3RvcmUvcmVkdWNlcnMvZGljdGlvbmFyeS5yZWR1Y2VyJztcbmltcG9ydCB7IERpY3Rpb25hcnlFZmZlY3RzIH0gZnJvbSAnLi9zdG9yZS9lZmZlY3RzL2RpY3Rpb25hcnkuZWZmZWN0cyc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgSHR0cENsaWVudE1vZHVsZSxcbiAgICBTdG9yZU1vZHVsZS5mb3JGZWF0dXJlKCdkaWN0aW9uYXJ5JywgZGljdGlvbmFyeVJlZHVjZXIpLFxuICAgIEVmZmVjdHNNb2R1bGUuZm9yRmVhdHVyZShbRGljdGlvbmFyeUVmZmVjdHNdKVxuICBdLFxuXG4gIGRlY2xhcmF0aW9uczogW0RpY3Rpb25hcnlMaXN0Q29tcG9uZW50LCBEaWN0aW9uYXJ5UHJvZ3Jlc3NDb21wb25lbnRdLFxuICBleHBvcnRzOiBbRGljdGlvbmFyeUxpc3RDb21wb25lbnRdLFxuICBwcm92aWRlcnM6IFtEYXRlUGlwZV1cbn0pXG5leHBvcnQgY2xhc3MgTmd4RGhpczJEaWN0aW9uYXJ5TW9kdWxlIHt9XG4iXSwibmFtZXMiOlsiXy5maWx0ZXIiLCJfLm1hcCIsIm1hcCIsIl8uZmluZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQUlpQywyQ0FBMkM7K0JBQzlDLDJDQUEyQzs4QkFDNUMsOENBQThDOztBQUczRSxJQUFBO0lBRUUsNENBQW1CLDZCQUE0QztRQUE1QyxrQ0FBNkIsR0FBN0IsNkJBQTZCLENBQWU7b0JBRC9DLHFCQUFxQixDQUFDLDRCQUE0QjtLQUNDOzZDQVhyRTtJQVlDLENBQUE7QUFIRCxBQUtBLElBQUE7SUFFRSx5Q0FBbUIsc0JBQTRDO1FBQTVDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBc0I7b0JBRC9DLHFCQUFxQixDQUFDLHlCQUF5QjtLQUNJOzBDQWhCckU7SUFpQkMsQ0FBQTtBQUhELEFBS0EsSUFBQTtJQUVFLHdDQUNTLHNCQUNBO1FBREEseUJBQW9CLEdBQXBCLG9CQUFvQjtRQUNwQixZQUFPLEdBQVAsT0FBTztvQkFIQSxxQkFBcUIsQ0FBQyx3QkFBd0I7S0FJMUQ7eUNBeEJOO0lBeUJDLENBQUE7Ozs7OztBQ3pCRCxBQVlPLHFCQUFNLGlCQUFpQixHQUUxQixtQkFBbUIsRUFBc0IsQ0FBQztBQUU5QyxxQkFBTSxZQUFZLEdBQW9CLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7Ozs7O0FBRTVFLDJCQUNFLEtBQXFDLEVBQ3JDLE1BQXlCO0lBRHpCLHNCQUFBLEVBQUEsb0JBQXFDO0lBR3JDLFFBQVEsTUFBTSxDQUFD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
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Component } from '@angular/core';
import { throwError } from 'rxjs';
import { catchError } from 'rxjs/operators';
export class LoginFormComponent {
    /**
     * @param {?} httpClient
     */
    constructor(httpClient) {
        this.httpClient = httpClient;
        this.credentials = {
            username: undefined,
            password: undefined
        };
        this.loginError = '';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onSubmit(e) {
        e.stopPropagation();
        this.loggingIn = true;
        this.loginError = '';
        const /** @type {?} */ headers = new HttpHeaders().set('Content-Type', 'application/x-www-form-urlencoded');
        this.httpClient.post('../../../dhis-web-commons-security/login.action', 'j_username=' +
            this.credentials.username +
            '&j_password=' +
            this.credentials.password, {
            headers
        }).pipe(catchError(this._handleError)).subscribe(() => {
            this.loggingIn = false;
        }, (error) => {
            this.loggingIn = false;
            if (error.status === 200 && error.url.indexOf('login') !== -1) {
                this.loginError = 'Incorrect username or password';
            }
        });
    }
    /**
     * @param {?} err
     * @return {?}
     */
    _handleError(err) {
        let /** @type {?} */ error = null;
        if (err.error instanceof Error) {
            // A client-side or network error occurred. Handle it accordingly.
            error = {
                message: err.error,
                status: err.status,
                statusText: err.statusText,
                url: err.url
            };
        }
        else {
            // The backend returned an unsuccessful response code.
            // The response body may contain clues as to what went wrong,
            error = {
                message: err.error instanceof Object ? err.error.message : err.error ? err.error : err.message,
                status: err.status,
                statusText: err.statusText,
                url: err.url
            };
        }
        return throwError(error);
    }
}
LoginFormComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-login-form',
                template: `<form action="" class="login-form" #loginForm="ngForm">
  <input type="text" required [(ngModel)]="credentials.username" name="username" #username="ngModel"
         placeholder="Enter username" autofocus tabindex="0">
  <input type="password" required [(ngModel)]="credentials.password" name="password" #password="ngModel"
         placeholder="Enter password" autofocus tabindex="1">
  <button type="submit" [disabled]="(!password.valid && !username.valid) || loggingIn" (click)="onSubmit($event)" tabindex="2">
    {{loggingIn ? 'Logging in ...' : 'Login'}}
  </button>
</form>
<div *ngIf="loginError !== ''" class="login-error-block">{{loginError}}</div>
`,
                styles: [`.login-form{display:flex;padding:3px;width:100%}.login-form input{padding-left:7px;display:flex;align-items:center;justify-content:flex-start;margin-right:3px;height:33px;outline:0;border-radius:2px;border:thin solid #ececec}.login-form button{height:37px;background-color:#fff;border:thin solid #ececec;border-radius:2px;cursor:pointer}.login-error-block{font-size:14px;color:red;padding:5px}@media (max-width:500px){.login-form{display:block}.login-form input{width:100%;margin-bottom:3px;margin-right:0}.login-form button{width:100%;text-align:center}}`]
            },] },
];
/** @nocollapse */
LoginFormComponent.ctorParameters = () => [
    { type: HttpClient }
];
function LoginFormComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    LoginFormComponent.prototype.credentials;
    /** @type {?} */
    LoginFormComponent.prototype.loginError;
    /** @type {?} */
    LoginFormComponent.prototype.loggingIn;
    /** @type {?} */
    LoginFormComponent.prototype.httpClient;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4tZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1tZW51LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbG9naW4tZm9ybS9sb2dpbi1mb3JtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFVBQVUsRUFDVixXQUFXLEVBRVosTUFBTSxzQkFBc0IsQ0FBQztBQUM5QixPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBaUI1QyxNQUFNOzs7O0lBS0osWUFBb0IsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN4QyxJQUFJLENBQUMsV0FBVyxHQUFHO1lBQ2pCLFFBQVEsRUFBRSxTQUFTO1lBQ25CLFFBQVEsRUFBRSxTQUFTO1NBQ3BCLENBQUM7UUFDRixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztLQUN0Qjs7OztJQUVELFFBQVE7S0FDUDs7Ozs7SUFFRCxRQUFRLENBQUMsQ0FBQztRQUNSLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUVyQix1QkFBTSxPQUFPLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQyxHQUFHLENBQ25DLGNBQWMsRUFDZCxtQ0FBbUMsQ0FDcEMsQ0FBQztRQUNGLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUNsQixpREFBaUQsRUFDakQsYUFBYTtZQUNiLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUTtZQUN6QixjQUFjO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQ3pCO1lBQ0UsT0FBTztTQUNSLENBQ0YsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FDN0MsR0FBRyxFQUFFO1lBQ0gsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDeEIsRUFDRCxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ1IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDdkIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5RCxJQUFJLENBQUMsVUFBVSxHQUFHLGdDQUFnQyxDQUFDO2FBQ3BEO1NBQ0YsQ0FDRixDQUFDO0tBQ0g7Ozs7O0lBRU8sWUFBWSxDQUFDLEdBQXNCO1FBQ3pDLHFCQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDakIsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDOztZQUUvQixLQUFLLEdBQUc7Z0JBQ04sT0FBTyxFQUFFLEdBQUcsQ0FBQyxLQUFLO2dCQUNsQixNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU07Z0JBQ2xCLFVBQVUsRUFBRSxHQUFHLENBQUMsVUFBVTtnQkFDMUIsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHO2FBQ2IsQ0FBQztTQUNIO1FBQUMsSUFBSSxDQUFDLENBQUM7OztZQUdOLEtBQUssR0FBRztnQkFDTixPQUFPLEVBQUUsR0FBRyxDQUFDLEtBQUssWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTztnQkFDOUYsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO2dCQUNsQixVQUFVLEVBQUUsR0FBRyxDQUFDLFVBQVU7Z0JBQzFCLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRzthQUNiLENBQUM7U0FDSDtRQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7Ozs7WUFuRjVCLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsZ0JBQWdCO2dCQUMxQixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Q0FVWDtnQkFDQyxNQUFNLEVBQUUsQ0FBQyw2aUJBQTZpQixDQUFDO2FBQ3hqQjs7OztZQXRCQyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgSHR0cENsaWVudCxcbiAgSHR0cEhlYWRlcnMsXG4gIEh0dHBFcnJvclJlc3BvbnNlXG59IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbG9naW4tZm9ybScsXG4gIHRlbXBsYXRlOiBgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJsb2dpbi1mb3JtXCIgI2xvZ2luRm9ybT1cIm5nRm9ybVwiPlxuICA8aW5wdXQgdHlwZT1cInRleHRcIiByZXF1aXJlZCBbKG5nTW9kZWwpXT1cImNyZWRlbnRpYWxzLnVzZXJuYW1lXCIgbmFtZT1cInVzZXJuYW1lXCIgI3VzZXJuYW1lPVwibmdNb2RlbFwiXG4gICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIHVzZXJuYW1lXCIgYXV0b2ZvY3VzIHRhYmluZGV4PVwiMFwiPlxuICA8aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgcmVxdWlyZWQgWyhuZ01vZGVsKV09XCJjcmVkZW50aWFscy5wYXNzd29yZFwiIG5hbWU9XCJwYXNzd29yZFwiICNwYXNzd29yZD1cIm5nTW9kZWxcIlxuICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBwYXNzd29yZFwiIGF1dG9mb2N1cyB0YWJpbmRleD1cIjFcIj5cbiAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgW2Rpc2FibGVkXT1cIighcGFzc3dvcmQudmFsaWQgJiYgIXVzZXJuYW1lLnZhbGlkKSB8fCBsb2dnaW5nSW5cIiAoY2xpY2spPVwib25TdWJtaXQoJGV2ZW50KVwiIHRhYmluZGV4PVwiMlwiPlxuICAgIHt7bG9nZ2luZ0luID8gJ0xvZ2dpbmcgaW4gLi4uJyA6ICdMb2dpbid9fVxuICA8L2J1dHRvbj5cbjwvZm9ybT5cbjxkaXYgKm5nSWY9XCJsb2dpbkVycm9yICE9PSAnJ1wiIGNsYXNzPVwibG9naW4tZXJyb3ItYmxvY2tcIj57e2xvZ2luRXJyb3J9fTwvZGl2PlxuYCxcbiAgc3R5bGVzOiBbYC5sb2dpbi1mb3Jte2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjNweDt3aWR0aDoxMDAlfS5sb2dpbi1mb3JtIGlucHV0e3BhZGRpbmctbGVmdDo3cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDttYXJnaW4tcmlnaHQ6M3B4O2hlaWdodDozM3B4O291dGxpbmU6MDtib3JkZXItcmFkaXVzOjJweDtib3JkZXI6dGhpbiBzb2xpZCAjZWNlY2VjfS5sb2dpbi1mb3JtIGJ1dHRvbntoZWlnaHQ6MzdweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOnRoaW4gc29saWQgI2VjZWNlYztib3JkZXItcmFkaXVzOjJweDtjdXJzb3I6cG9pbnRlcn0ubG9naW4tZXJyb3ItYmxvY2t7Zm9udC1zaXplOjE0cHg7Y29sb3I6cmVkO3BhZGRpbmc6NXB4fUBtZWRpYSAobWF4LXdpZHRoOjUwMHB4KXsubG9naW4tZm9ybXtkaXNwbGF5OmJsb2NrfS5sb2dpbi1mb3JtIGlucHV0e3dpZHRoOjEwMCU7bWFyZ2luLWJvdHRvbTozcHg7bWFyZ2luLXJpZ2h0OjB9LmxvZ2luLWZvcm0gYnV0dG9ue3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXJ9fWBdXG59KVxuZXhwb3J0IGNsYXNzIExvZ2luRm9ybUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGNyZWRlbnRpYWxzOiBhbnk7XG4gIGxvZ2luRXJyb3I6IHN0cmluZztcbiAgbG9nZ2luZ0luOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCkge1xuICAgIHRoaXMuY3JlZGVudGlhbHMgPSB7XG4gICAgICB1c2VybmFtZTogdW5kZWZpbmVkLFxuICAgICAgcGFzc3dvcmQ6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgdGhpcy5sb2dpbkVycm9yID0gJyc7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgfVxuXG4gIG9uU3VibWl0KGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMubG9nZ2luZ0luID0gdHJ1ZTtcbiAgICB0aGlzLmxvZ2luRXJyb3IgPSAnJztcblxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKS5zZXQoXG4gICAgICAnQ29udGVudC1UeXBlJyxcbiAgICAgICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgKTtcbiAgICB0aGlzLmh0dHBDbGllbnQucG9zdChcbiAgICAgICcuLi8uLi8uLi9kaGlzLXdlYi1jb21tb25zLXNlY3VyaXR5L2xvZ2luLmFjdGlvbicsXG4gICAgICAnal91c2VybmFtZT0nICtcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMudXNlcm5hbWUgK1xuICAgICAgJyZqX3Bhc3N3b3JkPScgK1xuICAgICAgdGhpcy5jcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyc1xuICAgICAgfVxuICAgICkucGlwZShjYXRjaEVycm9yKHRoaXMuX2hhbmRsZUVycm9yKSkuc3Vic2NyaWJlKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzID09PSAyMDAgJiYgZXJyb3IudXJsLmluZGV4T2YoJ2xvZ2luJykgIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5sb2dpbkVycm9yID0gJ0luY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyOiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgIGxldCBlcnJvciA9IG51bGw7XG4gICAgaWYgKGVyci5lcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBBIGNsaWVudC1zaWRlIG9yIG5ldHdvcmsgZXJyb3Igb2NjdXJyZWQuIEhhbmRsZSBpdCBhY2NvcmRpbmdseS5cbiAgICAgIGVycm9yID0ge1xuICAgICAgICBtZXNzYWdlOiBlcnIuZXJyb3IsXG4gICAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyLnN0YXR1c1RleHQsXG4gICAgICAgIHVybDogZXJyLnVybFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIGJhY2tlbmQgcmV0dXJuZWQgYW4gdW5zdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUuXG4gICAgICAvLyBUaGUgcmVzcG9uc2UgYm9keSBtYXkgY29udGFpbiBjbHVlcyBhcyB0byB3aGF0IHdlbnQgd3JvbmcsXG4gICAgICBlcnJvciA9IHtcbiAgICAgICAgbWVzc2FnZTogZXJyLmVycm9yIGluc3RhbmNlb2YgT2JqZWN0ID8gZXJyLmVycm9yLm1lc3NhZ2UgOiBlcnIuZXJyb3IgPyBlcnIuZXJyb3IgOiBlcnIubWVzc2FnZSxcbiAgICAgICAgc3RhdHVzOiBlcnIuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBlcnIuc3RhdHVzVGV4dCxcbiAgICAgICAgdXJsOiBlcnIudXJsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9yKTtcbiAgfVxufVxuIl19